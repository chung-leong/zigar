const T={Primitive:0,Array:1,Struct:2,Union:3,ErrorUnion:4,ErrorSet:5,Enum:6,Optional:7,Pointer:8,Slice:9,Vector:10,Opaque:11,ArgStruct:12,VariadicStruct:13,Function:14},U={Unknown:0,Promise:1,Generator:2,AbortSignal:3,Allocator:4,Iterator:5,Reader:6,Writer:7,File:8,Directory:9},Ge=Object.keys(T),V={HasValue:1,HasObject:2,HasPointer:4,HasSlot:8,HasProxy:16},Wt={IsSize:32},ke={HasSentinel:32,IsString:64,IsTypedArray:128,IsClampedArray:256},We={IsTuple:128},An={IsOpenEnded:32},Ct={HasSelector:32},$={HasLength:32,IsMultiple:64,IsSingle:128,IsConst:256,IsNullable:512},re={HasSentinel:32,IsString:64,IsTypedArray:128,IsClampedArray:256,IsOpaque:512},Ce={IsGlobal:32},Pt={IsTypedArray:32,IsClampedArray:64},ot={HasOptions:32,IsThrowing:64,IsAsync:128},N={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Literal:7,Null:8,Undefined:9,Unsupported:10},Zt=Object.keys(N),D={IsRequired:1,IsReadOnly:2,IsPartOfSet:4,IsSelector:8,IsMethod:16,IsExpectingInstance:32,IsSentinel:64,IsBackingInt:128,IsString:256,IsPlain:512,IsTypedArray:1024,IsClampedArray:2048},O={Pointer:1,Slice:2,Const:4,ReadOnly:8},P={IsInactive:1,IsImmutable:2,IgnoreUncreated:4,IgnoreInactive:8,IgnoreArguments:16,IgnoreRetval:32},j={NONE:0,EACCES:2,EAGAIN:6,EBADF:8,EDEADLK:16,EEXIST:20,EFAULT:21,EINVAL:28,EIO:29,EMFILE:34,ENOENT:44,ENOTSUP:58,EPERM:63,ESPIPE:70,ENOTCAPABLE:76},k={fd_datasync:1,fd_read:2,fd_seek:4,fd_fdstat_set_flags:8,fd_sync:16,fd_tell:32,fd_write:64,fd_advise:128,fd_allocate:256,path_create_directory:512,path_create_file:1024,path_open:8192,fd_readdir:16384,path_filestat_get:1<<18,path_filestat_set_size:1<<19,path_filestat_set_times:1<<20,fd_filestat_get:1<<21,fd_filestat_set_size:1<<22,fd_filestat_set_times:1<<23,path_remove_directory:1<<25,path_unlink_file:1<<26},Z={stdin:0,stdout:1,stderr:2,root:-1,min:15728640,max:16777215},gt=globalThis[Symbol.for("ZIGAR")]??={};function In(e){return gt[e]??=Symbol(e)}function I(e){return In(e)}const g=I("memory"),x=I("slots"),wt=I("parent"),C=I("zig"),ct=I("name"),Ee=I("type"),Jt=I("flags"),Ze=I("class"),_t=I("tag"),xe=I("props"),ye=I("sentinel"),X=I("target"),ue=I("entries"),Pe=I("max length"),dt=I("keys"),Gt=I("address"),Se=I("length"),_e=I("last address"),Ue=I("last length"),qe=I("cache"),St=I("size"),En=I("bit size"),ee=I("align"),Y=I("environment"),Tn=I("attributes"),vn=I("primitive"),$e=I("setters"),pe=I("typed array"),qt=I("throwing"),Yt=I("promise"),xn=I("generator"),At=I("allocator"),yt=I("signature"),Be=I("controller"),tt=I("proxy type"),Ye=I("read only"),Le=I("no cache"),me=I("update"),B=I("restore"),Mn=I("reset"),ce=I("vivificate"),_=I("visit"),ze=I("shape"),q=I("initialize"),On=I("restrict"),oe=I("finalize"),nt=I("proxy"),Ne=I("cast"),he=I("return"),Vn=I("yield"),we=I("transform");function H(e,t,n){if(n){const{set:s,get:i,value:r,enumerable:c,configurable:o=!0,writable:l=!0}=n;Object.defineProperty(e,t,i||s?{get:i,set:s,configurable:o,enumerable:c}:{value:r,configurable:o,enumerable:c,writable:l})}return e}function fe(e,t){for(const[n,s]of Object.entries(t))H(e,n,s);for(const n of Object.getOwnPropertySymbols(t)){const s=t[n];H(e,n,s)}return e}function b(e){return e!==void 0?{value:e}:void 0}function It(e){return e?.error==="return"?t=>{try{return t()}catch(n){return n}}:t=>t()}function Xt({type:e,bitSize:t}){switch(e){case N.Bool:return"boolean";case N.Int:case N.Uint:if(t>32)return"bigint";case N.Float:return"number"}}function Et(e,t="utf-8"){const n=Pn[t]||=new TextDecoder(t);let s;if(Array.isArray(e))if(e.length===1)s=e[0];else{let i=0;for(const o of e)i+=o.length;const{constructor:r}=e[0];s=new r(i);let c=0;for(const o of e)s.set(o,c),c+=o.length}else s=e;return s.buffer[Symbol.toStringTag]==="SharedArrayBuffer"&&(s=new s.constructor(s)),n.decode(s)}function Kt(e,t="utf-8"){switch(t){case"utf-16":{const{length:n}=e,s=new Uint16Array(n);for(let i=0;i<n;i++)s[i]=e.charCodeAt(i);return s}default:return(_n[t]||=new TextEncoder).encode(e)}}function kn(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=String.fromCharCode.apply(null,t);return btoa(n)}function Cn(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<n.byteLength;s++)n[s]=t.charCodeAt(s);return new DataView(n.buffer)}const Pn={},_n={};function Qt(e,t,n){let s=0,i=e.length;if(i===0)return 0;for(;s<i;){const r=Math.floor((s+i)/2);n(e[r])<=t?s=r+1:i=r}return i}function zn(e,t){return t?!!(e&t-1):!1}function $n(e,t){return e+(t-1)&~(t-1)}const Ln=0,Xe=4294967295,Fe=-1;function en(e){return Number(e)}BigInt(Number.MAX_SAFE_INTEGER);BigInt(Number.MIN_SAFE_INTEGER);function Nn(e){return e===2863311530||e===-1431655766}function ge(e,t){return e+t}function tn(e){if(typeof e.length=="number")return e;const t=e[Symbol.iterator](),n=t.next(),s=n.value?.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let i;for(;!(i=t.next()).done;)yield i.value}(),{length:s});{const i=[];let r=n;for(;!r.done;)i.push(r.value),r=t.next();return i}}function nn(e,t){const{constructor:n}=e;if(n===t)return 1;if(n.child===t)return e.length}function sn(e,t){return e===t||e?.[yt]===t[yt]&&e?.[Y]!==t?.[Y]}function le(e,t){return e instanceof t||sn(e?.constructor,t)}function Tt(e){return typeof e?.then=="function"}function De({get:e,set:t}){return e.special=t.special=!0,{get:e,set:t}}function te(e,t,n=0){const s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);s.set(i,n)}function rn(e,t=0,n=e.byteLength-t){new Uint8Array(e.buffer,e.byteOffset,e.byteLength).fill(0,t,t+n)}const Fn=Object.hasOwn(ArrayBuffer.prototype,"detached")?function(e){return e.detached}:function(e){return e.byteLength===0};function ne(e,t){const n=e[B](),s=t[B]();te(n,s)}function st(){return this}function Rn(){return String(this)}function Ke(){}class jn{map=new WeakMap;find(t){return t[Le]?void 0:this.map.get(t)}save(t,n){t[Le]||this.map.set(t,n)}}const Qe={name:"",mixins:[]};function A(e){return Qe.mixins.includes(e)||Qe.mixins.push(e),e}function Dn(){return Hn(Qe.name,Qe.mixins)}function Hn(e,t){const n=[],s=function(){for(const r of n)r.call(this)},{prototype:i}=s;H(s,"name",b(e));for(const r of t)for(let[c,o]of Object.entries(r))if(c==="init")n.push(o);else{if(typeof o!="function"){let l=i[c];if(l!==void 0){if(l?.constructor===Object)o=Object.assign({...l},o);else if(l!==o)throw new Error(`Duplicate property: ${c}`)}}H(i,c,b(o))}return s}function Xs(){const e=Dn();return new e}A({init(){this.accessorCache=new Map},getAccessor(e,t){const{type:n,bitSize:s,bitOffset:i,byteSize:r}=t,c=[],o=r===void 0&&(s&7||i&7);o&&c.push("Unaligned");let l=Zt[n];s>32&&(n===N.Int||n===N.Uint)&&(s<=64?l=`Big${l}`:l=`Jumbo${l}`),c.push(l,`${n===N.Bool&&r?r<<3:s}`),o&&c.push(`@${i}`);const a=e+c.join("");let f=this.accessorCache.get(a);if(f)return f;if(f=DataView.prototype[a],!f){for(;c.length>0;){const u=`getAccessor${c.join("")}`;if(f=this[u]?.(e,t))break;c.pop()}if(!f)throw new Error(`No accessor available: ${a}`)}return f.name||H(f,"name",b(a)),this.accessorCache.set(a,f),f}});A({getAccessorBool(e,t){const{byteSize:n}=t,s=n*8,i=this.getAccessor(e,{type:N.Uint,bitSize:s,byteSize:n});if(e==="get")return function(r,c){return!!i.call(this,r,c)};{const r=s<=32?0:0n,c=s<=32?1:1n;return function(o,l,a){i.call(this,o,l?c:r,a)}}}});A({getAccessorUint(e,t){const{bitSize:n,byteSize:s}=t;if(s){const i=this.getAccessor(e,{...t,bitSize:s*8}),r=2**n-1;return e==="get"?function(c,o){return i.call(this,c,o)&r}:function(c,o,l){const a=o&r;i.call(this,c,a,l)}}}});class Un extends SyntaxError{constructor(t){super(`Cannot convert ${t} to an Int`)}}class pt extends TypeError{errno=j.ENOTSUP;constructor(){super("Unsupported")}}class on extends TypeError{constructor(t){const{name:n}=t;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class cn extends TypeError{constructor(t,n,s=null){const{name:i,type:r,byteSize:c}=t,o=n.byteLength,l=c!==1?"s":"";let a;if(r===T.Slice&&!s)a=`${i} has elements that are ${c} byte${l} in length, received ${o}`;else{const f=r===T.Slice?s.length*c:c;a=`${i} has ${f} byte${l}, received ${o}`}super(a)}}class Bn extends TypeError{constructor(t){const{type:n,byteSize:s,typedArray:i}=t,r=s!==1?"s":"",c=["ArrayBuffer","DataView"].map(Me);i&&c.push(Me(i.name));let o;n===T.Slice?o=`Expecting ${mt(c)} that can accommodate items ${s} byte${r} in length`:o=`Expecting ${mt(c)} that is ${s} byte${r} in length`,super(o)}}class Wn extends TypeError{constructor(t,n){const{name:s}=t;let i;typeof n=="number"||typeof n=="bigint"?i=`Value given does not correspond to an item of enum ${s}: ${n}`:i=`Enum item of the type ${s} expected, received ${n}`,super(i)}}class Zn extends TypeError{constructor(t,n){const{name:s}=t,i=typeof n;let r;i==="string"||i==="number"||Re(n)?(Re(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),r=`Error ${i} does not corresponds to any error in error set ${s}: ${n}`):r=`Error of the type ${s} expected, received ${n}`,super(r)}}class ln extends TypeError{constructor(t,n){const{name:s}=t;super(`Error given is not a part of error set ${s}: ${n}`)}}class Ie extends TypeError{constructor(t,n,s){const{name:i}=t,r=[];if(Array.isArray(n))for(const o of n)r.push(Me(o));else r.push(Me(n));const c=un(s);super(`${i} expects ${mt(r)} as argument, received ${c}`)}}class Ae extends Ie{constructor(t,n,s=!1){const{instance:{members:[i]},type:r,constructor:c}=t,o=[],l=Xt(i);if(l){let a;switch(i.structure?.type){case T.Enum:a="enum item";break;case T.ErrorSet:a="error";break;default:a=l}o.push(`array of ${a}s`)}else o.push("array of objects");c[pe]&&o.push(c[pe].name),r===T.Slice&&s&&o.push("length"),super(t,o.join(" or "),n)}}class it extends TypeError{constructor(t,n,s){const{name:i,length:r,instance:{members:[c]}}=t,{structure:{constructor:o}}=c,{length:l,constructor:a}=s,f=n?.length??r,u=f!==1?"s":"";let h;a===o?h="only a single one":a.child===o?h=`a slice/array that has ${l}`:h=`${l} initializer${l>1?"s":""}`,super(`${i} has ${f} element${u}, received ${h}`)}}class zt extends TypeError{constructor(t,n){t<0?super("Length of slice cannot be negative"):super(`Length of slice can be ${n} or less, received ${t}`)}}class Jn extends TypeError{constructor(t,n){const{name:s}=t;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class Gn extends TypeError{constructor(t,n){const{name:s,instance:{members:i}}=t,r=i.find(o=>o.name===n);let c;r?c=`Comptime value cannot be changed: ${n}`:c=`${s} does not have a property with that name: ${n}`,super(c)}}class qn extends Error{constructor(t,n,s=!1){super();const i=r=>{t-=r,n-=r;const c=t!==1?"s":"",o=s?"at least ":"";this.message=`Expecting ${o}${t} argument${c}, received ${n}`,this.stack=vt(this.stack,"new Arg(")};i(0),H(this,me,{value:i,enumerable:!1})}}class Yn extends Error{constructor(){super("Undefined argument")}}class Xn extends TypeError{constructor(){super("Non-slice pointers can only be created with the help of the new operator")}}class Kn extends TypeError{constructor(){super("Casting to function is not allowed")}}class Qn extends TypeError{constructor(t,n){const{name:s}=t,{constructor:{name:i}}=n;super(`Conversion of ${i} to ${s} requires an explicit cast`)}}class $t extends TypeError{constructor(t,n,s,i){const{name:r}=t;super(`${r} expects the sentinel value ${n} at ${i-1}, found at ${s}`)}}class lt extends TypeError{constructor(t,n,s){const{name:i}=t;super(`${i} expects the sentinel value ${n} at ${s-1}`)}}class es extends TypeError{constructor(t,n){super(`Unable to simultaneously align memory to ${n}-byte and ${t}-byte boundary`)}}class se extends TypeError{constructor(t,n){const s=un(n);super(`Expected ${Me(t)}, received ${s}`)}}class ts extends TypeError{constructor(t,n){const s=[];t&k.fd_read&&s.push("ReadableStreamDefaultReader","ReadableStreamBYOBReader","Blob","Uint8Array"),t&k.fd_write&&s.push("WritableStreamDefaultWriter","array","null"),t&k.fd_readdir&&s.push("Map");const i=s.join(", ");super(`Expected ${i}, or an object with the appropriate stream interface, received ${n}`)}}class ns extends TypeError{constructor(){super("Null pointer")}}class an extends TypeError{constructor(t){super(`Object has been freed already: ${t.constructor.name}`)}}class Lt extends TypeError{constructor(t,n){const{name:s}=t;let i;if(n!=null){const r=n instanceof Object&&n.constructor!==Object?`${n.constructor.name} object`:typeof n;i=`${hn(r)} ${r}`}else i=n+"";super(`${s} cannot point to ${i}`)}}class fn extends TypeError{constructor(){super("Pointers in Zig memory cannot point to garbage-collected object")}}class ss extends RangeError{constructor(t,n){const{name:s}=t;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Nt extends TypeError{constructor(t){const{name:n}=t,s=n!==void 0?`Property ${n}`:"Element";super(`${s} can only be undefined`)}}class is extends TypeError{constructor(t){const{name:n,structure:{name:s}}=t;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class rs extends TypeError{constructor(){super("Unable to modify read-only object")}}class os extends TypeError{constructor(t){const{name:n}=t;super(`${n} cannot point to a read-only object`)}}class cs extends TypeError{constructor(){super("Unexpected async generator")}}class ls extends Error{errno=j.EBADF;constructor(){super("Invalid file descriptor")}}class as extends Error{errno=j.EMFILE;constructor(){super("Too many open files")}}class fs extends Error{errno=j.EDEADLK;constructor(){super("Deadlock")}}class Je extends Error{constructor(t,n=0){if(t instanceof Error)return super(t.message),t.stack=vt(this.stack,n),t;super(t??"Error encountered in Zig code")}}class us extends Je{constructor(t){super("Program exited"),this.code=t}}function hs(e,t){const n=s=>{t-=s,e.message=`args[${t}]: ${e.message}`,e.stack=vt(e.stack,"new Arg(")};return n(0),H(e,me,{value:n,enumerable:!1}),e}function vt(e,t){if(typeof e=="string"){const n=e.split(`
`),s=n.findIndex(i=>i.includes(t));s!==-1&&(n.splice(1,s),e=n.join(`
`))}return e}function ie(){throw new rs}function ds(e){let t=e.replace(/_/g," ");try{t=t.replace(new RegExp("(\\p{Uppercase}+)(\\p{Lowercase}*)","gu"),(n,s,i)=>s.length===1?` ${s.toLocaleLowerCase()}${i}`:i?n:` ${s}`).trimStart()}catch{}return t.charAt(0).toLocaleUpperCase()+t.substring(1)}function ys(e=!1,t,n,s,i){const r=o=>{let l;return i?l=i(o):o.errno!==j.EAGAIN&&o.errno!==j.ENOTSUP&&console.error(o),l??o.errno??t},c=o=>s?.(o)??j.NONE;try{const o=n();if(Tt(o)){if(!e)throw new fs;return o.then(c).catch(r)}else return c(o)}catch(o){return r(o)}}function Re(e){return typeof e=="object"&&typeof e.error=="string"&&Object.keys(e).length===1}function un(e){const t=typeof e;let n;return t==="object"?n=e?Object.prototype.toString.call(e):"null":n=t,Me(n)}function Me(e){return`${hn(e)} ${e}`}function hn(e){return/^\W*[aeiou]/i.test(e)?"an":"a"}function mt(e,t="or"){const n=` ${t} `;return e.length>2?e.slice(0,-1).join(", ")+n+e[e.length-1]:e.join(n)}A({defineAlloc(){return{value(e,t=1){const n=Math.clz32(t);if(t!==1<<31-n)throw new Error(`Invalid alignment: ${t}`);const s=31-n,{vtable:{alloc:i},ptr:r}=this,c=i(r,e,s,0);if(!c)throw new Error("Out of memory");c.length=e;const o=c["*"][g];return o[C].align=t,o}}},defineFree(){const e=this;return{value(t){const{dv:n,align:s}=Ft(t),i=n?.[C];if(!i)throw new se("object containing allocated Zig memory",t);const{address:r}=i;if(r===Fe)throw new an(t);const{vtable:{free:c},ptr:o}=this,l=31-Math.clz32(s);c(o,n,l,0),e.releaseZigView(n)}}},defineDupe(){return{value(e){const{dv:t,align:n,constructor:s}=Ft(e);if(!t)throw new se("string, DataView, typed array, or Zig object",e);const i=this.alloc(t.byteLength,n);return te(i,t),s?s(i):i}}}});function Ft(e){let t,n=1,s=null;if(e instanceof DataView){t=e;const i=t?.[C]?.align;i&&(n=i)}else if(e instanceof ArrayBuffer)t=new DataView(e);else if(e)if(e[g])e.constructor[Ee]===T.Pointer&&(e=e["*"]),t=e[g],s=e.constructor,n=s[ee];else{typeof e=="string"&&(e=Kt(e));const{buffer:i,byteOffset:r,byteLength:c,BYTES_PER_ELEMENT:o}=e;i&&r!==void 0&&c!==void 0&&(t=new DataView(i,r,c),n=o)}return{dv:t,align:n,constructor:s}}const ps=["log","mkdir","stat","set_times","open","rmdir","unlink"];A({init(){this.variables=[],this.listenerMap=new Map,this.envVariables=this.envVarArrays=null},getSpecialExports(){const e=t=>{if(t===void 0)throw new Error("Not a Zig type");return t};return{init:()=>this.initPromise,abandon:()=>this.abandonModule?.(),redirect:(t,n)=>this.redirectStream(t,n),sizeOf:t=>e(t?.[St]),alignOf:t=>e(t?.[ee]),typeOf:t=>ms[e(t?.[Ee])],on:(t,n)=>this.addListener(t,n),set:(t,n)=>this.setObject(t,n)}},addListener(e,t){if(ps.indexOf(e)>=0){if(!this.ioRedirection)throw new Error("Redirection disabled");this.listenerMap.set(e,t)}else throw new Error(`Unknown event: ${e}`)},hasListener(e){return this.listenerMap.get(e)},setObject(e,t){if(typeof t!="object")throw new se("object",t);if(e==="wasi")this.setCustomWASI(t);else if(e==="env")this.envVariables=t,this.libc&&this.initializeLibc();else throw new Error(`Unknown object: ${e}`)},triggerEvent(e,t){return this.listenerMap.get(e)?.(t)},recreateStructures(e,t){Object.assign(this,t);const n=(o,l)=>{for(const[a,f]of Object.entries(l))o[a]=r(f);return o},s=[],i=o=>o.length?o.buffer:new ArrayBuffer(0),r=o=>{const{memory:l,structure:a,actual:f,slots:u}=o;if(l){if(f)return f;{const{array:h,offset:y,length:p}=l,d=this.obtainView(i(h),y,p),{handle:S}=o,{constructor:w}=a,v=w.call(Y,d);return u&&n(v[x],u),S!==void 0?this.variables.push({handle:S,object:v}):y===void 0&&s.push(v),o.actual=v,v}}else return a},c=new Map;for(const o of e){for(const l of[o.instance,o.static])if(l.template){const{slots:a,memory:f,handle:u}=l.template,h=l.template={};if(f){const{array:y,offset:p,length:d}=f;h[g]=this.obtainView(i(y),p,d),u!==void 0&&this.variables.push({handle:u,object:h})}if(a){const y=h[x]={};c.set(y,a)}}this.defineStructure(o)}for(const[o,l]of c)n(o,l);for(const o of e)this.finalizeStructure(o);for(const o of s)this.makeReadOnly(o)},imports:{initializeLibc:{argType:"ii"}}});const ms=Ge.map(e=>e.replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase());A({init(){this.jsFunctionThunkMap=new Map,this.jsFunctionCallerMap=new Map,this.jsFunctionControllerMap=new Map,this.jsFunctionIdMap=new WeakMap,this.jsFunctionNextId=1},getFunctionId(e){let t=this.jsFunctionIdMap.get(e);return t===void 0&&(t=this.jsFunctionNextId++,this.jsFunctionIdMap.set(e,t)),t},getFunctionThunk(e,t){const n=this.getFunctionId(e);let s=this.jsFunctionThunkMap.get(n);if(s===void 0){const i=this.getViewAddress(t[g]),r=this.createJsThunk(i,n);if(!r)throw new Error("Unable to create function thunk");s=this.obtainZigView(r,0),this.jsFunctionThunkMap.set(n,s),this.jsFunctionControllerMap.set(n,t)}return s},createInboundCaller(e,t){const n=(i,r)=>{try{const c=t(i);if(_ in c){c[_]("reset",P.IgnoreUncreated);const f=this.startContext();this.updatePointerTargets(f,c,!0),this.updateShadowTargets(f),this.endContext()}const o=[...c],l=c.hasOwnProperty(he),a=ys(r||l,j.EFAULT,()=>e(...o),f=>{if(f?.[Symbol.asyncIterator]){if(!c.hasOwnProperty(Vn))throw new cs;this.pipeContents(f,c)}else c[he](f)},f=>{try{if(t[qt]&&f instanceof Error)return c[he](f),j.NONE;throw f}catch{console.error(f)}});return l?j.NONE:a}catch(c){return console.error(c),j.EFAULT}},s=this.getFunctionId(e);return this.jsFunctionCallerMap.set(s,n),function(...i){return e(...i)}},defineArgIterator(e){const t=this,n=e.filter(({structure:s})=>s.type===T.Struct&&s.purpose===U.Allocator).length;return{value(){let s,i=0,r=0,c=0;const o=[];for(const[l,{structure:a,type:f}]of e.entries())try{let u=this[l];f===N.Object&&u?.[g]?.[C]&&(u=new u.constructor(u));let h,y;if(a.type===T.Struct)switch(a.purpose){case U.Allocator:h=n===1?"allocator":`allocator${++i}`,y=this[At]=u;break;case U.Promise:h="callback",++r===1&&(y=t.createPromiseCallback(this,u));break;case U.Generator:h="callback",++r===1&&(y=t.createGeneratorCallback(this,u));break;case U.AbortSignal:h="signal",++c===1&&(y=t.createInboundSignal(u));break}h!==void 0?y!==void 0&&(s||={},s[h]=y):o.push(u)}catch(u){o.push(u)}return s&&o.push(s),o[Symbol.iterator]()}}},handleJscall(e,t,n,s){const i=this.obtainZigView(t,n,!1),r=this.jsFunctionCallerMap.get(e);return r?r(i,s):j.EFAULT},releaseFunction(e){const t=this.jsFunctionThunkMap.get(e),n=this.jsFunctionControllerMap.get(e);if(t&&n){const s=this.getViewAddress(n[g]),i=this.getViewAddress(t);this.destroyJsThunk(s,i),this.releaseZigView(t),e&&(this.jsFunctionThunkMap.delete(e),this.jsFunctionCallerMap.delete(e),this.jsFunctionControllerMap.delete(e))}},freeFunction(e){this.releaseFunction(this.getFunctionId(e))},exports:{handleJscall:{argType:"iiib",returnType:"i"},releaseFunction:{argType:"i"}},imports:{createJsThunk:{argType:"ii",returnType:"i"},destroyJsThunk:{argType:"ii",returnType:"i"},finalizeAsyncCall:{argType:"ii"}}});A({createOutboundCaller(e,t){const n=this,s=function(...i){if(!n.runThunk)return n.initPromise.then(()=>s(...i));const r=new t(i,this?.[At]);try{return n.invokeThunk(e,s,r)}catch(c){if(c instanceof us&&c.code===0)return;throw c}};return s},copyArguments(e,t,n,s,i){let r=0,c=0,o=0;const l=e[$e];for(const{type:a,structure:f}of n){let u,h,y,p;if(f.type===T.Struct)switch(f.purpose){case U.Allocator:u=(++o===1?s?.allocator??s?.allocator1:s?.[`allocator${o}`])??this.createDefaultAllocator(e,f);break;case U.Promise:h||=this.createPromise(f,e,s?.callback),u=h;break;case U.Generator:y||=this.createGenerator(f,e,s?.callback),u=y;break;case U.AbortSignal:p||=this.createSignal(f,s?.signal),u=p;break;case U.Reader:u=this.createReader(t[c++]);break;case U.Writer:u=this.createWriter(t[c++]);break;case U.File:u=this.createFile(t[c++]);break;case U.Directory:u=this.createDirectory(t[c++]);break}if(u===void 0&&(u=t[c++],u===void 0&&a!==N.Void))throw new Yn;try{l[r++].call(e,u,i)}catch(d){throw hs(d,r-1)}}},invokeThunk(e,t,n){const s=this.startContext(),i=n[Tn],r=this.getViewAddress(e[g]),c=this.getViewAddress(t[g]),o=oe in n,l=_ in n;l&&this.updatePointerAddresses(s,n);const a=this.getShadowAddress(s,n,null,!1),f=i?this.getShadowAddress(s,i):0;this.updateShadows(s);let u=!1;const h=()=>{this.updateShadowTargets(s),l&&this.updatePointerTargets(s,n),this.flushStreams?.(),this.endContext(),u=!0};if(o&&(n[oe]=h),!(i?this.runVariadicThunk(r,c,a,f,i.length):this.runThunk(r,c,a)))throw u||h(),new Je;u||n[me]?.(this.findShadowView(n[g]));const p=t[we];if(o){let d=null;if(!u)try{d=n.retval}catch(S){d=new Je(S,1)}return d!=null?(p&&(d=p(d)),n[he](d)):p&&(n[we]=p),n[Yt]??n[xn]}else{h();try{const{retval:d}=n;return p?p(d):d}catch(d){throw new Je(d,1)}}},imports:{runThunk:{argType:"iii",returnType:"b"},runVariadicThunk:{argType:"iiiii",returnType:"b"}}});A({addIntConversion(e){return function(t,n){const s=e.call(this,t,n),{flags:i,bitSize:r}=n;if(t==="set")return r>32?function(c,o,l){s.call(this,c,BigInt(o),l)}:function(c,o,l){const a=Number(o);if(!isFinite(a))throw new Un(o);s.call(this,c,a,l)};{const{flags:c}=n.structure;if(c&Wt.IsSize&&r>32){const o=BigInt(Number.MAX_SAFE_INTEGER),l=BigInt(Number.MIN_SAFE_INTEGER);return function(a,f){const u=s.call(this,a,f);return l<=u&&u<=o?Number(u):u}}}return s}}});A({init(){this.isMemoryMapping=!0,this.memoryList=[],this.contextCount=0},startContext(){return++this.contextCount,{shadowList:[]}},endContext(){if(--this.contextCount===0){for(const{shadowDV:e}of this.memoryList)e&&this.freeShadowMemory(e);this.memoryList.splice(0)}},getShadowAddress(e,t,n,s){const i=t[g];if(n){if(n.address===void 0){const{start:r,end:c,targets:o}=n;let l=0,a;for(const M of o){const E=M[g],W=E.byteOffset,J=M.constructor[ee]??E[ee];(l===void 0||J>l)&&(l=J,a=W)}const f=c-r,u=this.allocateShadowMemory(f+l,1),h=this.getViewAddress(u),y=$n(ge(h,a-r),l),p=ge(y,r-a);for(const M of o){const E=M[g],W=E.byteOffset;if(W!==a){const J=M.constructor[ee]??E[ee];if(zn(ge(p,W-r),J))throw new es(J,l)}}const d=u.byteOffset+Number(p-h),S=new DataView(u.buffer,d,f);S[C]={address:p,len:f,align:1,unalignedAddress:h,type:bs.Scratch};const w=new DataView(i.buffer,Number(r),f),v=this.registerMemory(p,f,1,s,w,S);e.shadowList.push(v),n.address=p}return ge(n.address,i.byteOffset-n.start)}else{const r=t.constructor[ee]??i[ee],c=i.byteLength,o=this.allocateShadowMemory(c,r),l=this.getViewAddress(o),a=this.registerMemory(l,c,1,s,i,o);return e.shadowList.push(a),l}},updateShadows(e){for(let{targetDV:t,shadowDV:n}of e.shadowList)n=this.restoreView(n),te(n,t)},updateShadowTargets(e){for(let{targetDV:t,shadowDV:n,writable:s}of e.shadowList)s&&(n=this.restoreView(n),te(t,n))},registerMemory(e,t,n,s,i,r){const c=at(this.memoryList,e);let o=this.memoryList[c-1];return o?.address===e&&o.len===t?o.writable||=s:(o={address:e,len:t,align:n,writable:s,targetDV:i,shadowDV:r},this.memoryList.splice(c,0,o)),o},unregisterMemory(e,t){const n=at(this.memoryList,e),s=this.memoryList[n-1];if(s?.address===e&&s.len===t)return this.memoryList.splice(n-1,1),s},findMemory(e,t,n,s){let i=n*(s??0);const r=at(this.memoryList,t),c=this.memoryList[r-1];let o;if(c?.address===t&&c.len===i)o=c.targetDV;else if(c?.address<=t&&ge(t,i)<=ge(c.address,c.len)){const l=Number(t-c.address),a=s===void 0,{targetDV:f}=c;a&&(i=f.byteLength-l),o=this.obtainView(f.buffer,f.byteOffset+l,i),a&&(o[ee]=c.align)}if(!o)o=this.obtainZigView(t,i);else{let{targetDV:l,shadowDV:a}=c;a&&e&&!e.shadowList.includes(c)&&(a=this.restoreView(a),te(l,a))}return o},findShadowView(e){for(const{shadowDV:t,targetDV:n}of this.memoryList)if(n===e)return t},releaseZigView(e){const t=e[C],n=t?.address;n&&n!==Fe&&(t.address=Fe)},getViewAddress(e){const t=e[C];if(t)return t.address;{const n=this.getBufferAddress(e.buffer);return ge(n,e.byteOffset)}},imports:{allocateScratchMemory:{argType:"ii",returnType:"i"},freeScratchMemory:{argType:"iii"}},exports:{getViewAddress:{argType:"v",returnType:"i"}},usizeMaxBuffer:new ArrayBuffer(0),allocateShadowMemory(e,t){const n=e?this.allocateScratchMemory(e,t):0;if(!n&&e)throw new Error("Out of memory");const s=this.obtainZigView(n,e),i=s?.[C];return i&&(i.align=t),s},freeShadowMemory(e){const{address:t,unalignedAddress:n,len:s,align:i}=e[C];s&&this.freeScratchMemory(n??t,s,i),this.releaseZigView(e)},obtainZigView(e,t,n=!0){if(Nn(e)&&(e=t>0?0:Xe),!e&&t)return null;let{buffer:s}=this.memory;return e===Xe&&(s=this.usizeMaxBuffer,e=Ln,t=0),this.obtainView(s,e,t,n)},getTargetAddress(e,t,n,s){const i=t[g];return i[C]?this.getViewAddress(i):i.byteLength===0?0:this.getShadowAddress(e,t,n,s)},getBufferAddress(e){return 0}});function at(e,t){return Qt(e,t,n=>n.address)}const bs={Scratch:1};A({init(){this.abandoned=!1,this.destructors=[],this.nextValueIndex=1,this.valueMap=new Map,this.valueIndices=new Map,this.options=null,this.executable=null,this.instance=null,this.memory=null,this.table=null,this.initialTableLength=0,this.exportedFunctions=null,this.customWASI=null},abandonModule(){if(!this.abandoned){for(const e of this.destructors.reverse())e();this.abandoned=!0}},imports:{initialize:{argType:""}},exports:{displayPanic:{argType:"ii"}},getObjectIndex(e){if(e!=null){let t=this.valueIndices.get(e);return t===void 0&&(t=this.nextValueIndex++,this.valueIndices.set(e,t),this.valueMap.set(t,e)),t}else return 0},fromWebAssembly(e,t){switch(e){case"v":case"s":return this.valueMap.get(t);case"i":return t;case"b":return!!t}},toWebAssembly(e,t){switch(e){case"v":case"s":return this.getObjectIndex(t);case"i":return t;case"b":return t?1:0}},exportFunction(e,t="",n="",s){return e?(...i)=>{i=i.map((o,l)=>this.fromWebAssembly(t.charAt(l),o));const r=e.apply(this,i);return this.toWebAssembly(n,r)}:()=>{}},importFunction(e,t="",n=""){return(...s)=>{s=s.map((r,c)=>this.toWebAssembly(t.charAt(c),r));const i=e.apply(this,s);return this.fromWebAssembly(n,i)}},exportFunctions(){const e={};for(const[t,{argType:n,returnType:s,alias:i}]of Object.entries(this.exports)){const r=this[i??t];r&&(e[`_${t}`]=this.exportFunction(r,n,s,t))}return e},importFunctions(e){for(const[t,{argType:n,returnType:s}]of Object.entries(this.imports)){const i=e[t];i&&(H(this,t,b(this.importFunction(i,n,s))),this.destructors.push(()=>this[t]=gs))}},async instantiateWebAssembly(e,t){const{memoryInitial:n,memoryMax:s,tableInitial:i,multithreaded:r}=this.options=t,c=await e,o=c[Symbol.toStringTag]==="Response"?"Streaming":"",l=WebAssembly,a=l["compile"+o],f=this.executable=await a(c),u=this.exportFunctions(),h={},y={},p={},d=this.exportedModules={env:h,wasi:y,wasi_snapshot_preview1:p};for(const{module:S,name:w,kind:v}of l.Module.imports(f))v==="function"&&(S==="env"?h[w]=u[w]??Ke:S==="wasi_snapshot_preview1"?p[w]=this.getWASIHandler(w):S==="wasi"&&(y[w]=this.getThreadHandler?.(w)??Ke));return this.memory=h.memory=new l.Memory({initial:n,maximum:s,shared:r}),this.table=h.__indirect_function_table=new l.Table({initial:i,element:"anyfunc",shared:r}),this.initialTableLength=i,l.instantiate(f,d)},loadModule(e,t){return this.initPromise=(async()=>{const n=this.instance=await this.instantiateWebAssembly(e,t);this.importFunctions(n.exports),this.initializeCustomWASI(),this.initialize()})()},getWASIHandler(e){const t=e.replace(/_./g,i=>i.charAt(1).toUpperCase()),n=this[t]?.bind?.(this),s=this[t+"Event"];return(...i)=>{const r=n?.(...i)??j.ENOTSUP,c=o=>{if(o===j.ENOTSUP||o===j.ENOTCAPABLE){if(o===j.ENOTSUP){const l=this.customWASI?.wasiImport?.[e];if(l)return l(...i)}return s&&console.error(`WASI method '${e}' requires the handling of the '${s}' event`),j.ENOTSUP}return o};return Tt(r)?r.then(c):c(r)}},setCustomWASI(e){this.customWASI=e,this.instance&&this.initializeCustomWASI()},initializeCustomWASI(){const e=this.customWASI;if(e){const t={...this.instance.exports,memory:this.memory},n=new Proxy(this.instance,{get(s,i){return i==="exports"?t:s[i]}});e.initialize?.(n)}},displayPanic(e,t){const n=new Uint8Array(this.memory.buffer,e,t),s=Et(n);console.error(`Zig panic: ${s}`)}});const gs=()=>{throw new Error("Module was abandoned")};A({linkVariables(e){if(!this.memory){this.initPromise=this.initPromise.then(()=>this.linkVariables(e));return}for(const{object:t,handle:n}of this.variables){const s=t[g],i=n;let r=t[g]=this.obtainZigView(i,s.byteLength);e&&te(r,s),t.constructor[qe]?.save?.(r,t),this.destructors.push(()=>{r=this.restoreView(t[g]);const o=t[g]=this.allocateMemory(r.byteLength);te(o,r)});const c=o=>{const l=o[x];if(l){const a=r.byteOffset;for(const f of Object.values(l))if(f){const u=f[g];if(u.buffer===s.buffer){const h=a+u.byteOffset-s.byteOffset;f[g]=this.obtainView(r.buffer,h,u.byteLength),f.constructor[qe]?.save?.(r,f),c(f)}}}};c(t),t[_]?.(function(){this[me]()},P.IgnoreInactive)}this.createDeferredThunks?.()},imports:{recreateAddress:{argType:"i",returnType:"i"}}});A({updatePointerAddresses(e,t){const n=new Map,s=new Map,i=[],r=function(a){if(n.get(this)===void 0){const f=this[x][0];if(f){const u=!this.constructor.const,h={target:f,writable:u},y=f[g];if(y[C])n.set(this,null);else{n.set(this,f);const p=s.get(y.buffer);if(p){const d=Array.isArray(p)?p:[p],S=Qt(d,y.byteOffset,w=>w.target[g].byteOffset);d.splice(S,0,h),Array.isArray(p)||(s.set(y.buffer,d),i.push(d))}else s.set(y.buffer,h);f[_]?.(r,0)}}}},c=P.IgnoreRetval|P.IgnoreInactive;t[_](r,c);const o=this.findTargetClusters(i),l=new Map;for(const a of o)for(const f of a.targets)l.set(f,a);for(const[a,f]of n)if(f){const u=l.get(f),h=u?.writable??!a.constructor.const;a[Gt]=this.getTargetAddress(e,f,u,h),Se in a&&(a[Se]=f.length)}},updatePointerTargets(e,t,n=!1){const s=new Map,i=function(c){if(!s.get(this)){s.set(this,!0);const o=this[x][0],l=!o||!(c&P.IsImmutable)?this[me](e,!0,!(c&P.IsInactive)):o,a=this.constructor.const?P.IsImmutable:0;a&P.IsImmutable||o&&!o[g][C]&&o[_]?.(i,a),l!==o&&l&&!l[g][C]&&l?.[_]?.(i,a)}},r=n?P.IgnoreRetval:0;t[_](i,r)},findTargetClusters(e){const t=[];for(const n of e){let s=null,i=0,r=0,c=null;for(const{target:o,writable:l}of n){const a=o[g],{byteOffset:f,byteLength:u}=a,h=f+u;let y=!0;s&&(r>f?(c?c.writable||=l:(c={targets:[s],start:i,end:r,address:void 0,misaligned:void 0,writable:l},t.push(c)),c.targets.push(o),h>r?c.end=h:y=!1):c=null),y&&(s=o,i=f,r=h)}}return t}});const ws=[k.fd_read,0],ft=[k.fd_write,0],Rt=k.fd_seek|k.fd_fdstat_set_flags|k.fd_tell|k.path_create_directory|k.path_create_file|k.path_open|k.fd_readdir|k.path_filestat_get|k.path_filestat_set_size|k.path_filestat_set_times|k.fd_filestat_get|k.fd_filestat_set_times|k.path_remove_directory|k.path_unlink_file,jt=k.fd_datasync|k.fd_read|k.fd_seek|k.fd_sync|k.fd_tell|k.fd_write|k.fd_advise|k.fd_allocate|k.fd_filestat_get|k.fd_filestat_set_times|k.fd_filestat_set_size;A({init(){const e={cookie:0n,readdir(){const t=Number(this.cookie);let n=null;switch(t){case 0:case 1:n={name:".".repeat(t+1),type:"directory"}}return n},seek(t){return this.cookie=t},tell(){return this.cookie},valueOf(){return null}};this.streamMap=new Map([[Z.root,[e,this.getDefaultRights("dir"),0]],[Z.stdout,[this.createLogWriter("stdout"),ft,0]],[Z.stderr,[this.createLogWriter("stderr"),ft,0]]]),this.flushRequestMap=new Map,this.nextStreamHandle=Z.min},getStream(e){e===3&&(e=Z.root);const t=this.streamMap.get(e);if(!t)throw 2<e&&e<Z.min?new pt:new ls;return t},createStreamHandle(e,t,n=0){if(!this.ioRedirection)throw new pt;let s=this.nextStreamHandle++;if(s>Z.max){for(s=Z.min;this.streamMap.get(s);)if(s++,s>Z.max)throw new as;this.nextStreamHandle=s+1}return this.streamMap.set(s,[e,t,n]),e.onClose=()=>this.destroyStreamHandle(s),s},destroyStreamHandle(e){const t=this.streamMap.get(e);if(t){const[n]=t;n?.destroy?.(),this.streamMap.delete(e)}},redirectStream(e,t){const n=this.streamMap,s=Z[e],i=n.get(s);if(t!==void 0){let r,c;if(s===Z.stdin)r=this.convertReader(t),c=ws;else if(s===Z.stdout||s===Z.stderr)r=this.convertWriter(t),c=ft;else if(s===Z.root)r=this.convertDirectory(t),c=this.getDefaultRights("dir");else throw new Error(`Expecting 'stdin', 'stdout', 'stderr', or 'root', received ${e}`);if(!r)throw new ts(c[0],t);n.set(s,[r,c,0])}else n.delete(s);return i?.[0]},createLogWriter(e){const t=this;return{pending:[],write(n){const s=n.lastIndexOf(10);if(s===-1)this.pending.push(n);else{const i=n.subarray(0,s),r=n.subarray(s+1);this.dispatch([...this.pending,i]),this.pending.splice(0),r.length>0&&this.pending.push(r)}t.scheduleFlush(this,this.pending.length>0,250)},dispatch(n){const s=Et(n);t.triggerEvent("log",{source:e,message:s})==null&&console.log(s)},flush(){this.pending.length>0&&(this.dispatch(this.pending),this.pending.splice(0))}}},scheduleFlush(e,t,n){const s=this.flushRequestMap,i=s.get(e);i&&(clearTimeout(i),s.delete(e)),t&&s.set(e,setTimeout(()=>{e.flush(),s.delete(e)},n))},flushStreams(){const e=this.flushRequestMap;if(e.size>0){for(const[t,n]of e)t.flush(),clearTimeout(n);e.clear()}},getDefaultRights(e){return e==="dir"?[Rt,Rt|jt]:[jt,0]}});A({exports:{allocateJsThunk:{argType:"ii",returnType:"i"},freeJsThunk:{argType:"ii",returnType:"i"},findJsThunk:{argType:"ii",returnType:"i"}},imports:{identifyJsThunk:{argType:"ii",returnType:"i"}},init(){this.thunkSources=[],this.thunkMap=new Map},addJsThunkSource(){const{memoryInitial:e,memoryMax:t,tableInitial:n,multithreaded:s}=this.options,i=WebAssembly,r={},c={},o={},l={env:r,wasi:c,wasi_snapshot_preview1:o};for(const{module:d,name:S,kind:w}of i.Module.imports(this.executable))w==="function"&&(d==="env"?r[S]=Ke:d==="wasi_snapshot_preview1"&&(o[S]=Ke));r.memory=new i.Memory({initial:e,maximum:t,shared:s});const a=r.__indirect_function_table=new i.Table({initial:n,element:"anyfunc"}),{exports:f}=new i.Instance(this.executable,l),{createJsThunk:u,destroyJsThunk:h,identifyJsThunk:y}=f,p={thunkCount:0,createJsThunk:u,destroyJsThunk:h,identifyJsThunk:y,table:a};return this.thunkSources.unshift(p),p},allocateJsThunk(e,t){let n,s=0;for(n of this.thunkSources){s=n.createJsThunk(e,t);break}s||(n=this.addJsThunkSource(),s=n.createJsThunk(e,t));const i=n.table.get(s);let r=0;for(let c=this.table.length-1;c>=this.initialTableLength;c--)if(!this.table.get(c)){r=c;break}return r||(r=this.table.length,this.table.grow(8)),this.table.set(r,i),n.thunkCount++,this.thunkMap.set(i,{source:n,sourceAddress:s}),r},freeJsThunk(e,t){let n=0;const s=this.table.get(t);this.table.set(t,null);const i=this.thunkMap.get(s);if(i){const{source:r,sourceAddress:c}=i;if(n=r.destroyJsThunk(e,c),--r.thunkCount===0){const o=this.thunkSources.indexOf(r);o!==-1&&this.thunkSources.splice(o,1)}this.thunkMap.delete(s)}return n},findJsThunk(e,t){let n=0;const s=this.table.get(t);this.table.set(t,null);const i=this.thunkMap.get(s);if(i){const{source:r,sourceAddress:c}=i;n=r.identifyJsThunk(e,c)}return n}});A({init(){this.viewMap=new WeakMap},extractView(e,t,n=As){const{type:s,byteSize:i,constructor:r}=e;let c;const o=t?.[Symbol.toStringTag];if(o&&(o==="DataView"?c=this.registerView(t):o==="ArrayBuffer"?c=this.obtainView(t,0,t.byteLength):(o&&o===r[pe]?.name||o==="Uint8ClampedArray"&&r[pe]===Uint8Array)&&(c=this.obtainView(t.buffer,t.byteOffset,t.byteLength))),!c){const l=t?.[g];if(l){const{constructor:a,instance:{members:[f]}}=e;if(le(t,a))return l;if(Ss(s)){const{byteSize:u,structure:{constructor:h}}=f,y=nn(t,h);if(y!==void 0){if(s===T.Slice||y*u===i)return l;throw new it(e,null,t)}}}}return c?i!==void 0&&Dt(c,e):n?.(e,t),c},assignView(e,t,n,s,i){const{byteSize:r,type:c}=n,o=r??1,l={[g]:t,[B](){return this[g]}};if(e[g]){const a=c===T.Slice?o*e.length:o;if(t.byteLength!==a)throw new cn(n,t,e);e.constructor[ye]?.validateData?.(l,e.length),ne(e,l)}else{r!==void 0&&Dt(t,n);const a=t.byteLength/o;e.constructor[ye]?.validateData?.(l,a),i&&(s=!0),e[ze](s?null:t,a,i),s&&ne(e,l)}},findViewAt(e,t,n){let s=this.viewMap.get(e),i;if(s)if(s instanceof DataView)if(s.byteOffset===t&&s.byteLength===n)i=s,s=null;else{const r=s,c=`${r.byteOffset}:${r.byteLength}`;s=new Map([[c,r]]),this.viewMap.set(e,s)}else i=s.get(`${t}:${n}`);return i?.[C]?.address===Fe&&(i=null),{existing:i,entry:s}},obtainView(e,t,n,s=!0){let i;if(s){const{existing:r,entry:c}=this.findViewAt(e,t,n);if(r)return r;i=new DataView(e,t,n),c?c.set(`${t}:${n}`,i):this.viewMap.set(e,i)}else i=new DataView(e,t,n),i[Le]=!0;return(e===this.memory?.buffer||e===this.usizeMaxBuffer)&&(i[C]={address:t,len:n}),i},registerView(e){if(!e[C]){const{buffer:t,byteOffset:n,byteLength:s}=e,{existing:i,entry:r}=this.findViewAt(t,n,s);if(i)return i;r?r.set(`${n}:${s}`,e):this.viewMap.set(t,e)}return e},allocateMemory(e,t=0,n=null){return n?.alloc?.(e,t)??this.allocateJSMemory(e,t)},allocateJSMemory(e,t){return this.obtainView(new ArrayBuffer(e),0,e)},restoreView(e){const t=e?.[C];return t&&Fn(e.buffer)&&(e=this.obtainZigView(t.address,t.len),t.align&&(e[C].align=t.align)),e},defineRestorer(){const e=this;return{value(){const t=this[g],n=e.restoreView(t);return t!==n&&(this[g]=n,this.constructor[qe]?.save?.(n,this)),n}}},moveExternBytes(e,t,n){const{memory:s}=this,i=e.byteLength;if(i===0)return;const r=new DataView(s.buffer,t,i);e instanceof DataView||(e=new DataView(e.buffer,e.byteOffset,e.byteLength)),te(n?r:e,n?e:r)}});function Dt(e,t){const{byteSize:n,type:s}=t;if(!(s===T.Slice?e.byteLength%n===0:e.byteLength===n))throw new cn(t,e)}function Ss(e){return e===T.Array||e===T.Vector||e===T.Slice}function As(e){throw new Bn(e)}A({init(){this.nextThreadId=1,this.workers=[]},getThreadHandler(e){switch(e){case"thread-spawn":return typeof window=="object"&&!window.crossOriginIsolated&&console.warn(`%cHTML document is not cross-origin isolated %c

WebAssembly multithreading in the browser is only possibly when %cwindow.crossOriginIsolated%c = true. Visit https://developer.mozilla.org/en-US/docs/Web/API/Window/crossOriginIsolated for information on how to enable it.`,"color: red;font-size: 200%;font-weight:bold","","background-color: lightgrey;font-weight:bold",""),this.spawnThread.bind(this)}},spawnThread(e){const t=this.nextThreadId;this.nextThreadId++;const{executable:n,memory:s,options:i}=this,r={executable:n,memory:s,options:i,tid:t,arg:e},c=(l,a)=>{if(a.type==="call"){const{module:f,name:u,args:h,array:y}=a,p=this.exportedModules[f]?.[u],d=p?.(...h,!0),S=w=>{y&&(y[1]=w|0,y[0]=1,Atomics.notify(y,0,1))};Tt(d)?d.then(S):S(d)}else if(a.type==="exit"){const f=this.workers.indexOf(l);f!==-1&&(l.detach(),this.workers.splice(f,1))}},o="message";{const l=Es(),a=new Worker(l,{name:"zig"}),f=u=>c(a,u.data);a.addEventListener(o,f),a.detach=()=>a.removeEventListener(o,f),a.postMessage(r),this.workers.push(a)}return t}});function Is(){const e=Ts.toString(),t=e.indexOf("{")+1,n=e.lastIndexOf("}");return e.slice(t,n)}let ut;function Es(){if(!ut){const e=Is();ut=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}return ut}function Ts(){let e,t;self.onmessage=i=>n(i.data),e=i=>self.postMessage(i),t=()=>self.close();function n({executable:i,memory:r,options:c,tid:o,arg:l}){const a=WebAssembly,f={memory:r},u={},h={},y={env:f,wasi:u,wasi_snapshot_preview1:h};for(const{module:w,name:v,kind:M}of a.Module.imports(i))if(M==="function"){const E=s(w,v);w==="env"?f[v]=E:w==="wasi_snapshot_preview1"?h[v]=E:w==="wasi"&&(u[v]=E)}const{tableInitial:p}=c;f.__indirect_function_table=new a.Table({initial:p,element:"anyfunc"});const{exports:d}=new a.Instance(i,y),{wasi_thread_start:S}=d;S(o,l),e({type:"exit"}),t()}function s(i,r){const c=new Int32Array(new SharedArrayBuffer(8));return function(...o){return c[0]=0,e({type:"call",module:i,name:r,args:o,array:c}),Atomics.wait(c,0,0),c[1]}}}const vs=gt.proxyMaps??=[0,O.Const,O.ReadOnly,O.Const|O.ReadOnly].reduce((e,t)=>(e[t]=new WeakMap,e),{}),dn=gt.proxyTargetMap??=new WeakMap;function de(e,t){const n=e,s=vs[t&(O.Const|O.ReadOnly)];let i=s.get(n);return i||(i=new Proxy(e,Vs[t]),s.set(n,i),dn.set(i,{target:e,type:t})),i}function Ht(e,t=!1){const{type:n,flags:s}=e;let i=t&&n!==T.Function?O.ReadOnly:0;return s&V.HasProxy&&(n===T.Pointer?(i|=O.Pointer,s&$.IsConst&&(i|=O.Const)):i|=O.Slice),i}function rt(e){if((typeof e=="object"||typeof e=="function")&&e)return dn.get(e)}function ve(e){const t=rt(e);return t?[t.target,t.type]:[e,0]}function yn(e){const t=rt(e);let n;if(t){if(t.type&O.ReadOnly)return e;n=t.type|O.ReadOnly,e=t.target}else{if(!e?.[g]||typeof e!="object"||e[Ye])return e;n=e.constructor[tt]??O.ReadOnly}return de(e,n)}const xt={get(e,t){return t in e?e[t]:e[X][t]},set(e,t,n){if(t in e)e[t]=n;else{const s=e[X];s[t]=n}return!0},deleteProperty(e,t){if(t in e)delete e[t];else{const n=e[X];delete n[t]}return!0},has(e,t){if(t in e)return!0;{const n=e[X];return t in n}},apply(e,t,n){return e["*"].apply(t,n)}},pn={...xt,set(e,t,n){if(t in e)ie();else{const s=e[X];s[t]=n}return!0}},et={get(e,t){const n=e[t];return typeof t=="string"?yn(n):n},set(e,t,n){ie()}},xs={...xt,get(e,t){return t in e?et.get(e,t):et.get(e[X],t)},set(e,t,n){return t in e?e[t]=n:ie(),!0}},Ms={...pn,set:et.set},mn={get(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?e.get(n):e[t]},set(e,t,n){const s=typeof t=="symbol"?0:t|0;return s!==0||s==t?e.set(s,n):e[t]=n,!0},deleteProperty(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?!1:(delete e[t],!0)},has(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?n>=0&&n<e.length:e[t]},ownKeys(e){const t=[];for(let n=0,s=e.length;n<s;n++)t.push(`${n}`);return t.push("length"),t},getOwnPropertyDescriptor(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t){if(n>=0&&n<e.length)return{value:e.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(e,t)}},Os={...mn,get(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?yn(e.get(n)):t==="set"?ie:e[t]},set:ie},Vs={[O.Pointer]:xt,[O.Pointer|O.Const]:xs,[O.Pointer|O.ReadOnly]:pn,[O.Pointer|O.ReadOnly|O.Const]:Ms,[O.Slice]:mn,[O.Slice|O.ReadOnly]:Os,[O.ReadOnly]:et};A({makeReadOnly(e){Mt(e)}});function Mt(e){const[t]=ve(e);if(t?.[g]&&!t[Ye]){t[Ye]=!0;const n=t.constructor[Ee];n===T.Pointer?ht(t,["length"]):n===T.Array||n===T.Slice?(ht(t),ks(t)):ht(t)}return e}function ht(e,t=[]){const n=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const[s,i]of Object.entries(n))if(!t.includes(s)){const{get:r,set:c}=i;i.get=r?function(){return Mt(r.call(this))}:void 0,i.set=c?ie:void 0,H(e,s,i)}}function ks(e){const{get:t}=e;fe(e,{get:b(function(n){return Mt(t.call(this,n))}),set:b(ie)})}A({defineArrayEntries(){return b(_s)},defineArrayIterator(){return b(Cs)}});function bn(e){const t=rt(e);if(t){const{target:n}=t;return t.type&O.Pointer?n["*"]:n}return e}function Cs(){const e=bn(this),t=e.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e.get(r),i=!1}else i=!0;return{value:s,done:i}}}}function Ps(e){const t=It(e),n=bn(this),s=n.length;let i=0;return{next(){let r,c;if(i<s){const o=i++;r=[o,t(()=>n.get(o))],c=!1}else c=!0;return{value:r,done:c}}}}function _s(e){return{[Symbol.iterator]:Ps.bind(this,e),length:this.length}}A({defineStructEntries(){return b(gn)},defineStructIterator(){return b(zs)}});function gn(e){return{[Symbol.iterator]:$s.bind(this,e),length:this[xe].length}}function zs(e){return gn.call(this,e)[Symbol.iterator]()}function $s(e){const t=It(e),n=this,s=this[xe];let i=0;return{next(){let r,c;if(i<s.length){const o=s[i++];r=[o,t(()=>n[o])],c=!1}else c=!0;return{value:r,done:c}}}}A({defineVectorEntries(){return b(Fs)},defineVectorIterator(){return b(Ls)}});function Ls(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e[r],i=!1}else i=!0;return{value:s,done:i}}}}function Ns(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=[r,e[r]],i=!1}else i=!0;return{value:s,done:i}}}}function Fs(){return{[Symbol.iterator]:Ns.bind(this),length:this.length}}A({defineMember(e,t=!0){if(!e)return{};const{type:n,structure:s}=e,i=`defineMember${Zt[n]}`,c=this[i].call(this,e);if(t&&s){const{type:o}=s,l=`transformDescriptor${Ge[o]}`,a=this[l];if(a)return a.call(this,c,e)}return c}});function wn(e,{get:t,set:n}){return e!==void 0?{get:function(){return t.call(this,e)},set:n?function(s,i){return n.call(this,e,s,i)}:void 0}:{get:t,set:n}}A({defineBase64(e){const t=this;return De({get(){return kn(this.dataView)},set(n,s){if(typeof n!="string")throw new se("string",n);const i=Cn(n);t.assignView(this,i,e,!1,s)}})}});A({defineMemberBool(e){return this.defineMemberUsing(e,this.getAccessor)}});A({defineClampedArray(e){const t=this,n=Uint8ClampedArray;return De({get(){const s=this.typedArray;return new n(s.buffer,s.byteOffset,s.length)},set(s,i){if(s?.[Symbol.toStringTag]!==n.name)throw new se(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});A({defineDataView(e){const t=this;return De({get(){return this[B]()},set(n,s){if(n?.[Symbol.toStringTag]!=="DataView")throw new se("DataView",n);t.assignView(this,n,e,!0,s)}})}});A({defineMemberFloat(e){return this.defineMemberUsing(e,this.getAccessor)}});A({defineMemberInt(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});A({defineMemberObject(e){const{flags:t,structure:n,slot:s}=e;let i,r;return t&D.IsString?i=Rs:t&D.IsTypedArray?i=js:t&D.IsClampedArray?i=Ds:t&D.IsPlain?i=Hs:n.flags&(V.HasValue|V.HasProxy)?i=He:i=Ot,t&D.IsReadOnly?r=ie:r=Us,wn(s,{get:i,set:r})}});function He(e){return Ot.call(this,e).$}function Rs(e){return He.call(this,e)?.string??null}function js(e){return He.call(this,e)?.typedArray??null}function Ds(e){return He.call(this,e)?.clampedArray??null}function Hs(e){return He.call(this,e)?.valueOf?.()??null}function Ot(e){return this[x][e]??this[ce](e)}function Us(e,t,n){Ot.call(this,e)[q](t,n)}A({defineMemberUsing(e,t){const{littleEndian:n}=this,{bitOffset:s,byteSize:i}=e,r=t.call(this,"get",e),c=t.call(this,"set",e);if(s!==void 0){const o=s>>3;return{get:function(){const a=this[B]();return r.call(a,o,n)},set:function(a){const f=this[B]();return c.call(f,o,a,n)}}}else return{get:function(l){const a=this[B]();return r.call(a,l*i,n)},set:function(l,a){const f=this[B]();return c.call(f,l*i,a,n)}}}});A({defineRetvalCopier({byteSize:e,bitOffset:t}){if(e>0){const n=this,s=t>>3;return{value(i){const r=this[g],{address:c}=i[C],o=new DataView(n.memory.buffer,c+s,e),l=new DataView(r.buffer,r.byteOffset+s,e);te(l,o)}}}}});A({defineSentinel(e){const{byteSize:t,instance:{members:[n,s],template:i}}=e,{get:r}=this.defineMember(s),{get:c}=this.defineMember(n),o=r.call({[g]:i[g],[B](){return this[g]}},0),l=!!(s.flags&D.IsRequired),{runtimeSafety:a}=this;return b({value:o,bytes:i[g],validateValue(f,u,h){if(l){if(a&&f===o&&u!==h-1)throw new $t(e,f,u,h);if(f!==o&&u===h-1)throw new lt(e,o,h)}},validateData(f,u){if(l){if(a)for(let h=0;h<u;h++){const y=c.call(f,h);if(y===o&&h!==u-1)throw new $t(e,o,h,u);if(y!==o&&h===u-1)throw new lt(e,o,u)}else if(u>0&&u*t===f[g].byteLength&&c.call(f,u-1)!==o)throw new lt(e,o,u)}},isRequired:l})},findSentinel(e,t){const{memory:n}=this,s=t.byteLength,i=n.buffer.byteLength-s+1;for(let r=e;r<i;r+=s){const c=new DataView(n.buffer,r,s);let o=!0;for(let l=0;l<s;l++){const a=c.getUint8(l),f=t.getUint8(l);if(a!==f){o=!1;break}}if(o)return(r-e)/s}}});A({defineString(e){const t=this,{byteSize:n}=e.instance.members[0],s=`utf-${n*8}`;return De({get(){let i=Et(this.typedArray,s);const r=this.constructor[ye]?.value;return r!==void 0&&i.charCodeAt(i.length-1)===r&&(i=i.slice(0,-1)),i},set(i,r){if(typeof i!="string")throw new se("string",i);const c=this.constructor[ye]?.value;c!==void 0&&i.charCodeAt(i.length-1)!==c&&(i+=String.fromCharCode(c));const o=Kt(i,s),l=new DataView(o.buffer);t.assignView(this,l,e,!1,r)}})}});A({defineValueOf(){return{value(){return Sn(this,!1)}}}});const Bs=BigInt(Number.MAX_SAFE_INTEGER),Ws=BigInt(Number.MIN_SAFE_INTEGER);function Sn(e,t){const n={error:t?"return":"throw"},s=It(n),i=new Map,r=function(c){const o=typeof c=="function"?T.Struct:c?.constructor?.[Ee];if(o===void 0){if(t){if(typeof c=="bigint"&&Ws<=c&&c<=Bs)return Number(c);if(c instanceof Error)return{error:c.message}}return c}let l=i.get(c);if(l===void 0){let a;switch(o){case T.Struct:a=c[ue](n),l=c.constructor[Jt]&We.IsTuple?[]:{};break;case T.Union:a=c[ue](n),l={};break;case T.Array:case T.Vector:case T.Slice:a=c[ue](),l=[];break;case T.Pointer:try{l=c["*"]}catch{l=Symbol.for("inaccessible")}break;case T.Enum:l=s(()=>String(c));break;case T.Opaque:l={};break;default:l=s(()=>c.$)}if(l=r(l),i.set(c,l),a)for(const[f,u]of a)l[f]=r(u)}return l};return r(e)}A({defineToJSON(){return{value(){return Sn(this,!0)}}}});A({defineMemberType(e,t){const{slot:n}=e;return wn(n,{get(s){return this[x][s]?.constructor},set:ie})}});A({defineTypedArray(e){const t=this,n=this.getTypedArray(e);return De({get(){const s=this.dataView,i=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,i)},set(s,i){if(s?.[Symbol.toStringTag]!==n.name)throw new se(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});A({defineMemberUint(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});A({defineMemberVoid(e,t){const{bitOffset:n}=e;return{get(){},set:n!==void 0?function(s){if(s!==void 0)throw new Nt(e)}:function(s,i){if(i!==void 0)throw new Nt(e);if(s<0||s>=this.length)throw new ss(e,s)}}}});A({createSignal(e,t){const{constructor:{child:n}}=e.instance.members[0].structure,s=new Int32Array([t?.aborted?1:0]),i=n(s);return t&&t.addEventListener("abort",()=>{{const r=this.findShadowView(i[g]);if(r){const c=new Int32Array(r.buffer,r.byteOffset,1);Atomics.store(c,0,1)}}},{once:!0}),{ptr:i}},createInboundSignal(e){const t=new AbortController;if(e.ptr["*"])t.abort();else{const n=setInterval(()=>{e.ptr["*"]&&(t.abort(),clearInterval(n))},50)}return t.signal}});A({defineStructure(e){const{type:t,byteSize:n}=e,s=`define${Ge[t]}`,i=this[s],r=[],c={},o={dataView:this.defineDataView(e),base64:this.defineBase64(e),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[$e]:b(c),[dt]:b(r),[B]:this.defineRestorer()},l=e.constructor=i.call(this,e,o);for(const[a,f]of Object.entries(o)){const u=f?.set;u&&!c[a]&&a!=="$"&&(c[a]=u,r.push(a))}return fe(l.prototype,o),l},finalizeStructure(e){const{name:t,type:n,constructor:s,align:i,byteSize:r,flags:c,signature:o,static:{members:l,template:a}}=e,f=[],u={name:b(t),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[yt]:b(o),[Y]:b(this),[ee]:b(i),[St]:b(r),[Ee]:b(n),[Jt]:b(c),[xe]:b(f),[pe]:b(this.getTypedArray(e)),[Symbol.iterator]:this.defineStructIterator(),[ue]:this.defineStructEntries(),[xe]:b(f)},h={[Symbol.toStringTag]:b(t)};if(l)for(const d of l){const{name:S,slot:w,flags:v}=d;if(d.structure.type===T.Function){let M=a[x][w];v&D.IsString?M[we]=R=>R.string:v&D.IsClampedArray?M[we]=R=>R.clampedArray:v&D.IsTypedArray?M[we]=R=>R.typedArray:v&D.IsPlain&&(M[we]=R=>R.valueOf()),u[S]=b(M),M.name||H(M,"name",b(S));const[E,W]=/^(get|set)\s+([\s\S]+)/.exec(S)?.slice(1)??[],J=E==="get"?0:1;if(E&&M.length===J){u[W]||={};const R=u[W];R[E]=M}if(v&D.IsMethod){const R=function(...Oe){try{let[ae,be]=ve(this);return v&D.IsExpectingInstance&&be===O.Pointer&&(ae=ae["*"]),M(ae,...Oe)}catch(ae){throw ae[me]?.(1),ae}};if(fe(R,{name:b(S),length:b(M.length-1)}),h[S]=b(R),E&&R.length===J){const Oe=h[W]||={};Oe[E]=R}}}else u[S]=this.defineMember(d),f.push(S)}u[x]=f.length>0&&b(a[x]);const y=`finalize${Ge[n]}`;this[y]?.call(this,e,u,h)!==!1&&(fe(s.prototype,h),fe(s,u))},createConstructor(e,t={}){const{type:n,byteSize:s,align:i,flags:r,instance:{members:c,template:o}}=e,{onCastError:l}=t;let a;if(o?.[x]){const y=c.filter(p=>p.flags&D.IsReadOnly);y.length>0&&(a=y.map(p=>p.slot))}const f=new jn,u=this,h=function(y,p={}){const{allocator:d}=p,S=this instanceof h;let w,v,M=!1;if(S){if(arguments.length===0)throw new on(e);if(w=this,r&V.HasSlot&&(w[x]={}),ze in w)w[q](y,d),v=w[g];else{const E=n!==T.Pointer?d:null;w[g]=v=u.allocateMemory(s,i,E)}}else{if(Ne in h&&(w=h[Ne].call(this,y,p),w!==!1))return w;v=u.extractView(e,y,l),(w=f.find(v))?M=!0:(w=Object.create(h.prototype),ze in w?u.assignView(w,v,e,!1,!1):w[g]=v,r&V.HasSlot&&(w[x]={}))}if(!M){if(a)for(const E of a)w[x][E]=o[x][E];w[On]?.(),S&&(ze in w||w[q](y,d)),oe in w&&(w=w[oe]()),f.save(v,w)}return r&V.HasProxy&&(S||!this)?w[nt]():w};return H(h,qe,b(f)),o?.[g]&&H(o,B,this.defineRestorer()),h},createInitializer(e){return function(t,n){const[s,i]=ve(t),[r]=ve(this);return e.call(r,s,n,i)}},createApplier(e){const{instance:{template:t}}=e;return function(n,s){const[i]=ve(n),[r]=ve(this),c=Object.keys(i);if(i instanceof Error)throw i;const o=r[dt],l=r[$e];for(const y of c)if(!(y in l))throw new Gn(e,y);let a=0,f=0,u=0,h=0;for(const y of o){const p=l[y];p.special?y in i&&h++:(a++,y in i?f++:p.required&&u++)}if(u!==0&&h===0){const y=o.filter(p=>l[p].required&&!(p in i));throw new Jn(e,y)}if(h+f>c.length)for(const y of o)y in i&&(c.includes(y)||c.push(y));f<a&&h===0&&t&&t[g]&&ne(r,t);for(const y of c)l[y].call(r,i[y],s);return c.length}},getTypedArray(e){const{type:t,instance:n}=e;if(t!==void 0&&n)switch(t){case T.Enum:case T.ErrorSet:case T.Primitive:{const{byteSize:s,type:i}=n.members[0],r=i===N.Float?"Float":i===N.Int?"Int":"Uint",o=(s>4&&i!==N.Float?"Big":"")+r+s*8+"Array";return globalThis[o]}case T.Array:case T.Slice:case T.Vector:return this.getTypedArray(n.members[0].structure)}}});A({init(){this.defaultAllocator=null,this.allocatorVtable=null,this.allocatorContextMap=new Map,this.nextAllocatorContextId=en(4096)},createDefaultAllocator(e,t){let n=this.defaultAllocator;return n||(n=this.defaultAllocator=this.createJsAllocator(e,t,!1)),n},createJsAllocator(e,t,n){const{constructor:s}=t;let i=this.allocatorVtable;if(!i){const{noResize:o,noRemap:l}=s;i=this.allocatorVtable={alloc:this.allocateHostMemory.bind(this),free:this.freeHostMemory.bind(this),resize:o},l&&(i.remap=l),this.destructors.push(()=>this.freeFunction(i.alloc)),this.destructors.push(()=>this.freeFunction(i.free))}let r=Xe;if(n){const o=[];r=this.nextAllocatorContextId++,this.allocatorContextMap.set(r,o),e[Mn]=l=>{for(const{address:a,len:f}of o){const u=this.unregisterMemory(a,f);u&&this.freeShadowMemory(u.shadowDV),l&&this.allocatorContextMap.delete(r)}o.splice(0)}}const c=this.obtainZigView(r,0);return new s({ptr:c,vtable:i})},allocateHostMemory(e,t,n){const s=this.getViewAddress(e["*"][g]),i=s!=Xe?this.allocatorContextMap.get(s):null,r=1<<n,c=this.allocateJSMemory(t,r);try{const o=this.allocateShadowMemory(t,r),l=this.getViewAddress(o);return this.registerMemory(l,t,r,!0,c,o),i?.push({address:l,len:t}),o}catch{return null}},freeHostMemory(e,t,n){const s=t["*"][g],i=this.getViewAddress(s),r=s.byteLength,c=this.unregisterMemory(i,r);c&&this.freeShadowMemory(c.shadowDV)}});A({defineArgStruct(e,t){const{flags:n,byteSize:s,align:i,length:r,instance:{members:c}}=e,o=this,l=c.slice(1),a=function(u,h){const y=this instanceof a;let p,d;if(y?(p=this,d=o.allocateMemory(s,i)):(p=Object.create(a.prototype),d=u),p[g]=d,n&V.HasSlot&&(p[x]={}),y){let S;if(n&ot.HasOptions&&u.length===r+1&&(S=u.pop()),u.length!==r)throw new qn(r,u.length);n&ot.IsAsync&&(p[oe]=null),o.copyArguments(p,u,l,S,h)}else return p};for(const u of c)t[u.name]=this.defineMember(u);const f=t.retval.set;return t.length=b(l.length),t[ce]=n&V.HasObject&&this.defineVivificatorStruct(e),t[_]=n&V.HasPointer&&this.defineVisitorArgStruct(c),t[he]=b(function(u){f.call(this,u,this[At])}),t[Symbol.iterator]=this.defineArgIterator?.(l),t[me]=this.defineRetvalCopier(c[0]),a},finalizeArgStruct(e,t){const{flags:n}=e;t[qt]=b(!!(n&ot.IsThrowing))}});A({defineArray(e,t){const{length:n,instance:{members:[s]},flags:i}=e,r=this.createApplier(e),c=this.defineMember(s),{set:o}=c,l=this.createConstructor(e),a=this.createInitializer(function(f,u){if(le(f,l))ne(this,f),i&V.HasPointer&&this[_]("copy",P.Vivificate,f);else if(typeof f=="string"&&i&ke.IsString&&(f={string:f}),f?.[Symbol.iterator]){if(f=tn(f),f.length!==n)throw new it(e,this,f);let h=0;for(const y of f)o.call(this,h++,y,u)}else if(f&&typeof f=="object"){if(r.call(this,f)===0)throw new Ae(e,f)}else if(f!==void 0)throw new Ae(e,f)});return t.$={get:function(){return de(this,O.Slice)},set:a},t.length=b(n),t.entries=t[ue]=this.defineArrayEntries(),i&ke.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),i&ke.IsString&&(t.string=this.defineString(e)),i&ke.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t[Symbol.iterator]=this.defineArrayIterator(),t[q]=b(a),t[oe]=this.defineFinalizerArray(c),t[ce]=i&V.HasObject&&this.defineVivificatorArray(e),t[_]=i&V.HasPointer&&this.defineVisitorArray(),t[nt]={value(){return de(this,O.Slice)}},t[tt]=b(O.Slice),l},finalizeArray(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=b(s.structure.constructor),t[ye]=n&ke.HasSentinel&&this.defineSentinel(e)}});A({defineFinalizerArray({get:e,set:t}){return{value(){return fe(this,{get:{value:e.bind(this)},set:t&&{value:t.bind(this)}}),this}}},defineVivificatorArray(e){const{instance:{members:[t]}}=e,{byteSize:n,structure:s}=t,i=this;return{value:function(o){const{constructor:l}=s,a=this[B](),u=a.byteOffset+n*o,h=i.obtainView(a.buffer,u,n,!a[Le]);return this[x][o]=l.call(wt,h)}}}});A({defineEnum(e,t){const{instance:{members:[n]}}=e,s=this.defineMember(n),{get:i,set:r}=s,{get:c}=this.defineMember(n,!1),o=this.createApplier(e),l=["string","number","tagged union"],a=function(u){if(u&&typeof u=="object"){if(o.call(this,u)===0)throw new Ie(e,l,u)}else u!==void 0&&r.call(this,u)},f=this.createConstructor(e,{onCastError(u,h){throw new Ie(u,l,h)}});return t.$=s,t.toString=b(Rn),t[Symbol.toPrimitive]={value(u){switch(u){case"string":case"default":return this.$[ct];default:return c.call(this)}}},t[q]=b(a),f},finalizeEnum(e,t){const{flags:n,constructor:s,instance:{members:[i]},static:{members:r,template:c}}=e,o=c[x],{get:l,set:a}=this.defineMember(i,!1),f={};for(const{name:u,flags:h,slot:y}of r)if(h&D.IsPartOfSet){const p=o[y];H(p,ct,b(u));const d=l.call(p);t[u]={value:p,writable:!1},f[d]=p}t[Ne]={value(u){if(typeof u=="string")return s[u];if(typeof u=="number"||typeof u=="bigint"){let h=f[u];if(!h&&n&An.IsOpenEnded){h=new s(void 0),a.call(h,u);const y=`${u}`;H(h,ct,b(y)),H(s,y,b(h)),f[u]=h}return h}else return u instanceof s?u:u?.[_t]instanceof s?u[_t]:!1}},t[pe]=b(this.getTypedArray(e))},transformDescriptorEnum(e,t){const{type:n,structure:s}=t;if(n===N.Object)return e;const i=function(o){const{constructor:l}=s,a=l(o);if(!a)throw new Wn(s,o);return a},{get:r,set:c}=e;return{get:r.length===0?function(){const l=r.call(this);return i(l)}:function(l){const a=r.call(this,l);return i(a)},set:c.length===1?function(l){l=i(l)[Symbol.toPrimitive](),c.call(this,l)}:function(l,a){const f=i(a);c.call(this,l,f[Symbol.toPrimitive]())}}}});A({init(){this.ZigError=null,this.globalItemsByIndex={},this.globalErrorSet=null},defineErrorSet(e,t){const{instance:{members:[n]},byteSize:s,flags:i}=e;if(!this.ZigError){this.ZigError=class extends Zs{};const u={type:T.ErrorSet,flags:Ce.IsGlobal,byteSize:s,name:"anyerror",instance:{members:[n]},static:{members:[],template:{SLOTS:{}}}},h=this.defineStructure(u);this.finalizeStructure(u),this.globalErrorSet=h}if(this.globalErrorSet&&i&Ce.IsGlobal)return this.globalErrorSet;const r=this.defineMember(n),{set:c}=r,o=["string","number"],l=this.createApplier(e),a=function(u){if(u instanceof f[Ze])c.call(this,u);else if(u&&typeof u=="object"&&!Re(u)){if(l.call(this,u)===0)throw new Ie(e,o,u)}else u!==void 0&&c.call(this,u)},f=this.createConstructor(e,{onCastError(u,h){throw new Ie(u,o,h)}});return t.$=r,t[q]=b(a),f},finalizeErrorSet(e,t){const{constructor:n,flags:s,instance:{members:[i]},static:{members:r,template:c}}=e;if(this.globalErrorSet&&s&Ce.IsGlobal)return!1;const o=c?.[x]??{},l=s&Ce.IsGlobal?this.globalItemsByIndex:{},{get:a}=this.defineMember(i,!1);for(const{name:f,slot:u}of r){const h=o[u],y=a.call(h);let p=this.globalItemsByIndex[y];const d=!!p;p||(p=new this.ZigError(f,y));const S=b(p);t[f]=S;const w=`${p}`;t[w]=S,l[y]=p,d||(fe(this.globalErrorSet,{[f]:S,[w]:S}),this.globalErrorSet[xe].push(f),this.globalItemsByIndex[y]=p)}t[Ne]={value(f){return typeof f=="number"?l[f]:typeof f=="string"?n[f]:f instanceof n[Ze]?l[Number(f)]:Re(f)?n[`Error: ${f.error}`]:f instanceof Error?n[`${f}`]:!1}},t[Ze]=b(this.ZigError)},transformDescriptorErrorSet(e,t){const{type:n,structure:s}=t;if(n===N.Object)return e;const i=o=>{const{constructor:l,flags:a}=s,f=l(o);if(!f){if(a&Ce.IsGlobal&&typeof o=="number"){const u=new this.ZigError(`Unknown error: ${o}`,o);return this.globalItemsByIndex[o]=u,H(this.globalErrorSet,`${u}`,b(u)),u}throw o instanceof Error?new ln(s,o):new Zn(s,o)}return f},{get:r,set:c}=e;return{get:r.length===0?function(){const l=r.call(this);return i(l)}:function(l){const a=r.call(this,l);return i(a)},set:c.length===1?function(l){const a=i(l);l=Number(a),c.call(this,l)}:function(l,a){const f=i(a);a=Number(f),c.call(this,l,a)}}}});class Zs extends Error{constructor(t,n){super(ds(t)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}A({defineErrorUnion(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:c}=this.defineMember(n),{get:o,set:l}=this.defineMember(s),{get:a,set:f}=this.defineMember(s,!1),u=function(){if(a.call(this))throw o.call(this);return r.call(this)},h=n.type===N.Void,y=s.structure.constructor,{bitOffset:p,byteSize:d}=n,S=function(){rn(this[g],p>>3,d),this[_]?.("clear",P.IgnoreUncreated)},w=this.createApplier(e),v=this.createInitializer(function(E,W){if(le(E,M))ne(this,E),i&V.HasPointer&&(a.call(this)||this[_]("copy",0,E));else if(E instanceof y[Ze]&&y(E))l.call(this,E),S.call(this);else if(E!==void 0||h)try{c.call(this,E,W),f.call(this,0);return}catch(J){if(E instanceof Error){const R=y(E)??y.Unexpected;if(R)l.call(this,R),S.call(this);else throw new ln(s.structure,E)}else if(Re(E))l.call(this,E),S.call(this);else if(E&&typeof E=="object"){if(w.call(this,E)===0)throw J}else throw J}}),M=this.createConstructor(e);return t.$={get:u,set:v},t[q]=b(v),t[ce]=i&V.HasObject&&this.defineVivificatorStruct(e),t[_]=i&V.HasPointer&&this.defineVisitorErrorUnion(n,a),M}});A({defineFunction(e,t){const{instance:{members:[n],template:s}}=e,{structure:{constructor:i}}=n,r=this,c=function(o){const l=this instanceof c;let a;if(l){if(arguments.length===0)throw new on(e);if(typeof o!="function")throw new se("function",o);if(i[Ee]===T.VariadicStruct||!c[Be])throw new pt;r.instance&&(a=r.getFunctionThunk(o,c[Be]))}else{if(this!==Y)throw new Kn;a=o}const f=i.prototype.length,u=l?r.createInboundCaller(o,i):r.createOutboundCaller(s,i);return fe(u,{length:b(f),name:b(l?o.name:"")}),Object.setPrototypeOf(u,c.prototype),a?u[g]=a:(r.deferredThunks??=[],r.deferredThunks.push({target:u,fn:o})),u};return Object.setPrototypeOf(c.prototype,Function.prototype),t.valueOf=t.toJSON=b(st),c},finalizeFunction(e,t,n){const{static:{template:s}}=e;t[Be]=b(s),n[Symbol.toStringTag]=void 0},createDeferredThunks(){const e=this.deferredThunks;if(e)for(const{target:t,fn:n}of e){const{constructor:s}=t,i=this.getFunctionThunk(n,s[Be]);t[g]=i}}});A({defineOptional(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:c}=this.defineMember(n),{get:o,set:l}=this.defineMember(s),a=function(){return o.call(this)?r.call(this):(this[_]?.("clear",P.IgnoreUncreated),null)},f=n.type===N.Void,{bitOffset:u,byteSize:h}=n,y=this.createInitializer(function(d,S){le(d,p)?(ne(this,d),i&V.HasPointer&&o.call(this)&&this[_]("copy",P.Vivificate,d)):d===null?(l.call(this,0),i&Ct.HasSelector&&rn(this[g],u>>3,h),this[_]?.("clear",P.IgnoreUncreated)):(d!==void 0||f)&&(c.call(this,d,S),i&Ct.HasSelector?l.call(this,1):i&V.HasPointer&&(o.call(this)||l.call(this,13)))}),p=e.constructor=this.createConstructor(e);return t.$={get:a,set:y},t[q]=b(y),t[ce]=i&V.HasObject&&this.defineVivificatorStruct(e),t[_]=i&V.HasPointer&&this.defineVisitorOptional(n,o),p}});A({definePointer(e,t){const{flags:n,byteSize:s,instance:{members:[i]}}=e,{structure:r}=i,{type:c,flags:o,byteSize:l=1}=r,a=n&$.HasLength?s/2:s,{get:f,set:u}=this.defineMember({type:N.Uint,bitOffset:0,bitSize:a*8,byteSize:a,structure:{byteSize:a}}),{get:h,set:y}=n&$.HasLength?this.defineMember({type:N.Uint,bitOffset:a*8,bitSize:a*8,byteSize:a,structure:{flags:Wt.IsSize,byteSize:a}}):{},p=function(m,L=!0,F=!0){if(L||this[g][C])if(F){const z=Ve.child,K=f.call(this),G=n&$.HasLength?h.call(this):c===T.Slice&&o&re.HasSentinel?be.findSentinel(K,z[ye].bytes)+1:1;if(K!==this[_e]||G!==this[Ue]){const Q=be.findMemory(m,K,G,z[St]),Te=Q?z.call(Y,Q):null;return this[x][0]=Te,this[_e]=K,this[Ue]=G,n&$.HasLength&&(this[Pe]=null),Te}}else return this[x][0]=void 0;return this[x][0]},d=function(m){u.call(this,m),this[_e]=m},S=o&re.HasSentinel?1:0,w=n&$.HasLength||o&re.HasSentinel?function(m){y?.call?.(this,m-S),this[Ue]=m}:null,v=Ht(e),M=Ht(r,n&$.IsConst),E=function(m=!0){const L=!this[x][0],F=p.call(this,null,L);if(!F){if(n&$.IsNullable)return null;throw new ns}return M&&m?de(F,M):F},W=function(m){if(m!==void 0){if(m){const L=m[g][C];if(L){const{address:F,js:z}=L;d.call(this,F),w?.call?.(this,m.length),z&&(m[g][C]=void 0)}else if(this[g][C])throw new fn}else this[g][C]&&(d.call(this,0),w?.call?.(this,0));this[x][0]=m??null,n&$.HasLength&&(this[Pe]=null)}},J=o&V.HasValue?function(){return E.call(this).$}:E,R=n&$.IsConst?ie:function(m){const L=E.call(this);return L.$=m},Oe=function(){const m=E.call(this,!1);return m?m.length:0},ae=function(m){m=m|0;const L=E.call(this,!1);if(L){if(L.length===m)return}else{if(m!==0)throw new zt(m,0);return}const F=L[B](),z=F[C];let K;if(z||(n&$.HasLength?(this[Pe]||=L.length,K=this[Pe]):K=(F.buffer.byteLength-F.byteOffset)/l|0),m<0||m>K)throw new zt(m,K);const G=m*l,Q=z?be.obtainZigView(z.address,G):be.obtainView(F.buffer,F.byteOffset,G),Te=r.constructor;this[x][0]=Te.call(Y,Q),w?.call?.(this,m)},be=this,Vt=this.createInitializer(function(m,L,F){const z=r.constructor;if(bt(m,z)){if(!(n&$.IsConst)&&m.constructor.const)throw new Qn(e,m);m=m[x][0]}else if(n&$.IsMultiple)Ut(m,z,n)&&(m=z.call(Y,m[x][0][g]));else if(c===T.Slice&&o&re.IsOpaque&&m){if(m.constructor[Ee]===T.Pointer)m=m[X]?.[g];else if(m[g])m=m[g];else if(m?.buffer instanceof ArrayBuffer&&!(m instanceof Uint8Array||m instanceof DataView)){const{byteOffset:G,byteLength:Q}=m;G!==void 0&&Q!==void 0&&(m=new DataView(m.buffer,G,Q))}}if(m instanceof z){if(m[B](),(F===O.ReadOnly||m[Ye])&&!(n&$.IsConst))throw new os(e)}else if(le(m,z))m=z.call(Y,m[g]);else if(n&$.IsSingle&&n&$.IsMultiple&&m instanceof z.child)m=z.call(Y,m[g]);else if(Js(m,z)){const G=be.extractView(r,m);m=z.call(Y,G)}else if(m!=null&&!m[g]){if(n&$.IsSingle&&n&$.IsMultiple&&typeof m=="object"&&!m[Symbol.iterator]){let Q=!0;const Te=z.prototype[$e];for(const kt of Object.keys(m))if(Te[kt]?.special){Q=!1;break}Q&&(m=[m])}if(pe in z&&m?.buffer&&m[Symbol.iterator])throw new Lt(e,m);const G=m=new z(m,{allocator:L});o&V.HasProxy&&(m=rt(G).target)}else if(m!==void 0&&(!(n&$.IsNullable)||m!==null))throw new Lt(e,m);if(m?.[g]?.[C]?.address===Fe)throw new an(m);this[X]=m}),Ve=this.createConstructor(e);return t["*"]={get:J,set:R},t.$={get:c===T.Pointer?st:function(){return de(this,v)},set:Vt},t.length={get:Oe,set:ae},t.slice=c===T.Slice&&{value(m,L){const F=this[X].slice(m,L);return new Ve(F)}},t.subarray=c===T.Slice&&{value(m,L,F){const z=this[X].subarray(m,L,F);return new Ve(z)}},t[Symbol.toPrimitive]=c===T.Primitive&&{value(m){return this[X][Symbol.toPrimitive](m)}},t[q]=b(Vt),t[oe]=c===T.Function&&{value(){const m=function(...L){return m["*"].call(this,...L)};return m[g]=this[g],m[x]=this[x],Object.setPrototypeOf(m,Ve.prototype),m}},t[nt]=v&&{value(){return de(this,v)}},t[tt]=b(v),t[X]={get:E,set:W},t[me]=b(p),t[Gt]={set:d},t[Se]={set:w},t[_]=this.defineVisitor(),t[_e]=b(0),t[Ue]=b(0),t[Pe]=n&$.HasLength&&b(null),t.dataView=t.base64=void 0,Ve},finalizePointer(e,t){const{flags:n,constructor:s,instance:{members:[i]}}=e,{structure:r}=i,{type:c,constructor:o}=r;t.child=o!==Object?b(o):{get(){return r.constructor}},t.const=b(!!(n&$.IsConst)),t[Ne]={value(l,a){if(this===Y||this===wt||l instanceof s)return!1;if(bt(l,o))return new s(o(l["*"]),a);if(Ut(l,o,n))return new s(l);if(c===T.Slice)return new s(o(l),a);throw new Xn(e)}}}});function bt(e,t){return sn(e?.constructor?.child,t)&&e["*"]}function Ut(e,t,n){if(n&$.IsMultiple){if(e?.constructor?.child?.child===t.child&&e["*"])return!0;if(n&$.IsSingle&&bt(e,t.child))return!0}return!1}function Js(e,t){const n=e?.[Symbol.toStringTag];if(n){const s=t[pe];if(s)switch(n){case s.name:case"DataView":return!0;case"ArrayBuffer":return s===Uint8Array||s===Int8Array;case"Uint8ClampedArray":return s===Uint8Array}if(t.child&&nn(e,t.child)!==void 0)return!0}return!1}A({definePrimitive(e,t){const{instance:{members:[n]}}=e,s=this.createApplier(e),{get:i,set:r}=this.defineMember(n),c=function(l){if(le(l,o))ne(this,l);else if(l&&typeof l=="object"){if(s.call(this,l)===0){const a=Xt(n);throw new Ie(e,a,l)}}else l!==void 0&&r.call(this,l)},o=this.createConstructor(e);return t.$={get:i,set:c},t[q]=b(c),t[Symbol.toPrimitive]=b(i),o},finalizePrimitive(e,t){const{instance:{members:[n]}}=e;t[En]=b(n.bitSize),t[vn]=b(n.type)}});A({init(){this.promiseCallbackMap=new Map,this.promiseContextMap=new Map,this.nextPromiseContextId=en(4096)},createPromise(e,t,n){const{constructor:s}=e;if(n){if(typeof n!="function")throw new se("function",n)}else t[Yt]=new Promise((o,l)=>{n=a=>{if(a?.[g]?.[C]&&(a=new a.constructor(a)),a instanceof Error)l(a);else{if(a){const f=t[we];f&&(a=f(a))}o(a)}}});const i=this.nextPromiseContextId++,r=this.obtainZigView(i,0,!1);this.promiseContextMap.set(i,{func:n,args:t});let c=this.promiseCallbackMap.get(s);return c||(c=(o,l)=>{const a=o instanceof DataView?o:o["*"][g],f=this.getViewAddress(a),u=this.promiseContextMap.get(f);if(u){const{func:h,args:y}=u;if(h.length===2){const p=l instanceof Error;h(p?l:null,p?null:l)}else h(l);y[oe](),this.promiseContextMap.delete(f)}},this.promiseCallbackMap.set(s,c),this.destructors.push(()=>this.freeFunction(c))),t[he]=o=>c(r,o),{ptr:r,callback:c}},createPromiseCallback(e,t){const{ptr:n,callback:s}=t,i=s["*"];return e[he]=r=>i.call(e,n,r),(...r)=>{const c=r.length===2?r[0]??r[1]:r[0];return e[he](c)}}});A({defineSlice(e,t){const{align:n,flags:s,instance:{members:[i]}}=e,{byteSize:r}=i,c=this,o=function(d,S,w){d||(d=c.allocateMemory(S*r,n,w)),this[g]=d,this[Se]=S},l=function(d,S){if(S!==this[Se])throw new it(e,this,d)},a=this.defineMember(i),{set:f}=a,u=this.createApplier(e),h=this.createInitializer(function(d,S){if(le(d,p))this[g]?l.call(this,d,d.length):o.call(this,null,d.length,S),ne(this,d),s&V.HasPointer&&this[_]("copy",P.Vivificate,d);else if(typeof d=="string"&&s&re.IsString)h.call(this,{string:d},S);else if(d?.[Symbol.iterator]){d=tn(d),this[g]?l.call(this,d,d.length):o.call(this,null,d.length,S);let w=0;for(const v of d)p[ye]?.validateValue(v,w,d.length),f.call(this,w++,v,S)}else if(typeof d=="number")if(!this[g]&&d>=0&&isFinite(d))o.call(this,null,d,S);else throw new Ae(e,d,!this[g]);else if(d&&typeof d=="object"){if(u.call(this,d,S)===0)throw new Ae(e,d)}else if(d!==void 0)throw new Ae(e,d)}),y=function(d,S){const w=this[Se],v=this[g];d=d===void 0?0:Bt(d,w),S=S===void 0?w:Bt(S,w);const M=d*r,E=S*r-M;return c.obtainView(v.buffer,v.byteOffset+M,E)},p=this.createConstructor(e);return t.$={get:function(){return de(this,O.Slice)},set:h},t.length={get:Gs},s&re.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),s&re.IsString&&(t.string=this.defineString(e)),s&re.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=t[ue]=this.defineArrayEntries(),t.subarray={value(d,S){const w=y.call(this,d,S);return p(w)}},t.slice={value(d,S,w={}){const{zig:v=!1}=w,M=y.call(this,d,S),E=c.allocateMemory(M.byteLength,n,v),W=p(E);return te(E,M),W}},t[Symbol.iterator]=this.defineArrayIterator(),t[ze]=b(o),t[q]=b(h),t[oe]=this.defineFinalizerArray(a),t[ce]=s&V.HasObject&&this.defineVivificatorArray(e),t[_]=s&V.HasPointer&&this.defineVisitorArray(),t[nt]={value(){return de(this,O.Slice)}},t[tt]=b(O.Slice),p},finalizeSlice(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=b(s.structure.constructor),t[ye]=n&re.HasSentinel&&this.defineSentinel(e)}});function Gs(){return this[Se]}function Bt(e,t){return e=e|0,e<0?(e=t+e,e<0&&(e=0)):e>t&&(e=t),e}A({defineStruct(e,t){const{purpose:n,flags:s,length:i,instance:{members:r}}=e,c=r.find(p=>p.flags&D.IsBackingInt),o=c&&this.defineMember(c),l=this.createApplier(e),a=this.createInitializer(function(p,d){if(le(p,f))ne(this,p),s&V.HasPointer&&this[_]("copy",0,p);else if(p&&typeof p=="object")l.call(this,p,d);else if((typeof p=="number"||typeof p=="bigint")&&o)o.set.call(this,p);else if(p!==void 0)throw new Ie(e,"object",p)}),f=this.createConstructor(e),u=t[$e].value,h=t[dt].value,y=[];for(const p of r.filter(d=>!!d.name)){const{name:d,flags:S}=p,{set:w}=t[d]=this.defineMember(p);w&&(S&D.IsRequired&&(w.required=!0),u[d]=w,h.push(d)),y.push(d)}return t.$={get:st,set:a},t.length=b(i),t.entries=s&We.IsTuple&&this.defineVectorEntries(),t[Symbol.toPrimitive]=o&&{value(p){return p==="string"?Object.prototype.toString.call(this):o.get.call(this)}},t[Symbol.iterator]=n===U.Iterator?this.defineZigIterator():s&We.IsTuple?this.defineVectorIterator():this.defineStructIterator(),t[q]=b(a),t[ce]=s&V.HasObject&&this.defineVivificatorStruct(e),t[_]=s&V.HasPointer&&this.defineVisitorStruct(r),t[ue]=s&We.IsTuple?this.defineVectorEntries():this.defineStructEntries(),t[xe]=b(y),n===U.Allocator&&(t.alloc=this.defineAlloc(),t.free=this.defineFree(),t.dupe=this.defineDupe()),f}});A({defineVivificatorStruct(e){const{instance:{members:t}}=e,n={};for(const i of t.filter(r=>r.type===N.Object))n[i.slot]=i;const s=this;return{value(i){const r=n[i],{bitOffset:c,byteSize:o,structure:{constructor:l}}=r,a=this[B](),u=a.byteOffset+(c>>3);let h=o;if(h===void 0){if(c&7)throw new is(r);h=r.bitSize>>3}const y=s.obtainView(a.buffer,u,h,!a[Le]);return this[x][i]=l.call(wt,y)}}}});A({defineVector(e,t){const{flags:n,length:s,instance:{members:[i]}}=e,r=this.createApplier(e),c=this.createInitializer(function(a){if(le(a,o))ne(this,a),n&V.HasPointer&&this[_]("copy",P.Vivificate,a);else if(a?.[Symbol.iterator]){let f=a.length;if(typeof f!="number"&&(a=[...a],f=a.length),f!==s)throw new it(e,this,a);let u=0;for(const h of a)this[u++]=h}else if(a&&typeof a=="object"){if(r.call(this,a)===0)throw new Ae(e,a)}else if(a!==void 0)throw new Ae(e,a)}),o=this.createConstructor(e),{bitSize:l}=i;for(let a=0,f=0;a<s;a++,f+=l)n&V.HasPointer?t[a]=this.defineMember({...i,slot:a}):t[a]=this.defineMember({...i,bitOffset:f});return t.$={get:st,set:c},t.length=b(s),n&Pt.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),n&Pt.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=t[ue]=this.defineVectorEntries(),t[Symbol.iterator]=this.defineVectorIterator(),t[q]=b(c),t[ce]=n&V.HasObject&&this.defineVivificatorArray(e),t[_]=n&V.HasPointer&&this.defineVisitorArray(),o},finalizeVector(e,t){const{instance:{members:[n]}}=e;t.child=b(n.structure.constructor)}});A({defineVisitor(){return{value(e,t,n){let s;typeof e=="string"?s=qs[e]:s=e,s.call(this,t,n)}}}});function je(e,t,n,s){let i=this[x][e];if(!i)if(!(n&P.IgnoreUncreated))i=this[ce](e);else return;let r;s&&(r=s[x][e],!r)||i[_](t,n,r)}const qs={copy(e,t){const n=t[x][0];if(this[g][C]&&n&&!n[g][C])throw new fn;this[x][0]=n},clear(e){e&P.IsInactive&&(this[x][0]=void 0)},reset(){this[x][0]=void 0,this[_e]=void 0}};A({defineVisitorArgStruct(e){const t=[];let n;for(const[s,{slot:i,structure:r}]of e.entries())r.flags&V.HasPointer&&(s===0?n=i:t.push(i));return{value(s,i,r){if(!(i&P.IgnoreArguments)&&t.length>0)for(const c of t)je.call(this,c,s,i|P.IsImmutable,r);!(i&P.IgnoreRetval)&&n!==void 0&&je.call(this,n,s,i,r)}}}});A({defineVisitorErrorUnion(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)&&(i|=P.IsInactive),(!(i&P.IsInactive)||!(i&P.IgnoreInactive))&&je.call(this,n,s,i,r)}}}});A({defineVisitorOptional(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)||(i|=P.IsInactive),(!(i&P.IsInactive)||!(i&P.IgnoreInactive))&&je.call(this,n,s,i,r)}}}});A({defineVisitorStruct(e){const t=e.filter(n=>n.structure?.flags&V.HasPointer).map(n=>n.slot);return{value(n,s,i){for(const r of t)je.call(this,r,n,s,i)}}}});export{Xs as c};
