var un=Object.defineProperty;var hn=(t,e,n)=>e in t?un(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ie=(t,e,n)=>hn(t,typeof e!="symbol"?e+"":e,n);const V={Primitive:0,Array:1,Struct:2,Union:3,ErrorUnion:4,ErrorSet:5,Enum:6,Optional:7,Pointer:8,Slice:9,Vector:10,Opaque:11,ArgStruct:12,VariadicStruct:13,Function:14},Bt=Object.keys(V),$={HasValue:1,HasObject:2,HasPointer:4,HasSlot:8},je={IsSize:16},Mt={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128},R={IsExtern:16,IsPacked:32,IsIterator:64,IsTuple:128,IsAllocator:256,IsPromise:512,IsGenerator:1024,IsAbortSignal:2048,IsOptional:4096,IsReader:8192,IsWriter:16384},dn={IsOpenEnded:16},Ae={HasSelector:16},L={HasLength:16,IsMultiple:32,IsSingle:64,IsConst:128,IsNullable:256},X={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128,IsOpaque:256},Ot={IsGlobal:16},Ee={IsTypedArray:16,IsClampedArray:32},Qt={HasOptions:16,IsThrowing:32,IsAsync:64},k={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Literal:7,Null:8,Undefined:9,Unsupported:10},Le=Object.keys(k),tt={IsRequired:1,IsReadOnly:2,IsPartOfSet:4,IsMethod:16,IsBackingInt:64,IsString:128},ct={OK:0,Failure:1,Deadlock:2,Disabled:3},F={IsInactive:1,IsImmutable:2,IgnoreUncreated:4,IgnoreInactive:8,IgnoreArguments:16,IgnoreRetval:32};var Fe;const te=globalThis[Fe=Symbol.for("ZIGAR")]||(globalThis[Fe]={});function yn(t){return te[t]||(te[t]=Symbol(t))}function x(t){return yn(t)}const p=x("memory"),M=x("slots"),de=x("parent"),C=x("zig"),ee=x("name"),xt=x("type"),Re=x("flags"),Ht=x("class"),xe=x("tag"),At=x("props"),pt=x("pointer"),ft=x("sentinel"),qt=x("array"),q=x("target"),lt=x("entries"),ht=x("max length"),le=x("keys"),Ne=x("address"),mt=x("length"),Tt=x("last address"),Dt=x("last length"),Lt=x("proxy"),_t=x("cache"),ye=x("size"),mn=x("bit size"),Y=x("align"),Vt=x("const target"),Q=x("environment"),bn=x("attributes"),pn=x("primitive"),$t=x("setters"),ut=x("typed array"),De=x("throwing"),He=x("promise"),wn=x("generator"),me=x("allocator"),ae=x("signature"),It=x("string retval"),vt=x("update"),_=x("restore"),zt=x("reset"),st=x("vivificate"),P=x("visit"),U=x("copy"),Ct=x("shape"),G=x("initialize"),gn=x("restrict"),et=x("finalize"),Pt=x("cast"),at=x("return"),Sn=x("yield");function B(t,e,n){if(n){const{set:s,get:i,value:o,enumerable:r,configurable:c=!0,writable:a=!0}=n;Object.defineProperty(t,e,i||s?{get:i,set:s,configurable:c,enumerable:r}:{value:o,configurable:c,enumerable:r,writable:a})}return t}function yt(t,e){for(const[n,s]of Object.entries(e))B(t,n,s);for(const n of Object.getOwnPropertySymbols(e)){const s=e[n];B(t,n,s)}return t}function g(t){return t!==void 0?{value:t}:void 0}function be(t){return(t==null?void 0:t.error)==="return"?e=>{try{return e()}catch(n){return n}}:e=>e()}function Ue({type:t,bitSize:e}){switch(t){case k.Bool:return"boolean";case k.Int:case k.Uint:if(e>32)return"bigint";case k.Float:return"number"}}function Be(t,e="utf-8"){const n=ne[e]||(ne[e]=new TextDecoder(e));let s;if(Array.isArray(t))if(t.length===1)s=t[0];else{let i=0;for(const c of t)i+=c.length;const{constructor:o}=t[0];s=new o(i);let r=0;for(const c of t)s.set(c,r),r+=c.length}else s=t;return s.buffer[Symbol.toStringTag]==="SharedArrayBuffer"&&(s=new s.constructor(s)),n.decode(s)}function _e(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,s=new Uint16Array(n);for(let i=0;i<n;i++)s[i]=t.charCodeAt(i);return s}default:return(se[e]||(se[e]=new TextEncoder)).encode(t)}}function In(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function An(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<n.byteLength;s++)n[s]=e.charCodeAt(s);return new DataView(n.buffer)}const ne={},se={};function Ze(t,e,n){let s=0,i=t.length;if(i===0)return 0;for(;s<i;){const o=Math.floor((s+i)/2);n(t[o])<=e?s=o+1:i=o}return i}const En=function(t,e){return e?!!(t&e-1):!1},xn=function(t,e){return t+(e-1)&~(e-1)},Vn=0,Zt=4294967295,kt=-1,Ge=function(t){return Number(t)},vn=function(t){return t===2863311530||t===-1431655766},dt=function(t,e){return t+e};function We(t){var i;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),s=(i=n.value)==null?void 0:i.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let o;for(;!(o=e.next()).done;)yield o.value}(),{length:s});{const o=[];let r=n;for(;!r.done;)o.push(r.value),r=e.next();return o}}function Je(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function qe(t,e){return t===e||(t==null?void 0:t[ae])===e[ae]&&(t==null?void 0:t[Q])!==(e==null?void 0:e[Q])}function it(t,e){return t instanceof e||qe(t==null?void 0:t.constructor,e)}function Rt({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}function pe(){return this}function we(){return this[Lt]}function Mn(){return String(this)}function Gt(){}class Ye{constructor(){Ie(this,"map",new WeakMap)}find(e){return this.map.get(e)}save(e,n){return this.map.set(e,n),n}}const Wt={name:"",mixins:[]};function I(t){return Wt.mixins.includes(t)||Wt.mixins.push(t),t}function On(){return Tn(Wt.name,Wt.mixins)}function Tn(t,e){const n=[],s=function(){for(const o of n)o.call(this)},{prototype:i}=s;B(s,"name",g(t));for(const o of e)for(let[r,c]of Object.entries(o))if(r==="init")n.push(c);else{if(typeof c!="function"){let a=i[r];if(a!==void 0){if((a==null?void 0:a.constructor)===Object)c=Object.assign({...a},c);else if(a!==c)throw new Error(`Duplicate property: ${r}`)}}B(i,r,g(c))}return s}function Os(){const t=On();return new t}I({init(){this.accessorCache=new Map},getAccessor(t,e){var u;const{type:n,bitSize:s,bitOffset:i,byteSize:o}=e,r=[],c=o===void 0&&(s&7||i&7);c&&r.push("Unaligned");let a=Le[n];s>32&&(n===k.Int||n===k.Uint)&&(s<=64?a=`Big${a}`:a=`Jumbo${a}`),r.push(a,`${n===k.Bool&&o?o*8:s}`),c&&r.push(`@${i}`);const l=t+r.join("");let f=DataView.prototype[l];if(f||(f=this.accessorCache.get(l),f))return f;for(;r.length>0;){const h=`getAccessor${r.join("")}`;if(f=(u=this[h])==null?void 0:u.call(this,t,e))break;r.pop()}if(!f)throw new Error(`No accessor available: ${l}`);return B(f,"name",g(l)),this.accessorCache.set(l,f),f}});I({getAccessorBool(t,e){const{byteSize:n}=e,s=n*8,i=this.getAccessor(t,{type:k.Uint,bitSize:s,byteSize:n});if(t==="get")return function(o,r){return!!i.call(this,o,r)};{const o=s<=32?0:0n,r=s<=32?1:1n;return function(c,a,l){i.call(this,c,a?r:o,l)}}}});I({getAccessorUint(t,e){const{bitSize:n,byteSize:s}=e;if(s){const i=this.getAccessor(t,{...e,bitSize:s*8}),o=2**n-1;return t==="get"?function(r,c){return i.call(this,r,c)&o}:function(r,c,a){const l=c&o;i.call(this,r,l,a)}}}});class Cn extends SyntaxError{constructor(e){super(`Cannot convert ${e} to an Int`)}}class $n extends TypeError{constructor(){super("Unsupported")}}class Ke extends TypeError{constructor(e){const{name:n}=e;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class Xe extends TypeError{constructor(e,n,s=null){const{name:i,type:o,byteSize:r}=e,c=n.byteLength,a=r!==1?"s":"";let l;if(o===V.Slice&&!s)l=`${i} has elements that are ${r} byte${a} in length, received ${c}`;else{const f=o===V.Slice?s.length*r:r;l=`${i} has ${f} byte${a}, received ${c}`}super(l)}}class zn extends TypeError{constructor(e){const{type:n,byteSize:s,typedArray:i}=e,o=s!==1?"s":"",r=["ArrayBuffer","DataView"].map(Et);i&&r.push(Et(i.name));let c;n===V.Slice?c=`Expecting ${ue(r)} that can accommodate items ${s} byte${o} in length`:c=`Expecting ${ue(r)} that is ${s} byte${o} in length`,super(c)}}class Pn extends TypeError{constructor(e,n){const{name:s}=e;let i;typeof n=="number"||typeof n=="bigint"?i=`Value given does not correspond to an item of enum ${s}: ${n}`:i=`Enum item of the type ${s} expected, received ${n}`,super(i)}}class kn extends TypeError{constructor(e,n){const{name:s}=e,i=typeof n;let o;i==="string"||i==="number"||Ft(n)?(Ft(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),o=`Error ${i} does not corresponds to any error in error set ${s}: ${n}`):o=`Error of the type ${s} expected, received ${n}`,super(o)}}class Qe extends TypeError{constructor(e){const{name:n}=e;super(`Error given is not a part of error set ${n}`)}}class wt extends TypeError{constructor(e,n,s){const{name:i}=e,o=[];if(Array.isArray(n))for(const c of n)o.push(Et(c));else o.push(Et(n));const r=nn(s);super(`${i} expects ${ue(o)} as argument, received ${r}`)}}class bt extends wt{constructor(e,n,s=!1){var l;const{instance:{members:[i]},type:o,constructor:r}=e,c=[],a=Ue(i);if(a){let f;switch((l=i.structure)==null?void 0:l.type){case V.Enum:f="enum item";break;case V.ErrorSet:f="error";break;default:f=a}c.push(`array of ${f}s`)}else c.push("array of objects");r[ut]&&c.push(r[ut].name),o===V.Slice&&s&&c.push("length"),super(e,c.join(" or "),n)}}class Yt extends TypeError{constructor(e,n,s){const{name:i,length:o,instance:{members:[r]}}=e,{structure:{constructor:c}}=r,{length:a,constructor:l}=s,f=(n==null?void 0:n.length)??o,u=f!==1?"s":"";let h;l===c?h="only a single one":l.child===c?h=`a slice/array that has ${a}`:h=`${a} initializer${a>1?"s":""}`,super(`${i} has ${f} element${u}, received ${h}`)}}class Ve extends TypeError{constructor(e,n){e<0?super("Length of slice cannot be negative"):super(`Length of slice can be ${n} or less, received ${e}`)}}class Fn extends TypeError{constructor(e,n){const{name:s}=e;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class jn extends TypeError{constructor(e,n){const{name:s,instance:{members:i}}=e,o=i.find(c=>c.name===n);let r;o?r=`Comptime value cannot be changed: ${n}`:r=`${s} does not have a property with that name: ${n}`,super(r)}}class Ln extends Error{constructor(e,n,s=!1){super();const i=o=>{e-=o,n-=o;const r=e!==1?"s":"",c=s?"at least ":"";this.message=`Expecting ${c}${e} argument${r}, received ${n}`,this.stack=ge(this.stack,"new Arg(")};i(0),B(this,vt,{value:i,enumerable:!1})}}class Rn extends Error{constructor(){super("Undefined argument")}}class Nn extends TypeError{constructor(){super("Non-slice pointers can only be created with the help of the new operator")}}class Dn extends TypeError{constructor(){super("Casting to function is not allowed")}}class Hn extends TypeError{constructor(e,n){const{name:s}=e,{constructor:{name:i}}=n;super(`Conversion of ${i} to ${s} requires an explicit cast`)}}class ve extends TypeError{constructor(e,n,s,i){const{name:o}=e;super(`${o} expects the sentinel value ${n} at ${i-1}, found at ${s}`)}}class ie extends TypeError{constructor(e,n,s){const{name:i}=e;super(`${i} expects the sentinel value ${n} at ${s-1}`)}}class Un extends TypeError{constructor(e,n){super(`Unable to simultaneously align memory to ${n}-byte and ${e}-byte boundary`)}}class nt extends TypeError{constructor(e,n){const s=nn(n);super(`Expected ${Et(e)}, received ${s}`)}}class Bn extends TypeError{constructor(){super("Null pointer")}}class tn extends TypeError{constructor(e){super(`Object has been freed already: ${e.constructor.name}`)}}class Me extends TypeError{constructor(e,n){const{name:s}=e;let i;if(n!=null){const o=n instanceof Object&&n.constructor!==Object?`${n.constructor.name} object`:typeof n;i=`${sn(o)} ${o}`}else i=n+"";super(`${s} cannot point to ${i}`)}}class en extends TypeError{constructor(){super("Pointers in Zig memory cannot point to garbage-collected object")}}class fe extends RangeError{constructor(e,n){const{name:s}=e;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Oe extends TypeError{constructor(e){const{name:n}=e,s=n!==void 0?`Property ${n}`:"Element";super(`${s} can only be undefined`)}}class _n extends TypeError{constructor(e){const{name:n,structure:{name:s}}=e;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class Zn extends TypeError{constructor(){super("Unable to modify read-only object")}}class Gn extends TypeError{constructor(e){const{name:n}=e;super(`${n} cannot point to a read-only object`)}}class Wn extends TypeError{constructor(){super("Unexpected async generator")}}class Ut extends Error{constructor(e,n=0){if(e instanceof Error)return super(e.message),e.stack=ge(this.stack,n),e;super(e??"Error encountered in Zig code")}}class Jn extends Ut{constructor(e){super("Program exited"),this.code=e}}function qn(t,e){const n=s=>{e-=s,t.message=`args[${e}]: ${t.message}`,t.stack=ge(t.stack,"new Arg(")};return n(0),B(t,vt,{value:n,enumerable:!1}),t}function ge(t,e){if(typeof t=="string"){const n=t.split(`
`),s=n.findIndex(i=>i.includes(e));s!==-1&&(n.splice(1,s),t=n.join(`
`))}return t}function Te(t,e,n){return n instanceof RangeError&&!(n instanceof fe)&&(n=new fe(t,e)),n}function gt(){throw new Zn}function Yn(t){let e=t.replace(/_/g," ");try{e=e.replace(new RegExp("(\\p{Uppercase}+)(\\p{Lowercase}*)","gu"),(n,s,i)=>s.length===1?` ${s.toLocaleLowerCase()}${i}`:i?n:` ${s}`).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Ft(t){return typeof t=="object"&&typeof t.error=="string"&&Object.keys(t).length===1}function nn(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,Et(n)}function Et(t){return`${sn(t)} ${t}`}function sn(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function ue(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}I({defineAlloc(){return{value(t,e=1){const n=Math.clz32(e);if(e!==1<<31-n)throw new Error(`Invalid alignment: ${e}`);const s=31-n,{vtable:{alloc:i},ptr:o}=this,r=i(o,t,s,0);if(!r)throw new Error("Out of memory");r.length=t;const c=r["*"][p];return c[C].align=e,c}}},defineFree(){const t=this;return{value(e){const{dv:n,align:s}=Ce(e),i=n==null?void 0:n[C];if(!i)throw new nt("object containing allocated Zig memory",e);const{address:o}=i;if(o===kt)throw new tn(e);const{vtable:{free:r},ptr:c}=this,a=31-Math.clz32(s);r(c,n,a,0),t.releaseZigView(n)}}},defineDupe(){const t=this.getCopyFunction();return{value(e){const{dv:n,align:s,constructor:i}=Ce(e);if(!n)throw new nt("string, DataView, typed array, or Zig object",e);const o=this.alloc(n.byteLength,s);return t(o,n),i?i(o):o}}}});function Ce(t){var i;let e,n=1,s=null;if(t instanceof DataView){e=t;const o=(i=e==null?void 0:e[C])==null?void 0:i.align;o&&(n=o)}else if(t instanceof ArrayBuffer)e=new DataView(t);else if(t)if(t[p])t.constructor[xt]===V.Pointer&&(t=t["*"]),e=t[p],s=t.constructor,n=s[Y];else{typeof t=="string"&&(t=_e(t));const{buffer:o,byteOffset:r,byteLength:c,BYTES_PER_ELEMENT:a}=t;o&&r!==void 0&&c!==void 0&&(e=new DataView(o,r,c),n=a)}return{dv:e,align:n,constructor:s}}I({init(){this.jsFunctionThunkMap=new Map,this.jsFunctionCallerMap=new Map,this.jsFunctionControllerMap=new Map,this.jsFunctionIdMap=new WeakMap,this.jsFunctionNextId=1},getFunctionId(t){let e=this.jsFunctionIdMap.get(t);return e===void 0&&(e=this.jsFunctionNextId++,this.jsFunctionIdMap.set(t,e)),e},getFunctionThunk(t,e){const n=this.getFunctionId(t);let s=this.jsFunctionThunkMap.get(n);if(s===void 0){const i=this.getViewAddress(e[p]),o=this.createJsThunk(i,n);if(!o)throw new Error("Unable to create function thunk");s=this.obtainZigView(o,0),this.jsFunctionThunkMap.set(n,s),this.jsFunctionControllerMap.set(n,e)}return s},createInboundCaller(t,e){const n=(i,o)=>{let r=ct.OK,c=!1;try{const a=e(i);if(P in a){a[P]("reset");const u=this.startContext();this.updatePointerTargets(u,a,!0),this.updateShadowTargets(u),this.endContext()}const l=function(u){try{if(e[De]&&u instanceof Error)a[at](u);else throw u}catch{r=ct.Failure,console.error(u)}},f=function(u){try{a[at](u)}catch(h){r=ct.Failure,console.error(h)}};try{const u=t(...a),h=a.hasOwnProperty(at);if((u==null?void 0:u[Symbol.toStringTag])==="Promise")if(o||h){const y=u.then(f,l);o&&y.then(()=>this.finalizeAsyncCall(o,r)),c=!0,r=ct.OK}else r=ct.Deadlock;else if(u!=null&&u[Symbol.asyncIterator])if(a.hasOwnProperty(Sn))this.pipeContents(u,a),r=ct.OK;else throw new Wn;else(u!=null||!h)&&f(u)}catch(u){l(u)}}catch(a){console.error(a),r=ct.Failure}return o&&!c&&this.finalizeAsyncCall(o,r),r},s=this.getFunctionId(t);return this.jsFunctionCallerMap.set(s,n),function(...i){return t(...i)}},defineArgIterator(t){const e=this,n=t.filter(({structure:s})=>s.type===V.Struct&&s.flags&R.IsAllocator).length;return{value(){var a;let s,i=0,o=0,r=0;const c=[];for(const[l,{structure:f,type:u}]of t.entries())try{let h=this[l];u===k.Object&&((a=h==null?void 0:h[p])!=null&&a[C])&&(h=new h.constructor(h));let y,d;f.type===V.Struct&&(f.flags&R.IsAllocator?(y=n===1?"allocator":`allocator${++i}`,d=this[me]=h):f.flags&R.IsPromise?(y="callback",++o===1&&(d=e.createPromiseCallback(this,h))):f.flags&R.IsGenerator?(y="callback",++o===1&&(d=e.createGeneratorCallback(this,h))):f.flags&R.IsAbortSignal&&(y="signal",++r===1&&(d=e.createInboundSignal(h)))),y!==void 0?d!==void 0&&(s||(s={}),s[y]=d):c.push(h)}catch(h){c.push(h)}return s&&c.push(s),c[Symbol.iterator]()}}},handleJsCall(t,e,n,s=0){const i=this.obtainZigView(e,n,!1),o=this.jsFunctionCallerMap.get(t);return o?o(i,s):ct.Failure},releaseFunction(t){const e=this.jsFunctionThunkMap.get(t),n=this.jsFunctionControllerMap.get(t);if(e&&n){const s=this.getViewAddress(n[p]),i=this.getViewAddress(e);this.destroyJsThunk(s,i),this.releaseZigView(e),t&&(this.jsFunctionThunkMap.delete(t),this.jsFunctionCallerMap.delete(t),this.jsFunctionControllerMap.delete(t))}},freeFunction(t){this.releaseFunction(this.getFunctionId(t))},exports:{handleJsCall:{argType:"iiii",returnType:"i"},releaseFunction:{argType:"i"}},imports:{createJsThunk:{argType:"ii",returnType:"i"},destroyJsThunk:{argType:"ii",returnType:"i"},finalizeAsyncCall:{argType:"ii"}}});I({createOutboundCaller(t,e){const n=this,s=function(...i){if(!n.runThunk)return n.initPromise.then(()=>s(...i));const o=new e(i,this==null?void 0:this[me]);try{return n.invokeThunk(t,s,o)}catch(r){if(r instanceof Jn&&r.code===0)return;throw r}};return s},copyArguments(t,e,n,s,i){let o=0,r=0,c=0;const a=t[$t];for(const{type:l,structure:f}of n){let u,h,y,d;if(f.type===V.Struct&&(f.flags&R.IsAllocator?u=(++c===1?(s==null?void 0:s.allocator)??(s==null?void 0:s.allocator1):s==null?void 0:s[`allocator${c}`])??this.createDefaultAllocator(t,f):f.flags&R.IsPromise?(h||(h=this.createPromise(f,t,s==null?void 0:s.callback)),u=h):f.flags&R.IsGenerator?(y||(y=this.createGenerator(f,t,s==null?void 0:s.callback)),u=y):f.flags&R.IsAbortSignal?(d||(d=this.createSignal(f,s==null?void 0:s.signal)),u=d):f.flags&R.IsReader?u=this.createReader(e[r++]):f.flags&R.IsWriter&&(u=this.createWriter(e[r++]))),u===void 0&&(u=e[r++],u===void 0&&l!==k.Void))throw new Rn;try{a[o++].call(t,u,i)}catch(S){throw qn(S,o-1)}}},invokeThunk(t,e,n){var y;const s=this.startContext(),i=n[bn],o=this.getViewAddress(t[p]),r=this.getViewAddress(e[p]),c=et in n,a=P in n;a&&this.updatePointerAddresses(s,n);const l=this.getShadowAddress(s,n,null,!1),f=i?this.getShadowAddress(s,i):0;this.updateShadows(s);const u=()=>{var d,S;this.updateShadowTargets(s),a&&this.updatePointerTargets(s,n),this.libc&&((d=this.flushStdout)==null||d.call(this)),(S=this.flushConsole)==null||S.call(this),this.endContext()};if(c&&(n[et]=u),!(i?this.runVariadicThunk(o,r,l,f,i.length):this.runThunk(o,r,l)))throw u(),new Ut;if((y=n[U])==null||y.call(n,this.findShadowView(n[p])),c){let d=null;try{d=n.retval}catch(S){d=new Ut(S,1)}return d!=null?(e[It]&&d&&(d=d.string),n[at](d)):e[It]&&(n[It]=!0),n[He]??n[wn]}else{u();try{const{retval:d}=n;return e[It]&&d?d.string:d}catch(d){throw new Ut(d,1)}}},imports:{runThunk:{argType:"iii",returnType:"b"},runVariadicThunk:{argType:"iiiii",returnType:"b"}}});I({init(){const t={type:k.Int,bitSize:8,byteSize:1},e={type:k.Int,bitSize:16,byteSize:2},n={type:k.Int,bitSize:32,byteSize:4},s=this.getAccessor("get",t),i=this.getAccessor("set",t),o=this.getAccessor("get",e),r=this.getAccessor("set",e),c=this.getAccessor("get",n),a=this.getAccessor("set",n);this.copiers={0:Gt,1:function(l,f){i.call(l,0,s.call(f,0))},2:function(l,f){r.call(l,0,o.call(f,0,!0),!0)},4:function(l,f){a.call(l,0,c.call(f,0,!0),!0)},8:function(l,f){a.call(l,0,c.call(f,0,!0),!0),a.call(l,4,c.call(f,4,!0),!0)},16:function(l,f){a.call(l,0,c.call(f,0,!0),!0),a.call(l,4,c.call(f,4,!0),!0),a.call(l,8,c.call(f,8,!0),!0),a.call(l,12,c.call(f,12,!0),!0)},any:function(l,f){let u=0,h=l.byteLength;for(;u+4<=h;)a.call(l,u,c.call(f,u,!0),!0),u+=4;for(;u+1<=h;)i.call(l,u,s.call(f,u)),u++}},this.resetters={0:Gt,1:function(l,f){i.call(l,f,0)},2:function(l,f){r.call(l,f,0,!0)},4:function(l,f){a.call(l,f,0,!0)},8:function(l,f){a.call(l,f+0,0,!0),a.call(l,f+4,0,!0)},16:function(l,f){a.call(l,f+0,0,!0),a.call(l,f+4,0,!0),a.call(l,f+8,0,!0),a.call(l,f+12,0,!0)},any:function(l,f,u){let h=f;for(;h+4<=u;)a.call(l,h,0,!0),h+=4;for(;h+1<=u;)i.call(l,h,0),h++}}},defineCopier(t,e){const n=this.getCopyFunction(t,e);return{value(s){var r,c;(r=this[_])==null||r.call(this),(c=s[_])==null||c.call(s);const i=s[p],o=this[p];n(o,i)}}},defineResetter(t,e){const n=this.getResetFunction(e);return{value(){var i;(i=this[_])==null||i.call(this);const s=this[p];n(s,t,e)}}},getCopyFunction(t,e=!1){return(e?void 0:this.copiers[t])??this.copiers.any},getResetFunction(t){return this.resetters[t]??this.resetters.any},defineRetvalCopier({byteSize:t,bitOffset:e}){if(t>0){const n=this,s=e>>3,i=this.getCopyFunction(t);return{value(o){const r=this[p],{address:c}=o[C],a=new DataView(n.memory.buffer,c+s,t),l=new DataView(r.buffer,r.byteOffset+s,t);i(l,a)}}}},copyExternBytes(t,e,n){const{memory:s}=this,i=new DataView(s.buffer,e,n);this.getCopyFunction(n)(t,i)}});I({addIntConversion(t){return function(e,n){const s=t.call(this,e,n),{flags:i,bitSize:o}=n;if(e==="set")return o>32?function(r,c,a){s.call(this,r,BigInt(c),a)}:function(r,c,a){const l=Number(c);if(!isFinite(l))throw new Cn(c);s.call(this,r,l,a)};{const{flags:r}=n.structure;if(r&je.IsSize&&o>32){const c=BigInt(Number.MAX_SAFE_INTEGER),a=BigInt(Number.MIN_SAFE_INTEGER);return function(l,f){const u=s.call(this,l,f);return a<=u&&u<=c?Number(u):u}}}return s}}});I({init(){this.isMemoryMapping=!0,this.memoryList=[],this.contextCount=0},startContext(){return++this.contextCount,{shadowList:[]}},endContext(){if(--this.contextCount===0){for(const{shadowDV:t}of this.memoryList)t&&this.freeShadowMemory(t);this.memoryList.splice(0)}},getShadowAddress(t,e,n,s){const i=e[p];if(n){if(n.address===void 0){const{start:o,end:r,targets:c}=n;let a=0,l;for(const v of c){const E=v[p],j=E.byteOffset,z=v.constructor[Y]??E[Y];(a===void 0||z>a)&&(a=z,l=j)}const f=r-o,u=this.allocateShadowMemory(f+a,1),h=this.getViewAddress(u),y=xn(dt(h,l-o),a),d=dt(y,o-l);for(const v of c){const E=v[p],j=E.byteOffset;if(j!==l){const z=v.constructor[Y]??E[Y];if(En(dt(d,j-o),z))throw new Un(z,a)}}const S=u.byteOffset+Number(d-h),A=new DataView(u.buffer,S,f);A[C]={address:d,len:f,align:1,unalignedAddress:h,type:Kn.Scratch};const b=new DataView(i.buffer,Number(o),f),w=this.registerMemory(d,f,1,s,b,A);t.shadowList.push(w),n.address=d}return dt(n.address,i.byteOffset-n.start)}else{const o=e.constructor[Y]??i[Y],r=i.byteLength,c=this.allocateShadowMemory(r,o),a=this.getViewAddress(c),l=this.registerMemory(a,r,1,s,i,c);return t.shadowList.push(l),a}},updateShadows(t){const e=this.getCopyFunction();for(let{targetDV:n,shadowDV:s}of t.shadowList)s=this.restoreView(s),e(s,n)},updateShadowTargets(t){const e=this.getCopyFunction();for(let{targetDV:n,shadowDV:s,writable:i}of t.shadowList)i&&(s=this.restoreView(s),e(n,s))},registerMemory(t,e,n,s,i,o){const r=re(this.memoryList,t);let c=this.memoryList[r-1];return(c==null?void 0:c.address)===t&&c.len===e?c.writable||(c.writable=s):(c={address:t,len:e,align:n,writable:s,targetDV:i,shadowDV:o},this.memoryList.splice(r,0,c)),c},unregisterMemory(t,e){const n=re(this.memoryList,t),s=this.memoryList[n-1];if((s==null?void 0:s.address)===t&&s.len===e)return this.memoryList.splice(n-1,1),s},findMemory(t,e,n,s){let i=n*(s??0);const o=re(this.memoryList,e),r=this.memoryList[o-1];let c;if((r==null?void 0:r.address)===e&&r.len===i)c=r.targetDV;else if((r==null?void 0:r.address)<=e&&dt(e,i)<=dt(r.address,r.len)){const a=Number(e-r.address),l=s===void 0,{targetDV:f}=r;l&&(i=f.byteLength-a),c=this.obtainView(f.buffer,f.byteOffset+a,i),l&&(c[Y]=r.align)}if(!c)c=this.obtainZigView(e,i);else{let{targetDV:a,shadowDV:l}=r;l&&t&&!t.shadowList.includes(r)&&(l=this.restoreView(l),this.getCopyFunction()(a,l))}return c},findShadowView(t){for(const{shadowDV:e,targetDV:n}of this.memoryList)if(n===t)return e},releaseZigView(t){const e=t[C],n=e==null?void 0:e.address;n&&n!==kt&&(e.address=kt)},getViewAddress(t){const e=t[C];if(e)return e.address;{const n=this.getBufferAddress(t.buffer);return dt(n,t.byteOffset)}},imports:{allocateScratchMemory:{argType:"ii",returnType:"i"},freeScratchMemory:{argType:"iii"}},exports:{getViewAddress:{argType:"v",returnType:"i"}},usizeMaxBuffer:new ArrayBuffer(0),allocateShadowMemory(t,e){const n=t?this.allocateScratchMemory(t,e):0;if(!n&&t)throw new Error("Out of memory");const s=this.obtainZigView(n,t),i=s==null?void 0:s[C];return i&&(i.align=e),s},freeShadowMemory(t){const{address:e,unalignedAddress:n,len:s,align:i}=t[C];s&&this.freeScratchMemory(n??e,s,i),this.releaseZigView(t)},obtainZigView(t,e,n=!0){if(vn(t)&&(t=e>0?0:Zt),!t&&e)return null;let{buffer:s}=this.memory;t===Zt&&(s=this.usizeMaxBuffer,t=Vn,e=0);let i;return n?i=this.obtainView(s,t,e):(i=new DataView(s,t,e),i[C]={address:t,len:e}),i},getTargetAddress(t,e,n,s){const i=e[p];return i[C]?this.getViewAddress(i):i.byteLength===0?0:this.getShadowAddress(t,e,n,s)},getBufferAddress(t){return 0}});function re(t,e){return Ze(t,e,n=>n.address)}const Kn={Scratch:1};I({init(){this.abandoned=!1,this.destructors=[],this.nextValueIndex=1,this.valueMap=new Map,this.valueIndices=new Map,this.options=null,this.executable=null,this.memory=null,this.table=null,this.initialTableLength=0,this.exportedFunctions=null},abandonModule(){if(!this.abandoned){for(const t of this.destructors.reverse())t();this.abandoned=!0}},imports:{initialize:{argType:""}},exports:{displayPanic:{argType:"ii"}},async initialize(t){var e;(e=this.setCustomWASI)==null||e.call(this,t),await this.initPromise},getObjectIndex(t){if(t!=null){let e=this.valueIndices.get(t);return e===void 0&&(e=this.nextValueIndex++,this.valueIndices.set(t,e),this.valueMap.set(e,t)),e}else return 0},fromWebAssembly(t,e){switch(t){case"v":case"s":return this.valueMap.get(e);case"i":return e;case"b":return!!e}},toWebAssembly(t,e){switch(t){case"v":case"s":return this.getObjectIndex(e);case"i":return e;case"b":return e?1:0}},exportFunction(t,e="",n="",s){return t?(...i)=>{i=i.map((c,a)=>this.fromWebAssembly(e.charAt(a),c));const o=t.apply(this,i);return this.toWebAssembly(n,o)}:()=>{}},importFunction(t,e="",n=""){return(...s)=>{s=s.map((o,r)=>this.toWebAssembly(e.charAt(r),o));const i=t.apply(this,s);return this.fromWebAssembly(n,i)}},exportFunctions(){const t={};for(const[e,{argType:n,returnType:s,alias:i}]of Object.entries(this.exports)){const o=this[i??e];o&&(t[`_${e}`]=this.exportFunction(o,n,s,e))}return t},importFunctions(t){for(const[e,{argType:n,returnType:s}]of Object.entries(this.imports)){const i=t[e];i&&(B(this,e,g(this.importFunction(i,n,s))),this.destructors.push(()=>this[e]=Xn))}},async instantiateWebAssembly(t,e){var A;const{memoryInitial:n,memoryMax:s,tableInitial:i,multithreaded:o}=this.options=e,r=await t,c=r[Symbol.toStringTag]==="Response"?"Streaming":"",a=WebAssembly,l=a["compile"+c],f=this.executable=await l(r),u=this.exportFunctions(),h={},y={},d={},S=this.exportedModules={env:h,wasi:y,wasi_snapshot_preview1:d};for(const{module:b,name:w,kind:v}of a.Module.imports(f))v==="function"&&(b==="env"?h[w]=u[w]??Gt:b==="wasi_snapshot_preview1"?d[w]=this.getWASIHandler(w):b==="wasi"&&(y[w]=((A=this.getThreadHandler)==null?void 0:A.call(this,w))??Gt));return this.memory=h.memory=new a.Memory({initial:n,maximum:s,shared:o}),this.table=h.__indirect_function_table=new a.Table({initial:i,element:"anyfunc",shared:o}),this.initialTableLength=i,a.instantiate(f,S)},loadModule(t,e){return this.initPromise=(async()=>{var i,o;const n=await this.instantiateWebAssembly(t,e),{exports:s}=n;if(this.importFunctions(s),this.customWASI){const r={...s,memory:this.memory},c=new Proxy(n,{get(a,l){return l==="exports"?r:a[l]}});(o=(i=this.customWASI).initialize)==null||o.call(i,c)}this.initialize()})()},displayPanic(t,e){const n=new Uint8Array(this.memory.buffer,t,e),s=Be(n);console.error(`Zig panic: ${s}`)}});const Xn=()=>{throw new Error("Module was abandoned")};I({updatePointerAddresses(t,e){const n=new Map,s=new Map,i=[],o=function(l){var u;const f=this[pt];if(n.get(f)===void 0){const h=f[M][0];if(h){const y=!f.constructor.const,d={target:h,writable:y},S=h[p];if(S[C])n.set(f,null);else{n.set(f,h);const A=s.get(S.buffer);if(A){const b=Array.isArray(A)?A:[A],w=Ze(b,S.byteOffset,v=>v.target[p].byteOffset);b.splice(w,0,d),Array.isArray(A)||(s.set(S.buffer,b),i.push(b))}else s.set(S.buffer,d);(u=h[P])==null||u.call(h,o,0)}}}},r=F.IgnoreRetval|F.IgnoreInactive;e[P](o,r);const c=this.findTargetClusters(i),a=new Map;for(const l of c)for(const f of l.targets)a.set(f,l);for(const[l,f]of n)if(f){const u=a.get(f),h=(u==null?void 0:u.writable)??!l.constructor.const;l[Ne]=this.getTargetAddress(t,f,u,h),mt in l&&(l[mt]=f.length)}},updatePointerTargets(t,e,n=!1){const s=new Map,i=function(r){var a,l;const c=this[pt];if(!s.get(c)){s.set(c,!0);const f=c[M][0],u=!f||!(r&F.IsImmutable)?c[vt](t,!0,!(r&F.IsInactive)):f,h=c.constructor.const?F.IsImmutable:0;h&F.IsImmutable||f&&!f[p][C]&&((a=f[P])==null||a.call(f,i,h)),u!==f&&u&&!u[p][C]&&((l=u==null?void 0:u[P])==null||l.call(u,i,h))}},o=n?F.IgnoreRetval:0;e[P](i,o)},findTargetClusters(t){const e=[];for(const n of t){let s=null,i=0,o=0,r=null;for(const{target:c,writable:a}of n){const l=c[p],{byteOffset:f,byteLength:u}=l,h=f+u;let y=!0;s&&(o>f?(r?r.writable||(r.writable=a):(r={targets:[s],start:i,end:o,address:void 0,misaligned:void 0,writable:a},e.push(r)),r.targets.push(c),h>o?r.end=h:y=!1):r=null),y&&(s=c,i=f,o=h)}}return e}});I({init(){this.viewMap=new WeakMap},extractView(t,e,n=ts){var a;const{type:s,byteSize:i,constructor:o}=t;let r;const c=e==null?void 0:e[Symbol.toStringTag];if(c&&(c==="DataView"?r=this.registerView(e):c==="ArrayBuffer"?r=this.obtainView(e,0,e.byteLength):(c&&c===((a=o[ut])==null?void 0:a.name)||c==="Uint8ClampedArray"&&o[ut]===Uint8Array)&&(r=this.obtainView(e.buffer,e.byteOffset,e.byteLength))),!r){const l=e==null?void 0:e[p];if(l){const{constructor:f,instance:{members:[u]}}=t;if(it(e,f))return l;if(Qn(s)){const{byteSize:h,structure:{constructor:y}}=u,d=Je(e,y);if(d!==void 0){if(s===V.Slice||d*h===i)return l;throw new Yt(t,null,e)}}}}return r?i!==void 0&&$e(r,t):n==null||n(t,e),r},assignView(t,e,n,s,i){var a,l,f,u;const{byteSize:o,type:r}=n,c=o??1;if(t[p]){const h=r===V.Slice?c*t.length:c;if(e.byteLength!==h)throw new Xe(n,e,t);const y={[p]:e};(u=(f=t.constructor[ft])==null?void 0:f.validateData)==null||u.call(f,y,t.length),t[U](y)}else{o!==void 0&&$e(e,n);const h=e.byteLength/c,y={[p]:e};(l=(a=t.constructor[ft])==null?void 0:a.validateData)==null||l.call(a,y,h),i&&(s=!0),t[Ct](s?null:e,h,i),s&&t[U](y)}},findViewAt(t,e,n){var o;let s=this.viewMap.get(t),i;if(s)if(s instanceof DataView)if(s.byteOffset===e&&s.byteLength===n)i=s,s=null;else{const r=s,c=`${r.byteOffset}:${r.byteLength}`;s=new Map([[c,r]]),this.viewMap.set(t,s)}else i=s.get(`${e}:${n}`);return((o=i==null?void 0:i[C])==null?void 0:o.address)===kt&&(i=null),{existing:i,entry:s}},obtainView(t,e,n){var r;const{existing:s,entry:i}=this.findViewAt(t,e,n);let o;return s||(o=new DataView(t,e,n),i?i.set(`${e}:${n}`,o):this.viewMap.set(t,o),(t===((r=this.memory)==null?void 0:r.buffer)||t===this.usizeMaxBuffer)&&(o[C]={address:e,len:n}),o)},registerView(t){if(!t[C]){const{buffer:e,byteOffset:n,byteLength:s}=t,{existing:i,entry:o}=this.findViewAt(e,n,s);if(i)return i;o?o.set(`${n}:${s}`,t):this.viewMap.set(e,t)}return t},allocateMemory(t,e=0,n=null){var s;return((s=n==null?void 0:n.alloc)==null?void 0:s.call(n,t,e))??this.allocateJSMemory(t,e)},allocateJSMemory(t,e){return this.obtainView(new ArrayBuffer(t),0,t)},restoreView(t){const e=t==null?void 0:t[C];return(e==null?void 0:e.len)>0&&t.buffer.byteLength===0&&(t=this.obtainZigView(e.address,e.len),e.align&&(t[C].align=e.align)),t},defineRestorer(){const t=this;return{value(){var s,i;const e=this[p],n=t.restoreView(e);if(e!==n){const o=this[Vt]??this;return o[p]=n,(i=(s=o.constructor[_t])==null?void 0:s.save)==null||i.call(s,n,o[Lt]??o),!0}else return!1}}}});function $e(t,e){const{byteSize:n,type:s}=e;if(!(s===V.Slice?t.byteLength%n===0:t.byteLength===n))throw new Xe(e,t)}function Qn(t){return t===V.Array||t===V.Vector||t===V.Slice}function ts(t){throw new zn(t)}I({makeReadOnly(t){rn(t)}});const es=Object.getOwnPropertyDescriptors,Jt=Object.defineProperty;function rn(t){const e=t[pt];if(e)oe(e,["length"]);else{const n=t[qt];n?(oe(n),ns(n)):oe(t)}}function oe(t,e=[]){const n=es(t.constructor.prototype);for(const[s,i]of Object.entries(n))i.set&&!e.includes(s)&&(i.set=gt,Jt(t,s,i));Jt(t,Vt,{value:t})}function ns(t){Jt(t,"set",{value:gt});const e=t.get;Jt(t,"get",{value:function(s){const i=e.call(this,s);return(i==null?void 0:i[Vt])===null&&rn(i),i}})}I({defineArrayEntries(){return g(rs)},defineArrayIterator(){return g(ss)}});function ss(){const t=this[qt]??this,e=this.length;let n=0;return{next(){let s,i;if(n<e){const o=n++;s=t.get(o),i=!1}else i=!0;return{value:s,done:i}}}}function is(t){const e=be(t),n=this[qt]??this,s=this.length;let i=0;return{next(){let o,r;if(i<s){const c=i++;o=[c,e(()=>n.get(c))],r=!1}else r=!0;return{value:o,done:r}}}}function rs(t){return{[Symbol.iterator]:is.bind(this,t),length:this.length}}I({defineStructEntries(){return g(on)},defineStructIterator(){return g(os)}});function on(t){return{[Symbol.iterator]:cs.bind(this,t),length:this[At].length}}function os(t){return on.call(this,t)[Symbol.iterator]()}function cs(t){const e=be(t),n=this,s=this[At];let i=0;return{next(){let o,r;if(i<s.length){const c=s[i++];o=[c,e(()=>n[c])],r=!1}else r=!0;return{value:o,done:r}}}}I({defineVectorEntries(){return g(fs)},defineVectorIterator(){return g(ls)}});function ls(){const t=this,e=this.length;let n=0;return{next(){let s,i;if(n<e){const o=n++;s=t[o],i=!1}else i=!0;return{value:s,done:i}}}}function as(){const t=this,e=this.length;let n=0;return{next(){let s,i;if(n<e){const o=n++;s=[o,t[o]],i=!1}else i=!0;return{value:s,done:i}}}}function fs(){return{[Symbol.iterator]:as.bind(this),length:this.length}}I({defineMember(t,e=!0){if(!t)return{};const{type:n,structure:s}=t,i=`defineMember${Le[n]}`,r=this[i].call(this,t);if(e&&s){const{type:c}=s,a=`transformDescriptor${Bt[c]}`,l=this[a];if(l)return l.call(this,r,t)}return r}});function cn(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(s,i){return n.call(this,t,s,i)}:void 0}:{get:e,set:n}}I({defineBase64(t){const e=this;return Rt({get(){return In(this.dataView)},set(n,s){if(typeof n!="string")throw new nt("string",n);const i=An(n);e.assignView(this,i,t,!1,s)}})}});I({defineMemberBool(t){return this.defineMemberUsing(t,this.getAccessor)}});I({defineClampedArray(t){const e=this,n=Uint8ClampedArray;return Rt({get(){const s=this.typedArray;return new n(s.buffer,s.byteOffset,s.length)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new nt(n.name,s);const o=new DataView(s.buffer,s.byteOffset,s.byteLength);e.assignView(this,o,t,!0,i)}})}});I({defineDataView(t){const e=this;return Rt({get(){var s;return(s=this[_])==null||s.call(this),this[p]},set(n,s){if((n==null?void 0:n[Symbol.toStringTag])!=="DataView")throw new nt("DataView",n);e.assignView(this,n,t,!0,s)}})}});I({defineMemberFloat(t){return this.defineMemberUsing(t,this.getAccessor)}});I({defineMemberInt(t){let e=this.getAccessor;return this.runtimeSafety&&(e=this.addRuntimeCheck(e)),e=this.addIntConversion(e),this.defineMemberUsing(t,e)}});I({defineMemberObject(t){return cn(t.slot,{get:t.flags&tt.IsString?hs:t.structure.flags&$.HasValue?us:Kt,set:t.flags&tt.IsReadOnly?gt:ds})}});function us(t){return Kt.call(this,t).$}function Kt(t){return this[M][t]??this[st](t)}function hs(t){const e=Kt.call(this,t).$;return e&&e.string}function ds(t,e,n){Kt.call(this,t)[G](e,n)}I({defineMemberUsing(t,e){const{littleEndian:n}=this,{bitOffset:s,byteSize:i}=t,o=e.call(this,"get",t),r=e.call(this,"set",t);if(s!==void 0){const c=s>>3;return{get:function(){var l;try{return o.call(this[p],c,n)}catch(f){if(f instanceof TypeError&&((l=this[_])!=null&&l.call(this)))return o.call(this[p],c,n);throw f}},set:function(l){var f;try{return r.call(this[p],c,l,n)}catch(u){if(u instanceof TypeError&&((f=this[_])!=null&&f.call(this)))return r.call(this[p],c,l,n);throw u}}}}else return{get:function(a){var l;try{return o.call(this[p],a*i,n)}catch(f){if(f instanceof TypeError&&((l=this[_])!=null&&l.call(this)))return o.call(this[p],a*i,n);throw Te(t,a,f)}},set:function(a,l){var f;try{return r.call(this[p],a*i,l,n)}catch(u){if(u instanceof TypeError&&((f=this[_])!=null&&f.call(this)))return r.call(this[p],a*i,l,n);throw Te(t,a,u)}}}}});I({defineSentinel(t){const{byteSize:e,instance:{members:[n,s],template:i}}=t,{get:o}=this.defineMember(s),{get:r}=this.defineMember(n),c=o.call(i,0),a=!!(s.flags&tt.IsRequired),{runtimeSafety:l}=this;return g({value:c,bytes:i[p],validateValue(f,u,h){if(a){if(l&&f===c&&u!==h-1)throw new ve(t,f,u,h);if(f!==c&&u===h-1)throw new ie(t,c,h)}},validateData(f,u){if(a){if(l)for(let h=0;h<u;h++){const y=r.call(f,h);if(y===c&&h!==u-1)throw new ve(t,c,h,u);if(y!==c&&h===u-1)throw new ie(t,c,u)}else if(u>0&&u*e===f[p].byteLength&&r.call(f,u-1)!==c)throw new ie(t,c,u)}},isRequired:a})},findSentinel(t,e){const{memory:n}=this,s=e.byteLength,i=n.buffer.byteLength-s+1;for(let o=t;o<i;o+=s){const r=new DataView(n.buffer,o,s);let c=!0;for(let a=0;a<s;a++){const l=r.getUint8(a),f=e.getUint8(a);if(l!==f){c=!1;break}}if(c)return(o-t)/s}}});I({defineString(t){const e=this,{byteSize:n}=t.instance.members[0],s=`utf-${n*8}`;return Rt({get(){var r;let i=Be(this.typedArray,s);const o=(r=this.constructor[ft])==null?void 0:r.value;return o!==void 0&&i.charCodeAt(i.length-1)===o&&(i=i.slice(0,-1)),i},set(i,o){var l;if(typeof i!="string")throw new nt("string",i);const r=(l=this.constructor[ft])==null?void 0:l.value;r!==void 0&&i.charCodeAt(i.length-1)!==r&&(i+=String.fromCharCode(r));const c=_e(i,s),a=new DataView(c.buffer);e.assignView(this,a,t,!1,o)}})}});I({defineValueOf(){return{value(){return ln(this,!1)}}}});const ys=BigInt(Number.MAX_SAFE_INTEGER),ms=BigInt(Number.MIN_SAFE_INTEGER);function ln(t,e){const n={error:e?"return":"throw"},s=be(n),i=new Map,o=function(r){var l;const c=typeof r=="function"?V.Struct:(l=r==null?void 0:r.constructor)==null?void 0:l[xt];if(c===void 0){if(e){if(typeof r=="bigint"&&ms<=r&&r<=ys)return Number(r);if(r instanceof Error)return{error:r.message}}return r}let a=i.get(r);if(a===void 0){let f;switch(c){case V.Struct:f=r[lt](n),a=r.constructor[Re]&R.IsTuple?[]:{};break;case V.Union:f=r[lt](n),a={};break;case V.Array:case V.Vector:case V.Slice:f=r[lt](),a=[];break;case V.Pointer:try{a=r["*"]}catch{a=Symbol.for("inaccessible")}break;case V.Enum:a=s(()=>String(r));break;case V.Opaque:a={};break;default:a=s(()=>r.$)}if(a=o(a),i.set(r,a),f)for(const[u,h]of f)a[u]=o(h)}return a};return o(t)}I({defineToJSON(){return{value(){return ln(this,!0)}}}});I({defineMemberType(t,e){const{slot:n}=t;return cn(n,{get(s){const i=this[M][s];return i==null?void 0:i.constructor},set:gt})}});I({defineTypedArray(t){const e=this,n=this.getTypedArray(t);return Rt({get(){const s=this.dataView,i=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,i)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new nt(n.name,s);const o=new DataView(s.buffer,s.byteOffset,s.byteLength);e.assignView(this,o,t,!0,i)}})}});I({defineMemberUint(t){let e=this.getAccessor;return this.runtimeSafety&&(e=this.addRuntimeCheck(e)),e=this.addIntConversion(e),this.defineMemberUsing(t,e)}});I({defineMemberVoid(t,e){const{bitOffset:n}=t;return{get(){},set:n!==void 0?function(s){if(s!==void 0)throw new Oe(t)}:function(s,i){if(i!==void 0)throw new Oe(t);if(s<0||s>=this.length)throw new fe(t,s)}}}});I({defineStructure(t){const{type:e,byteSize:n}=t,s=`define${Bt[e]}`,i=this[s],o=[],r={},c={dataView:this.defineDataView(t),base64:this.defineBase64(t),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[Vt]:{value:null},[$t]:g(r),[le]:g(o),[U]:this.defineCopier(n),[_]:this.defineRestorer()},a=t.constructor=i.call(this,t,c);for(const[l,f]of Object.entries(c)){const u=f==null?void 0:f.set;u&&!r[l]&&l!=="$"&&(r[l]=u,o.push(l))}return yt(a.prototype,c),a},finalizeStructure(t){var S;const{name:e,type:n,constructor:s,align:i,byteSize:o,flags:r,signature:c,static:{members:a,template:l}}=t,f=[],u={name:g(e),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[ae]:g(c),[Q]:g(this),[Y]:g(i),[ye]:g(o),[xt]:g(n),[Re]:g(r),[At]:g(f),[ut]:g(this.getTypedArray(t)),[Symbol.iterator]:this.defineStructIterator(),[lt]:this.defineStructEntries(),[At]:g(f)},h={[Symbol.toStringTag]:g(e)};for(const A of a){const{name:b,slot:w,flags:v}=A;if(A.structure.type===V.Function){let E=l[M][w];v&tt.IsString&&(E[It]=!0),u[b]=g(E),E.name||B(E,"name",g(b));const[j,z]=((S=/^(get|set)\s+([\s\S]+)/.exec(b))==null?void 0:S.slice(1))??[],W=j==="get"?0:1;if(j&&E.length===W){u[z]||(u[z]={});const D=u[z];D[j]=E}if(A.flags&tt.IsMethod){const D=function(...St){var rt;try{return E(this,...St)}catch(m){throw(rt=m[vt])==null||rt.call(m,1),m}};if(yt(D,{name:g(b),length:g(E.length-1)}),h[b]=g(D),j&&D.length===W){const St=h[z]||(h[z]={});St[j]=D}}}else u[b]=this.defineMember(A),f.push(b)}u[M]=f.length>0&&g(l[M]);const y=`finalize${Bt[n]}`,d=this[y];(d==null?void 0:d.call(this,t,u,h))!==!1&&(yt(s.prototype,h),yt(s,u))},createConstructor(t,e={}){const{type:n,byteSize:s,align:i,flags:o,instance:{members:r,template:c}}=t,{onCastError:a}=e;let l;if(c!=null&&c[M]){const y=r.filter(d=>d.flags&tt.IsReadOnly);y.length>0&&(l=y.map(d=>d.slot))}const f=new Ye,u=this,h=function(y,d={}){var v;const{allocator:S}=d,A=this instanceof h;let b,w;if(A){if(arguments.length===0)throw new Ke(t);if(b=this,o&$.HasSlot&&(b[M]={}),Ct in b)b[G](y,S),w=b[p];else{const E=n!==V.Pointer?S:null;b[p]=w=u.allocateMemory(s,i,E)}}else{if(Pt in h&&(b=h[Pt].call(this,y,d),b!==!1)||(w=u.extractView(t,y,a),b=f.find(w)))return b;b=Object.create(h.prototype),Ct in b?u.assignView(b,w,t,!1,!1):b[p]=w,o&$.HasSlot&&(b[M]={})}if(l)for(const E of l)b[M][E]=c[M][E];return(v=b[gn])==null||v.call(b),A&&(Ct in b||b[G](y,S)),et in b&&(b=b[et]()),f.save(w,b)};return B(h,_t,g(f)),c!=null&&c[p]&&B(c,_,this.defineRestorer()),h},createApplier(t){const{instance:{template:e}}=t;return function(n,s){const i=Object.keys(n),o=this[le],r=this[$t];for(const u of i)if(!(u in r))throw new jn(t,u);let c=0,a=0,l=0,f=0;for(const u of o){const h=r[u];h.special?u in n&&f++:(c++,u in n?a++:h.required&&l++)}if(l!==0&&f===0){const u=o.filter(h=>r[h].required&&!(h in n));throw new Fn(t,u)}if(f+a>i.length)for(const u of o)u in n&&(i.includes(u)||i.push(u));a<c&&f===0&&e&&e[p]&&this[U](e);for(const u of i)r[u].call(this,n[u],s);return i.length}},getTypedArray(t){const{type:e,instance:n}=t;if(e!==void 0&&n){const[s]=n.members;switch(e){case V.Enum:case V.ErrorSet:case V.Primitive:{const{byteSize:i,type:o}=s,r=o===k.Float?"Float":o===k.Int?"Int":"Uint",a=(i>4&&o!==k.Float?"Big":"")+r+i*8+"Array";return globalThis[a]}case V.Array:case V.Slice:case V.Vector:return this.getTypedArray(s.structure)}}}});I({defineArgStruct(t,e){var u;const{flags:n,byteSize:s,align:i,length:o,instance:{members:r}}=t,c=this,a=r.slice(1),l=function(h,y){const d=this instanceof l;let S,A;if(d?(S=this,A=c.allocateMemory(s,i)):(S=Object.create(l.prototype),A=h),S[p]=A,n&$.HasSlot&&(S[M]={}),d){let b;if(n&Qt.HasOptions&&h.length===o+1&&(b=h.pop()),h.length!==o)throw new Ln(o,h.length);n&Qt.IsAsync&&(S[et]=null),c.copyArguments(S,h,a,b,y)}else return S};for(const h of r)e[h.name]=this.defineMember(h);const f=e.retval.set;return e.length=g(a.length),e[st]=n&$.HasObject&&this.defineVivificatorStruct(t),e[P]=n&$.HasPointer&&this.defineVisitorArgStruct(r),e[at]=g(function(h){f.call(this,h,this[me])}),e[Symbol.iterator]=(u=this.defineArgIterator)==null?void 0:u.call(this,a),e[U]=this.defineRetvalCopier(r[0]),l},finalizeArgStruct(t,e){const{flags:n}=t;e[De]=g(!!(n&Qt.IsThrowing))}});I({defineArray(t,e){const{length:n,instance:{members:[s]},flags:i}=t,o=this.createApplier(t),r=this.defineMember(s),{set:c}=r,a=this.createConstructor(t),l=function(f,u){if(it(f,a))this[U](f),i&$.HasPointer&&this[P]("copy",F.Vivificate,f);else if(typeof f=="string"&&i&Mt.IsString&&(f={string:f}),f!=null&&f[Symbol.iterator]){if(f=We(f),f.length!==n)throw new Yt(t,this,f);let h=0;for(const y of f)c.call(this,h++,y,u)}else if(f&&typeof f=="object"){if(o.call(this,f)===0)throw new bt(t,f)}else if(f!==void 0)throw new bt(t,f)};return e.$={get:we,set:l},e.length=g(n),e.entries=e[lt]=this.defineArrayEntries(),i&Mt.IsTypedArray&&(e.typedArray=this.defineTypedArray(t),i&Mt.IsString&&(e.string=this.defineString(t)),i&Mt.IsClampedArray&&(e.clampedArray=this.defineClampedArray(t))),e[Symbol.iterator]=this.defineArrayIterator(),e[G]=g(l),e[et]=this.defineFinalizerArray(r),e[st]=i&$.HasObject&&this.defineVivificatorArray(t),e[P]=i&$.HasPointer&&this.defineVisitorArray(),a},finalizeArray(t,e){const{flags:n,instance:{members:[s]}}=t;e.child=g(s.structure.constructor),e[ft]=n&Mt.HasSentinel&&this.defineSentinel(t)}});I({defineFinalizerArray({get:t,set:e}){return{value(){const n=new Proxy(this,bs);return yt(this,{[Lt]:{value:n},get:{value:t.bind(this)},set:e&&{value:e.bind(this)}}),n}}},defineVivificatorArray(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:s}=e,i=this;return{value:function(c){var d;const{constructor:a}=s;(d=this[_])==null||d.call(this);const l=this[p],u=l.byteOffset+n*c,h=i.obtainView(l.buffer,u,n);return this[M][c]=a.call(de,h)}}}});const bs={get(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?t.get(n):e===qt?t:t[e]},set(t,e,n){const s=typeof e=="symbol"?0:e|0;return s!==0||s==e?t.set(s,n):t[e]=n,!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?!1:(delete t[e],!0)},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(`${n}`);return e.push("length",Lt),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};I({defineEnum(t,e){const{instance:{members:[n]}}=t,s=this.defineMember(n),{get:i,set:o}=s,{get:r}=this.defineMember(n,!1),c=this.createApplier(t),a=["string","number","tagged union"],l=function(u){if(u&&typeof u=="object"){if(c.call(this,u)===0)throw new wt(t,a,u)}else u!==void 0&&o.call(this,u)},f=this.createConstructor(t,{onCastError(u,h){throw new wt(u,a,h)}});return e.$=s,e.toString=g(Mn),e[Symbol.toPrimitive]={value(u){switch(u){case"string":case"default":return this.$[ee];default:return r.call(this)}}},e[G]=g(l),f},finalizeEnum(t,e){const{flags:n,constructor:s,instance:{members:[i]},static:{members:o,template:r}}=t,c=r[M],{get:a,set:l}=this.defineMember(i,!1),f={};for(const{name:u,flags:h,slot:y}of o)if(h&tt.IsPartOfSet){const d=c[y];B(d,ee,g(u));const S=a.call(d);e[u]={value:d,writable:!1},f[S]=d}e[Pt]={value(u){if(typeof u=="string")return s[u];if(typeof u=="number"||typeof u=="bigint"){let h=f[u];if(!h&&n&dn.IsOpenEnded){h=new s(void 0),l.call(h,u);const y=`${u}`;B(h,ee,g(y)),B(s,y,g(h)),f[u]=h}return h}else return u instanceof s?u:(u==null?void 0:u[xe])instanceof s?u[xe]:!1}},e[ut]=g(this.getTypedArray(t))},transformDescriptorEnum(t,e){const{type:n,structure:s}=e;if(n===k.Object)return t;const i=function(c){const{constructor:a}=s,l=a(c);if(!l)throw new Pn(s,c);return l},{get:o,set:r}=t;return{get:o.length===0?function(){const a=o.call(this);return i(a)}:function(a){const l=o.call(this,a);return i(l)},set:r.length===1?function(a){a=i(a)[Symbol.toPrimitive](),r.call(this,a)}:function(a,l){const f=i(l);r.call(this,a,f[Symbol.toPrimitive]())}}}});I({init(){this.ZigError=null,this.globalItemsByIndex={},this.globalErrorSet=null},defineErrorSet(t,e){const{instance:{members:[n]},byteSize:s,flags:i}=t;if(!this.ZigError){this.ZigError=class extends ps{};const u={type:V.ErrorSet,flags:Ot.IsGlobal,byteSize:s,name:"anyerror",instance:{members:[n]},static:{members:[],template:{SLOTS:{}}}},h=this.defineStructure(u);this.finalizeStructure(u),this.globalErrorSet=h}if(this.globalErrorSet&&i&Ot.IsGlobal)return this.globalErrorSet;const o=this.defineMember(n),{set:r}=o,c=["string","number"],a=this.createApplier(t),l=function(u){if(u instanceof f[Ht])r.call(this,u);else if(u&&typeof u=="object"&&!Ft(u)){if(a.call(this,u)===0)throw new wt(t,c,u)}else u!==void 0&&r.call(this,u)},f=this.createConstructor(t,{onCastError(u,h){throw new wt(u,c,h)}});return e.$=o,e[G]=g(l),f},finalizeErrorSet(t,e){const{constructor:n,flags:s,instance:{members:[i]},static:{members:o,template:r}}=t;if(this.globalErrorSet&&s&Ot.IsGlobal)return!1;const c=(r==null?void 0:r[M])??{},a=s&Ot.IsGlobal?this.globalItemsByIndex:{},{get:l}=this.defineMember(i,!1);for(const{name:f,slot:u}of o){const h=c[u],y=l.call(h);let d=this.globalItemsByIndex[y];const S=!!d;d||(d=new this.ZigError(f,y));const A=g(d);e[f]=A;const b=`${d}`;e[b]=A,a[y]=d,S||(yt(this.globalErrorSet,{[f]:A,[b]:A}),this.globalErrorSet[At].push(f),this.globalItemsByIndex[y]=d)}e[Pt]={value(f){return typeof f=="number"?a[f]:typeof f=="string"?n[f]:f instanceof n[Ht]?a[Number(f)]:Ft(f)?n[`Error: ${f.error}`]:f instanceof Error?n[`${f}`]:!1}},e[Ht]=g(this.ZigError)},transformDescriptorErrorSet(t,e){const{type:n,structure:s}=e;if(n===k.Object)return t;const i=c=>{const{constructor:a,flags:l}=s,f=a(c);if(!f){if(l&Ot.IsGlobal&&typeof c=="number"){const u=new this.ZigError(`Unknown error: ${c}`,c);return this.globalItemsByIndex[c]=u,B(this.globalErrorSet,`${u}`,g(u)),u}throw c instanceof Error?new Qe(s):new kn(s,c)}return f},{get:o,set:r}=t;return{get:o.length===0?function(){const a=o.call(this);return i(a)}:function(a){const l=o.call(this,a);return i(l)},set:r.length===1?function(a){const l=i(a);a=Number(l),r.call(this,a)}:function(a,l){const f=i(l);l=Number(f),r.call(this,a,l)}}}});class ps extends Error{constructor(e,n){super(Yn(e)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](e){switch(e){case"string":case"default":return Error.prototype.toString.call(this,e);default:return this.number}}toJSON(){return{error:this.message}}}I({defineErrorUnion(t,e){const{instance:{members:[n,s]},flags:i}=t,{get:o,set:r}=this.defineMember(n),{get:c,set:a}=this.defineMember(s),{get:l,set:f}=this.defineMember(s,!1),u=function(){if(l.call(this))throw c.call(this);return o.call(this)},h=n.type===k.Void,y=s.structure.constructor,d=function(){var E;this[zt](),(E=this[P])==null||E.call(this,"clear")},S=this.createApplier(t),A=function(E,j){if(it(E,v))this[U](E),i&$.HasPointer&&(l.call(this)||this[P]("copy",0,E));else if(E instanceof y[Ht]&&y(E))a.call(this,E),d.call(this);else if(E!==void 0||h)try{r.call(this,E,j),f.call(this,0)}catch(z){if(E instanceof Error){const W=y(E)??y.Unexpected;if(W)a.call(this,W),d.call(this);else throw new Qe(s.structure)}else if(Ft(E))a.call(this,E),d.call(this);else if(E&&typeof E=="object"){if(S.call(this,E)===0)throw z}else throw z}},{bitOffset:b,byteSize:w}=n,v=this.createConstructor(t);return e.$={get:u,set:A},e[G]=g(A),e[st]=i&$.HasObject&&this.defineVivificatorStruct(t),e[zt]=this.defineResetter(b/8,w),e[P]=i&$.HasPointer&&this.defineVisitorErrorUnion(n,l),v}});I({defineFunction(t,e){const{instance:{members:[n],template:s},static:{template:i}}=t,o=new Ye,{structure:{constructor:r}}=n,c=this,a=function(l){const f=this instanceof a;let u;if(f){if(arguments.length===0)throw new Ke(t);if(typeof l!="function")throw new nt("function",l);if(r[xt]===V.VariadicStruct||!i)throw new $n;u=c.getFunctionThunk(l,i)}else{if(this!==Q)throw new Dn;u=l}let h;if(h=o.find(u))return h;const y=r.prototype.length,d=f?c.createInboundCaller(l,r):c.createOutboundCaller(s,r);return yt(d,{length:g(y),name:g(f?l.name:"")}),Object.setPrototypeOf(d,a.prototype),d[p]=u,o.save(u,d),d};return Object.setPrototypeOf(a.prototype,Function.prototype),e.valueOf=e.toJSON=g(pe),a},finalizeFunction(t,e,n){n[Symbol.toStringTag]=void 0}});I({defineOptional(t,e){const{instance:{members:[n,s]},flags:i}=t,{get:o,set:r}=this.defineMember(n),{get:c,set:a}=this.defineMember(s),l=function(){var A;return c.call(this)?o.call(this):((A=this[P])==null||A.call(this,"clear"),null)},f=n.type===k.Void,u=function(S,A){var b,w;it(S,h)?(this[U](S),i&$.HasPointer&&c.call(this)&&this[P]("copy",F.Vivificate,S)):S===null?(a.call(this,0),(b=this[zt])==null||b.call(this),(w=this[P])==null||w.call(this,"clear")):(S!==void 0||f)&&(r.call(this,S,A),i&Ae.HasSelector?a.call(this,1):i&$.HasPointer&&(c.call(this)||a.call(this,13)))},h=t.constructor=this.createConstructor(t),{bitOffset:y,byteSize:d}=n;return e.$={get:l,set:u},e[G]=g(u),e[zt]=i&Ae.HasSelector&&this.defineResetter(y/8,d),e[st]=i&$.HasObject&&this.defineVivificatorStruct(t),e[P]=i&$.HasPointer&&this.defineVisitorOptional(n,c),h}});I({definePointer(t,e){const{flags:n,byteSize:s,instance:{members:[i]}}=t,{structure:o}=i,{type:r,flags:c,byteSize:a=1}=o,l=n&L.HasLength?s/2:s,{get:f,set:u}=this.defineMember({type:k.Uint,bitOffset:0,bitSize:l*8,byteSize:l,structure:{byteSize:l}}),{get:h,set:y}=n&L.HasLength?this.defineMember({type:k.Uint,bitOffset:l*8,bitSize:l*8,byteSize:l,structure:{flags:je.IsSize,byteSize:l}}):{},d=function(m,O=!0,T=!0){if(O||this[p][C])if(T){const N=rt.child,H=f.call(this),J=n&L.HasLength?h.call(this):r===V.Slice&&c&X.HasSentinel?D.findSentinel(H,N[ft].bytes)+1:1;if(H!==this[Tt]||J!==this[Dt]){const K=D.findMemory(m,H,J,N[ye]),Z=K?N.call(Q,K):null;return this[M][0]=Z,this[Tt]=H,this[Dt]=J,n&L.HasLength&&(this[ht]=null),Z}}else return this[M][0]=void 0;return this[M][0]},S=function(m){u.call(this,m),this[Tt]=m},A=c&X.HasSentinel?1:0,b=n&L.HasLength||c&X.HasSentinel?function(m){var O;(O=y==null?void 0:y.call)==null||O.call(y,this,m-A),this[Dt]=m}:null,w=function(){const m=this[pt]??this,O=!m[M][0],T=d.call(m,null,O);if(!T){if(n&L.IsNullable)return null;throw new Bn}return n&L.IsConst?an(T):T},v=function(m){var T,N;if(m===void 0)return;const O=this[pt]??this;if(m){const H=m[p][C];if(H){const{address:J,js:K}=H;S.call(this,J),(T=b==null?void 0:b.call)==null||T.call(b,this,m.length),K&&(m[p][C]=void 0)}else if(O[p][C])throw new en}else O[p][C]&&(S.call(this,0),(N=b==null?void 0:b.call)==null||N.call(b,this,0));O[M][0]=m??null,n&L.HasLength&&(O[ht]=null)},E=c&$.HasValue?function(){return w.call(this).$}:w,j=n&L.IsConst?gt:function(m){const O=w.call(this);return O.$=m},z=function(){const m=w.call(this);return m?m.length:0},W=function(m){var ot,Nt;m=m|0;const O=w.call(this);if(O){if(O.length===m)return}else{if(m!==0)throw new Ve(m,0);return}(ot=O[_])==null||ot.call(O);const T=O[p],N=T[C];let H;if(N||(n&L.HasLength?(this[ht]||(this[ht]=O.length),H=this[ht]):H=(T.buffer.byteLength-T.byteOffset)/a|0),m<0||m>H)throw new Ve(m,H);const J=m*a,K=N?D.obtainZigView(N.address,J):D.obtainView(T.buffer,T.byteOffset,J),Z=o.constructor;this[M][0]=Z.call(Q,K),(Nt=b==null?void 0:b.call)==null||Nt.call(b,this,m)},D=this,St=function(m,O){var H,J,K;const T=o.constructor;if(he(m,T)){if(!(n&L.IsConst)&&m.constructor.const)throw new Hn(t,m);m=m[M][0]}else if(n&L.IsMultiple)ze(m,T,n)&&(m=T(m[M][0][p]));else if(r===V.Slice&&c&X.IsOpaque&&m){if(m.constructor[xt]===V.Pointer)m=(H=m[q])==null?void 0:H[p];else if(m[p])m=m[p];else if((m==null?void 0:m.buffer)instanceof ArrayBuffer&&!(m instanceof Uint8Array||m instanceof DataView)){const{byteOffset:Z,byteLength:ot}=m;Z!==void 0&&ot!==void 0&&(m=new DataView(m.buffer,Z,ot))}}if(m instanceof T){(J=m[_])==null||J.call(m);const Z=m[Vt];if(Z)if(n&L.IsConst)m=Z;else throw new Gn(t)}else if(it(m,T))m=T.call(Q,m[p]);else if(n&L.IsSingle&&n&L.IsMultiple&&m instanceof T.child)m=T(m[p]);else if(Ss(m,T)){const Z=D.extractView(o,m);m=T(Z)}else if(m!=null&&!m[p]){if(n&L.IsSingle&&n&L.IsMultiple&&typeof m=="object"&&!m[Symbol.iterator]){let ot=!0;const Nt=T.prototype[$t];for(const Se of Object.keys(m)){const Xt=Nt[Se];if(Xt!=null&&Xt.special){ot=!1;break}}ot&&(m=[m])}if(ut in T&&(m!=null&&m.buffer)&&m[Symbol.iterator])throw new Me(t,m);m=new T(m,{allocator:O})}else if(m!==void 0&&(!(n&L.IsNullable)||m!==null))throw new Me(t,m);const N=(K=m==null?void 0:m[p])==null?void 0:K[C];if((N==null?void 0:N.address)===kt)throw new tn(m);this[q]=m},rt=this.createConstructor(t);return e["*"]={get:E,set:j},e.$={get:we,set:St},e.length={get:z,set:W},e.slice=r===V.Slice&&{value(m,O){const T=this[q].slice(m,O);return new rt(T)}},e.subarray=r===V.Slice&&{value(m,O,T){const N=this[q].subarray(m,O,T);return new rt(N)}},e[Symbol.toPrimitive]=r===V.Primitive&&{value(m){return this[q][Symbol.toPrimitive](m)}},e[G]=g(St),e[et]={value(){const m=r!==V.Pointer?fn:{};let O;r===V.Function?(O=function(){},O[p]=this[p],O[M]=this[M],Object.setPrototypeOf(O,rt.prototype)):O=this;const T=new Proxy(O,m);return Object.defineProperty(O,Lt,{value:T}),T}},e[q]={get:w,set:v},e[vt]=g(d),e[Ne]={set:S},e[mt]={set:b},e[P]=this.defineVisitor(),e[Tt]=g(0),e[Dt]=g(0),e[ht]=n&L.HasLength&&g(null),e.dataView=e.base64=void 0,rt},finalizePointer(t,e){const{flags:n,constructor:s,instance:{members:[i]}}=t,{structure:o}=i,{type:r,constructor:c}=o;e.child=c?g(c):{get(){return o.constructor}},e.const=g(!!(n&L.IsConst)),e[Pt]={value(a,l){if(this===Q||this===de||a instanceof s)return!1;if(he(a,c))return new s(c(a["*"]),l);if(ze(a,c,n))return new s(a);if(r===V.Slice)return new s(c(a),l);throw new Nn(t)}}}});function he(t,e){var n;return qe((n=t==null?void 0:t.constructor)==null?void 0:n.child,e)&&t["*"]}function ze(t,e,n){var s,i;if(n&L.IsMultiple){if(((i=(s=t==null?void 0:t.constructor)==null?void 0:s.child)==null?void 0:i.child)===e.child&&t["*"])return!0;if(n&L.IsSingle&&he(t,e.child))return!0}return!1}const Pe=new WeakMap;function an(t){let e=Pe.get(t);if(!e){const n=t[pt];n?e=new Proxy(n,ws):e=new Proxy(t,gs),Pe.set(t,e)}return e}const fn={get(t,e){return e===pt?t:e in t?t[e]:t[q][e]},set(t,e,n){if(e in t)t[e]=n;else{const s=t[q];s[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[q];delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[q];return e in n}},apply(t,e,n){return t["*"].apply(e,n)}},ws={...fn,set(t,e,n){if(e in t)gt();else{const s=t[q];s[e]=n}return!0}},gs={get(t,e){if(e===Vt)return t;{const n=t[e];return n!=null&&n[p]?an(n):n}},set(t,e,n){gt()}};function Ss(t,e){const n=t==null?void 0:t[Symbol.toStringTag];if(n){const s=e[ut];if(s)switch(n){case s.name:case"DataView":return!0;case"ArrayBuffer":return s===Uint8Array||s===Int8Array;case"Uint8ClampedArray":return s===Uint8Array}if(e.child&&Je(t,e.child)!==void 0)return!0}return!1}I({definePrimitive(t,e){const{instance:{members:[n]}}=t,s=this.createApplier(t),{get:i,set:o}=this.defineMember(n),r=function(a){if(it(a,c))this[U](a);else if(a&&typeof a=="object"){if(s.call(this,a)===0){const l=Ue(n);throw new wt(t,l,a)}}else a!==void 0&&o.call(this,a)},c=this.createConstructor(t);return e.$={get:i,set:r},e[G]=g(r),e[Symbol.toPrimitive]=g(i),c},finalizePrimitive(t,e){const{instance:{members:[n]}}=t;e[mn]=g(n.bitSize),e[pn]=g(n.type)}});I({defineSlice(t,e){const{align:n,flags:s,byteSize:i,name:o,instance:{members:[r]}}=t,{byteSize:c,structure:a}=r,l=this,f=function(w,v,E){w||(w=l.allocateMemory(v*c,n,E)),this[p]=w,this[mt]=v},u=function(w,v){if(v!==this[mt])throw new Yt(t,this,w)},h=this.defineMember(r),{set:y}=h,d=this.createApplier(t),S=function(w,v){var E;if(it(w,b))this[p]?u.call(this,w,w.length):f.call(this,null,w.length,v),this[U](w),s&$.HasPointer&&this[P]("copy",F.Vivificate,w);else if(typeof w=="string"&&s&X.IsString)S.call(this,{string:w},v);else if(w!=null&&w[Symbol.iterator]){w=We(w),this[p]?u.call(this,w,w.length):f.call(this,null,w.length,v);let j=0;for(const z of w)(E=b[ft])==null||E.validateValue(z,j,w.length),y.call(this,j++,z,v)}else if(typeof w=="number")if(!this[p]&&w>=0&&isFinite(w))f.call(this,null,w,v);else throw new bt(t,w,!this[p]);else if(w&&typeof w=="object"){if(d.call(this,w,v)===0)throw new bt(t,w)}else if(w!==void 0)throw new bt(t,w)},A=function(w,v){const E=this[mt],j=this[p];w=w===void 0?0:ke(w,E),v=v===void 0?E:ke(v,E);const z=w*c,W=v*c-z;return l.obtainView(j.buffer,j.byteOffset+z,W)},b=this.createConstructor(t);return e.$={get:we,set:S},e.length={get:Is},s&X.IsTypedArray&&(e.typedArray=this.defineTypedArray(t),s&X.IsString&&(e.string=this.defineString(t)),s&X.IsClampedArray&&(e.clampedArray=this.defineClampedArray(t))),e.entries=e[lt]=this.defineArrayEntries(),e.subarray={value(w,v){const E=A.call(this,w,v);return b(E)}},e.slice={value(w,v,E={}){const{zig:j=!1}=E,z=A.call(this,w,v),W=l.allocateMemory(z.byteLength,n,j),D=b(W);return D[U]({[p]:z}),D}},e[Symbol.iterator]=this.defineArrayIterator(),e[Ct]=g(f),e[U]=this.defineCopier(i,!0),e[G]=g(S),e[et]=this.defineFinalizerArray(h),e[st]=s&$.HasObject&&this.defineVivificatorArray(t),e[P]=s&$.HasPointer&&this.defineVisitorArray(),b},finalizeSlice(t,e){const{flags:n,instance:{members:[s]}}=t;e.child=g(s.structure.constructor),e[ft]=n&X.HasSentinel&&this.defineSentinel(t)}});function Is(){return this[mt]}function ke(t,e){return t=t|0,t<0?(t=e+t,t<0&&(t=0)):t>e&&(t=e),t}I({defineStruct(t,e){const{flags:n,length:s,instance:{members:i}}=t,o=i.find(y=>y.flags&tt.IsBackingInt),r=o&&this.defineMember(o),c=this.createApplier(t),a=function(y,d){if(it(y,l))this[U](y),n&$.HasPointer&&this[P]("copy",0,y);else if(y&&typeof y=="object")c.call(this,y,d);else if((typeof y=="number"||typeof y=="bigint")&&r)r.set.call(this,y);else if(y!==void 0)throw new wt(t,"object",y)},l=this.createConstructor(t),f=e[$t].value,u=e[le].value,h=[];for(const y of i.filter(d=>!!d.name)){const{name:d,flags:S}=y,{set:A}=e[d]=this.defineMember(y);A&&(S&tt.IsRequired&&(A.required=!0),f[d]=A,u.push(d)),h.push(d)}return e.$={get:pe,set:a},e.length=g(s),e.entries=n&R.IsTuple&&this.defineVectorEntries(),e[Symbol.toPrimitive]=r&&{value(y){return y==="string"?Object.prototype.toString.call(this):r.get.call(this)}},e[Symbol.iterator]=n&R.IsIterator?this.defineZigIterator():n&R.IsTuple?this.defineVectorIterator():this.defineStructIterator(),e[G]=g(a),e[st]=n&$.HasObject&&this.defineVivificatorStruct(t),e[P]=n&$.HasPointer&&this.defineVisitorStruct(i),e[lt]=n&R.IsTuple?this.defineVectorEntries():this.defineStructEntries(),e[At]=g(h),n&R.IsAllocator&&(e.alloc=this.defineAlloc(),e.free=this.defineFree(),e.dupe=this.defineDupe()),l}});I({defineVivificatorStruct(t){const{instance:{members:e}}=t,n={};for(const i of e.filter(o=>o.type===k.Object))n[i.slot]=i;const s=this;return{value(i){var S;const o=n[i],{bitOffset:r,byteSize:c,structure:{constructor:a}}=o;(S=this[_])==null||S.call(this);const l=this[p],u=l.byteOffset+(r>>3);let h=c;if(h===void 0){if(r&7)throw new _n(o);h=o.bitSize>>3}const y=s.obtainView(l.buffer,u,h);return this[M][i]=a.call(de,y)}}}});I({defineVector(t,e){const{flags:n,length:s,instance:{members:[i]}}=t,o=this.createApplier(t),r=function(l){if(it(l,c))this[U](l),n&$.HasPointer&&this[P]("copy",F.Vivificate,l);else if(l!=null&&l[Symbol.iterator]){let f=l.length;if(typeof f!="number"&&(l=[...l],f=l.length),f!==s)throw new Yt(t,this,l);let u=0;for(const h of l)this[u++]=h}else if(l&&typeof l=="object"){if(o.call(this,l)===0)throw new bt(t,l)}else if(l!==void 0)throw new bt(t,l)},c=this.createConstructor(t,{initializer:r}),{bitSize:a}=i;for(let l=0,f=0;l<s;l++,f+=a)n&$.HasPointer?e[l]=this.defineMember({...i,slot:l}):e[l]=this.defineMember({...i,bitOffset:f});return e.$={get:pe,set:r},e.length=g(s),n&Ee.IsTypedArray&&(e.typedArray=this.defineTypedArray(t),n&Ee.IsClampedArray&&(e.clampedArray=this.defineClampedArray(t))),e.entries=e[lt]=this.defineVectorEntries(),e[Symbol.iterator]=this.defineVectorIterator(),e[G]=g(r),e[st]=n&$.HasObject&&this.defineVivificatorArray(t),e[P]=n&$.HasPointer&&this.defineVisitorArray(),c},finalizeVector(t,e){const{instance:{members:[n]}}=t;e.child=g(n.structure.constructor)}});I({defineVisitor(){return{value(t,e,n){let s;typeof t=="string"?s=As[t]:s=t,s.call(this,e,n)}}}});function jt(t,e,n,s){let i=this[M][t];if(!i)if(!(n&F.IgnoreUncreated))i=this[st](t);else return;let o;s&&(o=s[M][t],!o)||i[P](e,n,o)}const As={copy(t,e){const n=e[M][0];if(this[p][C]&&n&&!n[p][C])throw new en;this[M][0]=n},clear(t){t&F.IsInactive&&(this[M][0]=void 0)},reset(){this[M][0]=void 0,this[Tt]=void 0}};I({defineVisitorArgStruct(t){const e=[];let n;for(const[s,{slot:i,structure:o}]of t.entries())o.flags&$.HasPointer&&(s===0?n=i:e.push(i));return{value(s,i,o){if(!(i&F.IgnoreArguments)&&e.length>0)for(const r of e)jt.call(this,r,s,i|F.IsImmutable,o);!(i&F.IgnoreRetval)&&n!==void 0&&jt.call(this,n,s,i,o)}}}});I({defineVisitorErrorUnion(t,e){const{slot:n}=t;return{value(s,i,o){e.call(this)&&(i|=F.IsInactive),(!(i&F.IsInactive)||!(i&F.IgnoreInactive))&&jt.call(this,n,s,i,o)}}}});I({defineVisitorOptional(t,e){const{slot:n}=t;return{value(s,i,o){e.call(this)||(i|=F.IsInactive),(!(i&F.IsInactive)||!(i&F.IgnoreInactive))&&jt.call(this,n,s,i,o)}}}});I({defineVisitorStruct(t){const e=t.filter(n=>{var s;return((s=n.structure)==null?void 0:s.flags)&$.HasPointer}).map(n=>n.slot);return{value(n,s,i){for(const o of e)jt.call(this,o,n,s,i)}}}});I({init(){this.variables=[]},getSpecialExports(){const t=e=>{if(e===void 0)throw new Error("Not a Zig type");return e};return{init:(...e)=>{var n;return(n=this.initialize)==null?void 0:n.call(this,...e)},abandon:()=>{var e;return(e=this.abandonModule)==null?void 0:e.call(this)},connect:e=>this.consoleObject=e,sizeOf:e=>t(e==null?void 0:e[ye]),alignOf:e=>t(e==null?void 0:e[Y]),typeOf:e=>Es[t(e==null?void 0:e[xt])]}},recreateStructures(t,e){Object.assign(this,e);const n=(r,c)=>{for(const[a,l]of Object.entries(c))r[a]=i(l);return r},s=r=>r.length?r.buffer:new ArrayBuffer(0),i=r=>{const{memory:c,structure:a,actual:l}=r;if(c){if(l)return l;{const{array:f,offset:u,length:h}=c,y=this.obtainView(s(f),u,h),{handle:d,const:S}=r,A=a==null?void 0:a.constructor,b=r.actual=A.call(Q,y);return S&&this.makeReadOnly(b),r.slots&&n(b[M],r.slots),d&&this.variables.push({handle:d,object:b}),b}}else return a},o=new Map;for(const r of t){for(const c of[r.instance,r.static])if(c.template){const{slots:a,memory:l,handle:f}=c.template,u=c.template={};if(l){const{array:h,offset:y,length:d}=l;u[p]=this.obtainView(s(h),y,d),f&&this.variables.push({handle:f,object:u})}if(a){const h=u[M]={};o.set(h,a)}}this.defineStructure(r)}for(const[r,c]of o)n(r,c);for(const r of t)this.finalizeStructure(r)}});const Es=Bt.map(t=>t.replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase());I({init(){this.defaultAllocator=null,this.allocatorVtable=null,this.allocatorContextMap=new Map,this.nextAllocatorContextId=Ge(4096)},createDefaultAllocator(t,e){let n=this.defaultAllocator;return n||(n=this.defaultAllocator=this.createJsAllocator(t,e,!1)),n},createJsAllocator(t,e,n){const{constructor:s}=e;let i=this.allocatorVtable;if(!i){const{noResize:c,noRemap:a}=s;i=this.allocatorVtable={alloc:this.allocateHostMemory.bind(this),free:this.freeHostMemory.bind(this),resize:c},a&&(i.remap=a),this.destructors.push(()=>this.freeFunction(i.alloc)),this.destructors.push(()=>this.freeFunction(i.free))}let o=Zt;if(n){const c=[];o=this.nextAllocatorContextId++,this.allocatorContextMap.set(o,c),t[zt]=a=>{for(const{address:l,len:f}of c){const u=this.unregisterMemory(l,f);u&&this.freeShadowMemory(u.shadowDV),a&&this.allocatorContextMap.delete(o)}c.splice(0)}}const r=this.obtainZigView(o,0);return new s({ptr:r,vtable:i})},allocateHostMemory(t,e,n){const s=this.getViewAddress(t["*"][p]),i=s!=Zt?this.allocatorContextMap.get(s):null,o=1<<n,r=this.allocateJSMemory(e,o);try{const c=this.allocateShadowMemory(e,o),a=this.getViewAddress(c);return this.registerMemory(a,e,o,!0,r,c),i==null||i.push({address:a,len:e}),c}catch{return null}},freeHostMemory(t,e,n){const s=e["*"][p],i=this.getViewAddress(s),o=s.byteLength,r=this.unregisterMemory(i,o);r&&this.freeShadowMemory(r.shadowDV)}});I({init(){this.promiseCallbackMap=new Map,this.promiseContextMap=new Map,this.nextPromiseContextId=Ge(4096)},createPromise(t,e,n){const{constructor:s}=t;if(n){if(typeof n!="function")throw new nt("function",n)}else e[He]=new Promise((c,a)=>{n=l=>{var f;(f=l==null?void 0:l[p])!=null&&f[C]&&(l=new l.constructor(l)),l instanceof Error?a(l):(e[It]&&l&&(l=l.string),c(l))}});const i=this.nextPromiseContextId++,o=this.obtainZigView(i,0,!1);this.promiseContextMap.set(i,{func:n,args:e});let r=this.promiseCallbackMap.get(s);return r||(r=(c,a)=>{const l=c instanceof DataView?c:c["*"][p],f=this.getViewAddress(l),u=this.promiseContextMap.get(f);if(u){const{func:h,args:y}=u;if(h.length===2){const d=a instanceof Error;h(d?a:null,d?null:a)}else h(a);y[et](),this.promiseContextMap.delete(f)}},this.promiseCallbackMap.set(s,r),this.destructors.push(()=>this.freeFunction(r))),e[at]=c=>r(o,c),{ptr:o,callback:r}},createPromiseCallback(t,e){const{ptr:n,callback:s}=e,i=s["*"];return t[at]=o=>i.call(t,n,o),(...o)=>{const r=o.length===2?o[0]??o[1]:o[0];return t[at](r)}}});I({createSignal(t,e){const{constructor:{child:n}}=t.instance.members[0].structure,s=new Int32Array([e!=null&&e.aborted?1:0]),i=n(s);return e&&e.addEventListener("abort",()=>{{const o=this.findShadowView(i[p]);if(o){const r=new Int32Array(o.buffer,o.byteOffset,1);Atomics.store(r,0,1)}}},{once:!0}),{ptr:i}},createInboundSignal(t){const e=new AbortController;if(t.ptr["*"])e.abort();else{const n=setInterval(()=>{t.ptr["*"]&&(e.abort(),clearInterval(n))},50)}return e.signal}});I({linkVariables(t){var n,s,i;if(!this.memory){this.initPromise=this.initPromise.then(()=>this.linkVariables(t));return}const e=this.getCopyFunction();for(const{object:o,handle:r}of this.variables){const c=o[p],a=r;let l=o[p]=this.obtainZigView(a,c.byteLength);t&&e(l,c),(s=(n=o.constructor[_t])==null?void 0:n.save)==null||s.call(n,l,o),this.destructors.push(()=>{l=this.restoreView(o[p]);const u=o[p]=this.allocateMemory(l.bytelength);e(u,l)});const f=u=>{var y,d;const h=u[M];if(h){const S=l.byteOffset;for(const A of Object.values(h))if(A){const b=A[p];if(b.buffer===c.buffer){const w=S+b.byteOffset-c.byteOffset;A[p]=this.obtainView(l.buffer,w,b.byteLength),(d=(y=A.constructor[_t])==null?void 0:y.save)==null||d.call(y,l,A),f(A)}}}};f(o),(i=o[P])==null||i.call(o,function(){this[vt]()},F.IgnoreInactive)}},imports:{recreateAddress:{argType:"i",returnType:"i"}}});I({init(){this.nextThreadId=1,this.workers=[]},getThreadHandler(t){switch(t){case"thread-spawn":return typeof window=="object"&&!window.crossOriginIsolated&&console.warn(`%cHTML document is not cross-origin isolated %c

WebAssembly multithreading in the browser is only possibly when %cwindow.crossOriginIsolated%c = true. Visit https://developer.mozilla.org/en-US/docs/Web/API/Window/crossOriginIsolated for information on how to enable it.`,"color: red;font-size: 200%;font-weight:bold","","background-color: lightgrey;font-weight:bold",""),this.spawnThread.bind(this)}},spawnThread(t){const e=this.nextThreadId;this.nextThreadId++;const{executable:n,memory:s,options:i}=this,o={executable:n,memory:s,options:i,tid:e,arg:t},r=(a,l)=>{var f;if(l.type==="call"){const{module:u,name:h,args:y,array:d}=l,S=(f=this.exportedModules[u])==null?void 0:f[h],A=S==null?void 0:S(...y);d&&(d[1]=A|0,d[0]=1,Atomics.notify(d,0,1))}else if(l.type==="exit"){const u=this.workers.indexOf(a);u!==-1&&(a.detach(),this.workers.splice(u,1))}},c="message";{const a=Vs(),l=new Worker(a,{name:"zig"}),f=u=>r(l,u.data);l.addEventListener(c,f),l.detach=()=>l.removeEventListener(c,f),l.postMessage(o),this.workers.push(l)}return e}});function xs(){const t=vs.toString(),e=t.indexOf("{")+1,n=t.lastIndexOf("}");return t.slice(e,n)}let ce;function Vs(){if(!ce){const t=xs();ce=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}return ce}function vs(){let t,e;self.onmessage=i=>n(i.data),t=i=>self.postMessage(i),e=()=>self.close();function n({executable:i,memory:o,options:r,tid:c,arg:a}){const l=WebAssembly,f={memory:o},u={},h={},y={env:f,wasi:u,wasi_snapshot_preview1:h};for(const{module:b,name:w,kind:v}of l.Module.imports(i))if(v==="function"){const E=s(b,w);b==="env"?f[w]=E:b==="wasi_snapshot_preview1"?h[w]=E:b==="wasi"&&(u[w]=E)}const{tableInitial:d}=r;f.__indirect_function_table=new l.Table({initial:d,element:"anyfunc"});const{exports:S}=new l.Instance(i,y),{wasi_thread_start:A}=S;A(c,a),t({type:"exit"}),e()}function s(i,o){if(o==="_handleJsCall")return function(...r){return t({type:"call",module:i,name:o,args:r}),0};{const r=new Int32Array(new SharedArrayBuffer(8));return function(...c){return r[0]=0,t({type:"call",module:i,name:o,args:c,array:r}),Atomics.wait(r,0,0),r[1]}}}}I({getAccessorInt(t,e){const{bitSize:n,byteSize:s}=e;if(s){const i=this.getAccessor(t,{type:k.Uint,bitSize:s*8,byteSize:s}),o=2**(n-1),r=o-1;return t==="get"?function(c,a){const l=i.call(this,c,a);return(l&r)-(l&o)}:function(c,a,l){const f=a<0?o|a&r:a&r;i.call(this,c,f,l)}}}});export{Os as c};
