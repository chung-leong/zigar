var ln=Object.defineProperty;var an=(e,t,n)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pt=(e,t,n)=>an(e,typeof t!="symbol"?t+"":t,n);const V={Primitive:0,Array:1,Struct:2,Union:3,ErrorUnion:4,ErrorSet:5,Enum:6,Optional:7,Pointer:8,Slice:9,Vector:10,Opaque:11,ArgStruct:12,VariadicStruct:13,Function:14},He=Object.keys(V),P={HasValue:1,HasObject:2,HasPointer:4,HasSlot:8},$t={IsSize:16},Oe={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128},H={IsExtern:16,IsPacked:32,IsIterator:64,IsTuple:128,IsAllocator:256,IsPromise:512,IsGenerator:1024,IsAbortSignal:2048,IsOptional:4096},fn={IsOpenEnded:16,IsIterator:32},wt={HasSelector:16},L={HasLength:16,IsMultiple:32,IsSingle:64,IsConst:128,IsNullable:256},te={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128,IsOpaque:256},gt={IsGlobal:16},St={IsTypedArray:16,IsClampedArray:32},qe={HasOptions:16,IsThrowing:32,IsAsync:64},$={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Literal:7,Null:8,Undefined:9,Unsupported:10},Ft=Object.keys($),pe={IsRequired:1,IsReadOnly:2,IsPartOfSet:4,IsSelector:8,IsMethod:16,IsSentinel:32,IsBackingInt:64},ce={OK:0,Failure:1,Deadlock:2,Disabled:3},j={IsInactive:1,IsImmutable:2,IgnoreUncreated:4,IgnoreInactive:8,IgnoreArguments:16,IgnoreRetval:32};var zt;const Ye=globalThis[zt=Symbol.for("ZIGAR")]||(globalThis[zt]={});function un(e){return Ye[e]||(Ye[e]=Symbol(e))}function v(e){return un(e)}const w=v("memory"),O=v("slots"),ft=v("parent"),C=v("zig"),Ke=v("name"),Ee=v("type"),jt=v("flags"),Ne=v("class"),It=v("tag"),Ie=v("props"),we=v("pointer"),fe=v("sentinel"),Ze=v("array"),q=v("target"),le=v("entries"),he=v("max length"),it=v("keys"),kt=v("address"),me=v("length"),Me=v("last address"),Re=v("last length"),je=v("proxy"),Ue=v("cache"),ut=v("size"),hn=v("bit size"),X=v("align"),ve=v("const target"),ne=v("environment"),dn=v("attributes"),yn=v("primitive"),Ce=v("setters"),ue=v("typed array"),Lt=v("throwing"),Rt=v("promise"),mn=v("generator"),ht=v("allocator"),rt=v("signature"),xe=v("update"),_=v("restore"),_e=v("reset"),Y=v("vivificate"),z=v("visit"),U=v("copy"),Te=v("shape"),Z=v("initialize"),bn=v("restrict"),se=v("finalize"),Pe=v("cast"),ae=v("return"),pn=v("yield");function B(e,t,n){if(n){const{set:s,get:i,value:r,enumerable:o,configurable:c=!0,writable:f=!0}=n;Object.defineProperty(e,t,i||s?{get:i,set:s,configurable:c,enumerable:o}:{value:r,configurable:c,enumerable:o,writable:f})}return e}function ye(e,t){for(const[n,s]of Object.entries(t))B(e,n,s);for(const n of Object.getOwnPropertySymbols(t)){const s=t[n];B(e,n,s)}return e}function S(e){return e!==void 0?{value:e}:void 0}function Nt(e){return(e==null?void 0:e.error)==="return"?t=>{try{return t()}catch(n){return n}}:t=>t()}function Dt({type:e,bitSize:t}){switch(e){case $.Bool:return"boolean";case $.Int:case $.Uint:if(t>32)return"bigint";case $.Float:return"number"}}function Ht(e,t="utf-8"){const n=Xe[t]||(Xe[t]=new TextDecoder(t));let s;if(Array.isArray(e))if(e.length===1)s=e[0];else{let i=0;for(const c of e)i+=c.length;const{constructor:r}=e[0];s=new r(i);let o=0;for(const c of e)s.set(c,o),o+=c.length}else s=e;return s.buffer[Symbol.toStringTag]==="SharedArrayBuffer"&&(s=new s.constructor(s)),n.decode(s)}function Ut(e,t="utf-8"){switch(t){case"utf-16":{const{length:n}=e,s=new Uint16Array(n);for(let i=0;i<n;i++)s[i]=e.charCodeAt(i);return s}default:return(Qe[t]||(Qe[t]=new TextEncoder)).encode(e)}}function wn(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=String.fromCharCode.apply(null,t);return btoa(n)}function gn(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<n.byteLength;s++)n[s]=t.charCodeAt(s);return new DataView(n.buffer)}const Xe={},Qe={};function _t(e,t,n){let s=0,i=e.length;if(i===0)return 0;for(;s<i;){const r=Math.floor((s+i)/2);n(e[r])<=t?s=r+1:i=r}return i}const Sn=function(e,t){return t?!!(e&t-1):!1},In=function(e,t){return e+(t-1)&~(t-1)},An=0,ot=4294967295,ze=-1,En=function(e){return e===2863311530||e===-1431655766},de=function(e,t){return e+t};function Bt(e){var i;if(typeof e.length=="number")return e;const t=e[Symbol.iterator](),n=t.next(),s=(i=n.value)==null?void 0:i.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let r;for(;!(r=t.next()).done;)yield r.value}(),{length:s});{const r=[];let o=n;for(;!o.done;)r.push(o.value),o=t.next();return r}}function Gt(e,t){const{constructor:n}=e;if(n===t)return 1;if(n.child===t)return e.length}function Zt(e,t){return e===t||(e==null?void 0:e[rt])===t[rt]&&(e==null?void 0:e[ne])!==(t==null?void 0:t[ne])}function re(e,t){return e instanceof t||Zt(e==null?void 0:e.constructor,t)}function ke({get:e,set:t}){return e.special=t.special=!0,{get:e,set:t}}function dt(){return this}function yt(){return this[je]}function vn(){return String(this)}function Be(){}class Wt{constructor(){pt(this,"map",new WeakMap)}find(t){return this.map.get(t)}save(t,n){return this.map.set(t,n),n}}const ee={name:"",mixins:[],constructor:null};function I(e){return ee.constructor||ee.mixins.push(e),e}function xn(){return ee.constructor||(ee.constructor=Vn(ee.name,ee.mixins),ee.name="",ee.mixins=[]),ee.constructor}function Vn(e,t){const n=[],s=function(){for(const r of n)r.call(this)},{prototype:i}=s;B(s,"name",S(e));for(const r of t)for(let[o,c]of Object.entries(r))if(o==="init")n.push(c);else{if(typeof c!="function"){let f=i[o];if(f!==void 0){if((f==null?void 0:f.constructor)===Object)c=Object.assign({...f},c);else if(f!==c)throw new Error(`Duplicate property: ${o}`)}}B(i,o,S(c))}return s}function Es(){const e=xn();return new e}I({init(){this.accessorCache=new Map},getAccessor(e,t){var u;const{type:n,bitSize:s,bitOffset:i,byteSize:r}=t,o=[],c=r===void 0&&(s&7||i&7);c&&o.push("Unaligned");let f=Ft[n];s>32&&(n===$.Int||n===$.Uint)&&(s<=64?f=`Big${f}`:f=`Jumbo${f}`),o.push(f,`${n===$.Bool&&r?r*8:s}`),c&&o.push(`@${i}`);const l=e+o.join("");let a=DataView.prototype[l];if(a||(a=this.accessorCache.get(l),a))return a;for(;o.length>0;){const h=`getAccessor${o.join("")}`;if(a=(u=this[h])==null?void 0:u.call(this,e,t))break;o.pop()}if(!a)throw new Error(`No accessor available: ${l}`);return B(a,"name",S(l)),this.accessorCache.set(l,a),a}});I({getAccessorBool(e,t){const{byteSize:n}=t,s=n*8,i=this.getAccessor(e,{type:$.Uint,bitSize:s,byteSize:n});if(e==="get")return function(r,o){return!!i.call(this,r,o)};{const r=s<=32?0:0n,o=s<=32?1:1n;return function(c,f,l){i.call(this,c,f?o:r,l)}}}});I({getAccessorUint(e,t){const{bitSize:n,byteSize:s}=t;if(s){const i=this.getAccessor(e,{...t,bitSize:s*8}),r=2**n-1;return e==="get"?function(o,c){return i.call(this,o,c)&r}:function(o,c,f){const l=c&r;i.call(this,o,l,f)}}}});class On extends SyntaxError{constructor(t){super(`Cannot convert ${t} to an Int`)}}class Mn extends TypeError{constructor(){super("Unsupported")}}class Jt extends TypeError{constructor(t){const{name:n}=t;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class qt extends TypeError{constructor(t,n,s=null){const{name:i,type:r,byteSize:o}=t,c=n.byteLength,f=o!==1?"s":"";let l;if(r===V.Slice&&!s)l=`${i} has elements that are ${o} byte${f} in length, received ${c}`;else{const a=r===V.Slice?s.length*o:o;l=`${i} has ${a} byte${f}, received ${c}`}super(l)}}class Tn extends TypeError{constructor(t){const{type:n,byteSize:s,typedArray:i}=t,r=s!==1?"s":"",o=["ArrayBuffer","DataView"].map(Ae);i&&o.push(Ae(i.name));let c;n===V.Slice?c=`Expecting ${lt(o)} that can accommodate items ${s} byte${r} in length`:c=`Expecting ${lt(o)} that is ${s} byte${r} in length`,super(c)}}class Cn extends TypeError{constructor(t,n){const{name:s}=t;let i;typeof n=="number"||typeof n=="bigint"?i=`Value given does not correspond to an item of enum ${s}: ${n}`:i=`Enum item of the type ${s} expected, received ${n}`,super(i)}}class Pn extends TypeError{constructor(t,n){const{name:s}=t,i=typeof n;let r;i==="string"||i==="number"||$e(n)?($e(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),r=`Error ${i} does not corresponds to any error in error set ${s}: ${n}`):r=`Error of the type ${s} expected, received ${n}`,super(r)}}class Yt extends TypeError{constructor(t){const{name:n}=t;super(`Error given is not a part of error set ${n}`)}}class ge extends TypeError{constructor(t,n,s){const{name:i}=t,r=[];if(Array.isArray(n))for(const c of n)r.push(Ae(c));else r.push(Ae(n));const o=Qt(s);super(`${i} expects ${lt(r)} as argument, received ${o}`)}}class be extends ge{constructor(t,n,s=!1){var l;const{instance:{members:[i]},type:r,constructor:o}=t,c=[],f=Dt(i);if(f){let a;switch((l=i.structure)==null?void 0:l.type){case V.Enum:a="enum item";break;case V.ErrorSet:a="error";break;default:a=f}c.push(`array of ${a}s`)}else c.push("array of objects");o[ue]&&c.push(o[ue].name),r===V.Slice&&s&&c.push("length"),super(t,c.join(" or "),n)}}class We extends TypeError{constructor(t,n,s){const{name:i,length:r,instance:{members:[o]}}=t,{structure:{constructor:c}}=o,{length:f,constructor:l}=s,a=(n==null?void 0:n.length)??r,u=a!==1?"s":"";let h;l===c?h="only a single one":l.child===c?h=`a slice/array that has ${f}`:h=`${f} initializer${f>1?"s":""}`,super(`${i} has ${a} element${u}, received ${h}`)}}class At extends TypeError{constructor(t,n){t<0?super("Length of slice cannot be negative"):super(`Length of slice can be ${n} or less, received ${t}`)}}class zn extends TypeError{constructor(t,n){const{name:s}=t;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class $n extends TypeError{constructor(t,n){const{name:s,instance:{members:i}}=t,r=i.find(c=>c.name===n);let o;r?o=`Comptime value cannot be changed: ${n}`:o=`${s} does not have a property with that name: ${n}`,super(o)}}class Fn extends Error{constructor(t,n,s=!1){super();const i=r=>{t-=r,n-=r;const o=t!==1?"s":"",c=s?"at least ":"";this.message=`Expecting ${c}${t} argument${o}, received ${n}`,this.stack=mt(this.stack,"new Arg(")};i(0),B(this,xe,{value:i,enumerable:!1})}}class jn extends Error{constructor(){super("Undefined argument")}}class kn extends TypeError{constructor(){super("Non-slice pointers can only be created with the help of the new operator")}}class Ln extends TypeError{constructor(){super("Casting to function is not allowed")}}class Rn extends TypeError{constructor(t,n){const{name:s}=t,{constructor:{name:i}}=n;super(`Conversion of ${i} to ${s} requires an explicit cast`)}}class Et extends TypeError{constructor(t,n,s,i){const{name:r}=t;super(`${r} expects the sentinel value ${n} at ${i-1}, found at ${s}`)}}class et extends TypeError{constructor(t,n,s){const{name:i}=t;super(`${i} expects the sentinel value ${n} at ${s-1}`)}}class Nn extends TypeError{constructor(t,n){super(`Unable to simultaneously align memory to ${n}-byte and ${t}-byte boundary`)}}class ie extends TypeError{constructor(t,n){const s=Qt(n);super(`Expected ${Ae(t)}, received ${s}`)}}class Dn extends TypeError{constructor(){super("Null pointer")}}class Kt extends TypeError{constructor(t){super(`Object has been freed already: ${t.constructor.name}`)}}class vt extends TypeError{constructor(t,n){const{name:s}=t;let i;if(n!=null){const r=n instanceof Object&&n.constructor!==Object?`${n.constructor.name} object`:typeof n;i=`${en(r)} ${r}`}else i=n+"";super(`${s} cannot point to ${i}`)}}class Xt extends TypeError{constructor(){super("Pointers in Zig memory cannot point to garbage-collected object")}}class ct extends RangeError{constructor(t,n){const{name:s}=t;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class xt extends TypeError{constructor(t){const{name:n}=t,s=n!==void 0?`Property ${n}`:"Element";super(`${s} can only be undefined`)}}class Hn extends TypeError{constructor(t){const{name:n,structure:{name:s}}=t;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class Un extends TypeError{constructor(){super("Unable to modify read-only object")}}class _n extends TypeError{constructor(t){const{name:n}=t;super(`${n} cannot point to a read-only object`)}}class Bn extends TypeError{constructor(){super("Unexpected async generator")}}class De extends Error{constructor(t,n=0){if(t instanceof Error)return super(t.message),t.stack=mt(this.stack,n),t;super(t??"Error encountered in Zig code")}}class Gn extends De{constructor(t){super("Program exited"),this.code=t}}function Zn(e,t){const n=s=>{t-=s,e.message=`args[${t}]: ${e.message}`,e.stack=mt(e.stack,"new Arg(")};return n(0),B(e,xe,{value:n,enumerable:!1}),e}function mt(e,t){if(typeof e=="string"){const n=e.split(`
`),s=n.findIndex(i=>i.includes(t));s!==-1&&(n.splice(1,s),e=n.join(`
`))}return e}function Vt(e,t,n){return n instanceof RangeError&&!(n instanceof ct)&&(n=new ct(e,t)),n}function Se(){throw new Un}function Wn(e){let t=e.replace(/_/g," ");try{t=t.replace(new RegExp("(\\p{Uppercase}+)(\\p{Lowercase}*)","gu"),(n,s,i)=>s.length===1?` ${s.toLocaleLowerCase()}${i}`:i?n:` ${s}`).trimStart()}catch{}return t.charAt(0).toLocaleUpperCase()+t.substring(1)}function $e(e){return typeof e=="object"&&typeof e.error=="string"&&Object.keys(e).length===1}function Qt(e){const t=typeof e;let n;return t==="object"?n=e?Object.prototype.toString.call(e):"null":n=t,Ae(n)}function Ae(e){return`${en(e)} ${e}`}function en(e){return/^\W*[aeiou]/i.test(e)?"an":"a"}function lt(e,t="or"){const n=` ${t} `;return e.length>2?e.slice(0,-1).join(", ")+n+e[e.length-1]:e.join(n)}I({defineAlloc(){return{value(e,t=1){const n=31-Math.clz32(t),{vtable:{alloc:s},ptr:i}=this,r=s(i,e,n,0);if(!r)throw new Error("Out of memory");r.length=e;const o=r["*"][w];return o[C].align=t,o}}},defineFree(){const e=this;return{value(t){const{dv:n,align:s}=Ot(t),i=n==null?void 0:n[C];if(!i)throw new ie("object containing allocated Zig memory",t);const{address:r}=i;if(r===ze)throw new Kt(t);const o=31-Math.clz32(s),{vtable:{free:c},ptr:f}=this;c(f,n,o,0),e.releaseZigView(n)}}},defineDupe(){const e=this.getCopyFunction();return{value(t){const{dv:n,align:s,constructor:i}=Ot(t);if(!n)throw new ie("string, DataView, typed array, or Zig object",t);const r=this.alloc(n.byteLength,s);return e(r,n),i?i(r):r}}}});function Ot(e){var i;let t,n=1,s=null;if(e instanceof DataView){t=e;const r=(i=t==null?void 0:t[C])==null?void 0:i.align;r&&(n=r)}else if(e instanceof ArrayBuffer)t=new DataView(e);else if(e)if(e[w])e.constructor[Ee]===V.Pointer&&(e=e["*"]),t=e[w],s=e.constructor,n=s[X];else{typeof e=="string"&&(e=Ut(e));const{buffer:r,byteOffset:o,byteLength:c,BYTES_PER_ELEMENT:f}=e;r&&o!==void 0&&c!==void 0&&(t=new DataView(r,o,c),n=f)}return{dv:t,align:n,constructor:s}}I({init(){this.jsFunctionThunkMap=new Map,this.jsFunctionCallerMap=new Map,this.jsFunctionControllerMap=new Map,this.jsFunctionIdMap=new WeakMap,this.jsFunctionNextId=1},getFunctionId(e){let t=this.jsFunctionIdMap.get(e);return t===void 0&&(t=this.jsFunctionNextId++,this.jsFunctionIdMap.set(e,t)),t},getFunctionThunk(e,t){const n=this.getFunctionId(e);let s=this.jsFunctionThunkMap.get(n);if(s===void 0){const i=this.getViewAddress(t[w]),r=this.createJsThunk(i,n);if(!r)throw new Error("Unable to create function thunk");s=this.obtainZigView(r,0),this.jsFunctionThunkMap.set(n,s),this.jsFunctionControllerMap.set(n,t)}return s},createInboundCaller(e,t){const n=(i,r)=>{let o=ce.OK,c=!1;try{const f=t(i);if(z in f){f[z]("reset");const u=this.startContext();this.updatePointerTargets(u,f,!0),this.updateShadowTargets(u),this.endContext()}const l=function(u){try{if(t[Lt]&&u instanceof Error)f[ae](u);else throw u}catch{o=ce.Failure,console.error(u)}},a=function(u){try{f[ae](u)}catch(h){o=ce.Failure,console.error(h)}};try{const u=e(...f),h=f.hasOwnProperty(ae);if((u==null?void 0:u[Symbol.toStringTag])==="Promise")if(r||h){const d=u.then(a,l);r&&d.then(()=>this.finalizeAsyncCall(r,o)),c=!0,o=ce.OK}else o=ce.Deadlock;else if(u!=null&&u[Symbol.asyncIterator])if(f.hasOwnProperty(pn))this.pipeContents(u,f),o=ce.OK;else throw new Bn;else(u!=null||!h)&&a(u)}catch(u){l(u)}}catch(f){console.error(f),o=ce.Failure}return r&&!c&&this.finalizeAsyncCall(r,o),o},s=this.getFunctionId(e);return this.jsFunctionCallerMap.set(s,n),function(...i){return e(...i)}},defineArgIterator(e){const t=this,n=e.filter(({structure:s})=>s.type===V.Struct&&s.flags&H.IsAllocator).length;return{value(){var f;let s,i=0,r=0,o=0;const c=[];for(const[l,{structure:a,type:u}]of e.entries())try{let h=this[l];u===$.Object&&((f=h==null?void 0:h[w])!=null&&f[C])&&(h=new h.constructor(h));let d,m;a.type===V.Struct&&(a.flags&H.IsAllocator?(d=n===1?"allocator":`allocator${++i}`,m=this[ht]=h):a.flags&H.IsPromise?(d="callback",++r===1&&(m=t.createPromiseCallback(this,h))):a.flags&H.IsGenerator?(d="callback",++r===1&&(m=t.createGeneratorCallback(this,h))):a.flags&H.IsAbortSignal&&(d="signal",++o===1&&(m=t.createInboundSignal(h)))),d!==void 0?m!==void 0&&(s||(s={}),s[d]=m):c.push(h)}catch(h){c.push(h)}return s&&c.push(s),c[Symbol.iterator]()}}},handleJsCall(e,t,n,s=0){const i=this.obtainZigView(t,n,!1),r=this.jsFunctionCallerMap.get(e);return r?r(i,s):ce.Failure},releaseFunction(e){const t=this.jsFunctionThunkMap.get(e),n=this.jsFunctionControllerMap.get(e);if(t&&n){const s=this.getViewAddress(n[w]),i=this.getViewAddress(t);this.destroyJsThunk(s,i),this.releaseZigView(t),e&&(this.jsFunctionThunkMap.delete(e),this.jsFunctionCallerMap.delete(e),this.jsFunctionControllerMap.delete(e))}},exports:{handleJsCall:{argType:"iiii",returnType:"i"},releaseFunction:{argType:"i"}},imports:{createJsThunk:{argType:"ii",returnType:"i"},destroyJsThunk:{argType:"ii",returnType:"i"},finalizeAsyncCall:{argType:"ii"}},queueJsAction(e,t,n,s,i){this.performJsAction(e,t,n,s,i)}});I({createOutboundCaller(e,t){const n=this,s=function(...i){if(!n.runThunk)return n.initPromise.then(()=>s(...i));const r=new t(i,this==null?void 0:this[ht]);try{return n.invokeThunk(e,s,r)}catch(o){if(o instanceof Gn&&o.code===0)return;throw o}};return s},copyArguments(e,t,n,s,i){let r=0,o=0,c=0;const f=e[Ce];for(const{type:l,structure:a}of n){let u,h,d,m;if(a.type===V.Struct&&(a.flags&H.IsAllocator?u=(++c===1?(s==null?void 0:s.allocator)??(s==null?void 0:s.allocator1):s==null?void 0:s[`allocator${c}`])??this.createDefaultAllocator(e,a):a.flags&H.IsPromise?(h||(h=this.createPromise(e,s==null?void 0:s.callback)),u=h):a.flags&H.IsGenerator?(d||(d=this.createGenerator(e,s==null?void 0:s.callback)),u=d):a.flags&H.IsAbortSignal&&(m||(m=this.createSignal(a,s==null?void 0:s.signal)),u=m)),u===void 0&&(u=t[o++],u===void 0&&l!==$.Void))throw new jn;try{f[r++].call(e,u,i)}catch(g){throw Zn(g,r-1)}}},invokeThunk(e,t,n){var d;const s=this.startContext(),i=n[dn],r=this.getViewAddress(e[w]),o=this.getViewAddress(t[w]),c=se in n,f=z in n;f&&this.updatePointerAddresses(s,n);const l=this.getShadowAddress(s,n,null,!1),a=i?this.getShadowAddress(s,i):0;this.updateShadows(s);const u=()=>{var m,g;this.updateShadowTargets(s),f&&this.updatePointerTargets(s,n),this.libc&&((m=this.flushStdout)==null||m.call(this)),(g=this.flushConsole)==null||g.call(this),this.endContext()};if(c&&(n[se]=u),!(i?this.runVariadicThunk(r,o,l,a,i.length):this.runThunk(r,o,l)))throw u(),new De;if((d=n[U])==null||d.call(n,this.findShadowView(n[w])),c){let m=null;try{m=n.retval}catch(g){m=new De(g,1)}return m!=null&&n[ae](m),n[Rt]??n[mn]}else{u();try{return n.retval}catch(m){throw new De(m,1)}}},imports:{runThunk:{argType:"iii",returnType:"b"},runVariadicThunk:{argType:"iiiii",returnType:"b"}}});I({init(){const e={type:$.Int,bitSize:8,byteSize:1},t={type:$.Int,bitSize:16,byteSize:2},n={type:$.Int,bitSize:32,byteSize:4},s=this.getAccessor("get",e),i=this.getAccessor("set",e),r=this.getAccessor("get",t),o=this.getAccessor("set",t),c=this.getAccessor("get",n),f=this.getAccessor("set",n);this.copiers={0:Be,1:function(l,a){i.call(l,0,s.call(a,0))},2:function(l,a){o.call(l,0,r.call(a,0,!0),!0)},4:function(l,a){f.call(l,0,c.call(a,0,!0),!0)},8:function(l,a){f.call(l,0,c.call(a,0,!0),!0),f.call(l,4,c.call(a,4,!0),!0)},16:function(l,a){f.call(l,0,c.call(a,0,!0),!0),f.call(l,4,c.call(a,4,!0),!0),f.call(l,8,c.call(a,8,!0),!0),f.call(l,12,c.call(a,12,!0),!0)},any:function(l,a){let u=0,h=l.byteLength;for(;u+4<=h;)f.call(l,u,c.call(a,u,!0),!0),u+=4;for(;u+1<=h;)i.call(l,u,s.call(a,u)),u++}},this.resetters={0:Be,1:function(l,a){i.call(l,a,0)},2:function(l,a){o.call(l,a,0,!0)},4:function(l,a){f.call(l,a,0,!0)},8:function(l,a){f.call(l,a+0,0,!0),f.call(l,a+4,0,!0)},16:function(l,a){f.call(l,a+0,0,!0),f.call(l,a+4,0,!0),f.call(l,a+8,0,!0),f.call(l,a+12,0,!0)},any:function(l,a,u){let h=a;for(;h+4<=u;)f.call(l,h,0,!0),h+=4;for(;h+1<=u;)i.call(l,h,0),h++}}},defineCopier(e,t){const n=this.getCopyFunction(e,t);return{value(s){var o,c;(o=this[_])==null||o.call(this),(c=s[_])==null||c.call(s);const i=s[w],r=this[w];n(r,i)}}},defineResetter(e,t){const n=this.getResetFunction(t);return{value(){var i;(i=this[_])==null||i.call(this);const s=this[w];n(s,e,t)}}},getCopyFunction(e,t=!1){return(t?void 0:this.copiers[e])??this.copiers.any},getResetFunction(e){return this.resetters[e]??this.resetters.any},defineRetvalCopier({byteSize:e,bitOffset:t}){if(e>0){const n=this,s=t>>3,i=this.getCopyFunction(e);return{value(r){const o=this[w],{address:c}=r[C],f=new DataView(n.memory.buffer,c+s,e),l=new DataView(o.buffer,o.byteOffset+s,e);i(l,f)}}}},copyExternBytes(e,t,n){const{memory:s}=this,i=new DataView(s.buffer,t,n);this.getCopyFunction(n)(e,i)}});I({addIntConversion(e){return function(t,n){const s=e.call(this,t,n),{flags:i,bitSize:r}=n;if(t==="set")return r>32?function(o,c,f){s.call(this,o,BigInt(c),f)}:function(o,c,f){const l=Number(c);if(!isFinite(l))throw new On(c);s.call(this,o,l,f)};{const{flags:o}=n.structure;if(o&$t.IsSize&&r>32){const c=BigInt(Number.MAX_SAFE_INTEGER),f=BigInt(Number.MIN_SAFE_INTEGER);return function(l,a){const u=s.call(this,l,a);return f<=u&&u<=c?Number(u):u}}}return s}}});I({init(){this.isMemoryMapping=!0,this.memoryList=[],this.contextCount=0},startContext(){return++this.contextCount,{shadowList:[]}},endContext(){if(--this.contextCount===0){for(const{shadowDV:e}of this.memoryList)e&&this.freeShadowMemory(e);this.memoryList.splice(0)}},getShadowAddress(e,t,n,s){const i=t[w];if(n){if(n.address===void 0){const{start:r,end:o,targets:c}=n;let f=0,l;for(const x of c){const E=x[w],F=E.byteOffset,k=x.constructor[X]??E[X];(f===void 0||k>f)&&(f=k,l=F)}const a=o-r,u=this.allocateShadowMemory(a+f,1),h=this.getViewAddress(u),d=In(de(h,l-r),f),m=de(d,r-l);for(const x of c){const E=x[w],F=E.byteOffset;if(F!==l){const k=x.constructor[X]??E[X];if(Sn(de(m,F-r),k))throw new Nn(k,f)}}const g=u.byteOffset+Number(m-h),A=new DataView(u.buffer,g,a);A[C]={address:m,len:a,align:1,unalignedAddress:h,type:Jn.Scratch};const p=new DataView(i.buffer,Number(r),a),b=this.registerMemory(m,a,1,s,p,A);e.shadowList.push(b),n.address=m}return de(n.address,i.byteOffset-n.start)}else{const r=t.constructor[X]??i[X],o=i.byteLength,c=this.allocateShadowMemory(o,r),f=this.getViewAddress(c),l=this.registerMemory(f,o,1,s,i,c);return e.shadowList.push(l),f}},updateShadows(e){const t=this.getCopyFunction();for(let{targetDV:n,shadowDV:s}of e.shadowList)s=this.restoreView(s),t(s,n)},updateShadowTargets(e){const t=this.getCopyFunction();for(let{targetDV:n,shadowDV:s,writable:i}of e.shadowList)i&&(s=this.restoreView(s),t(n,s))},registerMemory(e,t,n,s,i,r){const o=tt(this.memoryList,e);let c=this.memoryList[o-1];return(c==null?void 0:c.address)===e&&c.len===t?c.writable||(c.writable=s):(c={address:e,len:t,align:n,writable:s,targetDV:i,shadowDV:r},this.memoryList.splice(o,0,c)),c},unregisterMemory(e,t){const n=tt(this.memoryList,e),s=this.memoryList[n-1];if((s==null?void 0:s.address)===e&&s.len===t)return this.memoryList.splice(n-1,1),s},findMemory(e,t,n,s){let i=n*(s??0);const r=tt(this.memoryList,t),o=this.memoryList[r-1];let c;if((o==null?void 0:o.address)===t&&o.len===i)c=o.targetDV;else if((o==null?void 0:o.address)<=t&&de(t,i)<=de(o.address,o.len)){const f=Number(t-o.address),l=s===void 0,{targetDV:a}=o;l&&(i=a.byteLength-f),c=this.obtainView(a.buffer,a.byteOffset+f,i),l&&(c[X]=o.align)}if(!c)c=this.obtainZigView(t,i);else{let{targetDV:f,shadowDV:l}=o;l&&e&&!e.shadowList.includes(o)&&(l=this.restoreView(l),this.getCopyFunction()(f,l))}return c},findShadowView(e){for(const{shadowDV:t,targetDV:n}of this.memoryList)if(n===e)return t},releaseZigView(e){const t=e[C],n=t==null?void 0:t.address;n&&n!==ze&&(t.address=ze)},getViewAddress(e){const t=e[C];if(t)return t.address;{const n=this.getBufferAddress(e.buffer);return de(n,e.byteOffset)}},imports:{allocateScratchMemory:{argType:"ii",returnType:"i"},freeScratchMemory:{argType:"iii"}},exports:{getViewAddress:{argType:"v",returnType:"i"}},usizeMaxBuffer:new ArrayBuffer(0),allocateShadowMemory(e,t){const n=e?this.allocateScratchMemory(e,t):0;if(!n&&e)throw new Error("Out of memory");const s=this.obtainZigView(n,e),i=s==null?void 0:s[C];return i&&(i.align=t),s},freeShadowMemory(e){const{address:t,unalignedAddress:n,len:s,align:i}=e[C];s&&this.freeScratchMemory(n??t,s,i),this.releaseZigView(e)},obtainZigView(e,t,n=!0){if(En(e)&&(e=t>0?0:ot),!e&&t)return null;let{buffer:s}=this.memory;return e===ot&&(s=this.usizeMaxBuffer,e=An,t=0),n?this.obtainView(s,e,t):new DataView(s,e,t)},getTargetAddress(e,t,n,s){const i=t[w];return i[C]?this.getViewAddress(i):i.byteLength===0?0:this.getShadowAddress(e,t,n,s)},getBufferAddress(e){return 0}});function tt(e,t){return _t(e,t,n=>n.address)}const Jn={Normal:0,Scratch:1};I({init(){this.released=!1,this.abandoned=!1,this.nextValueIndex=1,this.valueMap=new Map,this.valueIndices=new Map,this.options=null,this.executable=null,this.memory=null,this.table=null,this.initialTableLength=0,this.exportedFunctions=null},releaseFunctions(){const e=()=>{throw new Error("Module was abandoned")};for(const t of Object.keys(this.imports))this[t]&&(this[t]=e)},abandonModule(){var e;this.abandoned||(this.releaseFunctions(),(e=this.unlinkVariables)==null||e.call(this),this.abandoned=!0)},imports:{initialize:{argType:""}},exports:{displayPanic:{argType:"ii"}},async initialize(e){var t;(t=this.setCustomWASI)==null||t.call(this,e),await this.initPromise},getObjectIndex(e){if(e!=null){let t=this.valueIndices.get(e);return t===void 0&&(t=this.nextValueIndex++,this.valueIndices.set(e,t),this.valueMap.set(t,e)),t}else return 0},fromWebAssembly(e,t){switch(e){case"v":case"s":return this.valueMap.get(t);case"i":return t;case"b":return!!t}},toWebAssembly(e,t){switch(e){case"v":case"s":return this.getObjectIndex(t);case"i":return t;case"b":return t?1:0}},exportFunction(e,t="",n="",s){return e?(...i)=>{i=i.map((c,f)=>this.fromWebAssembly(t.charAt(f),c));const r=e.apply(this,i);return this.toWebAssembly(n,r)}:()=>{}},importFunction(e,t="",n=""){return(...s)=>{s=s.map((r,o)=>this.toWebAssembly(t.charAt(o),r));const i=e.apply(this,s);return this.fromWebAssembly(n,i)}},exportFunctions(){const e={};for(const[t,{argType:n,returnType:s,alias:i}]of Object.entries(this.exports)){const r=this[i??t];r&&(e[`_${t}`]=this.exportFunction(r,n,s,t))}return e},importFunctions(e){for(const[t,{argType:n,returnType:s}]of Object.entries(this.imports)){const i=e[t];i&&B(this,t,{value:this.importFunction(i,n,s)})}},async instantiateWebAssembly(e,t){var A;const{memoryInitial:n,memoryMax:s,tableInitial:i,multithreaded:r}=this.options=t,o=await e,c=o[Symbol.toStringTag]==="Response"?"Streaming":"",f=WebAssembly,l=f["compile"+c],a=this.executable=await l(o),u=this.exportFunctions(),h={},d={},m={},g=this.exportedModules={env:h,wasi:d,wasi_snapshot_preview1:m};for(const{module:p,name:b,kind:x}of f.Module.imports(a))x==="function"&&(p==="env"?h[b]=u[b]??Be:p==="wasi_snapshot_preview1"?m[b]=this.getWASIHandler(b):p==="wasi"&&(d[b]=((A=this.getThreadHandler)==null?void 0:A.call(this,b))??Be));return this.memory=h.memory=new f.Memory({initial:n,maximum:s,shared:r}),this.table=h.__indirect_function_table=new f.Table({initial:i,element:"anyfunc",shared:r}),this.initialTableLength=i,new f.Instance(a,g)},loadModule(e,t){return this.initPromise=(async()=>{var i,r;const n=await this.instantiateWebAssembly(e,t),{exports:s}=n;if(this.importFunctions(s),this.trackInstance(n),this.customWASI){const o={...s,memory:this.memory},c=new Proxy(n,{get(f,l){return l==="exports"?o:f[l]}});(r=(i=this.customWASI).initialize)==null||r.call(i,c)}this.initialize()})()},displayPanic(e,t){const n=new Uint8Array(this.memory.buffer,e,t),s=Ht(n);console.error(`Zig panic: ${s}`)},trackInstance(e){const t=new WeakRef(e);Object.defineProperty(this,"released",{get:()=>!t.deref(),enumerable:!0})}});I({updatePointerAddresses(e,t){const n=new Map,s=new Map,i=[],r=function(l){var u;const a=this[we];if(n.get(a)===void 0){const h=a[O][0];if(h){const d=!a.constructor.const,m={target:h,writable:d},g=h[w];if(g[C])n.set(a,null);else{n.set(a,h);const A=s.get(g.buffer);if(A){const p=Array.isArray(A)?A:[A],b=_t(p,g.byteOffset,x=>x.target[w].byteOffset);p.splice(b,0,m),Array.isArray(A)||(s.set(g.buffer,p),i.push(p))}else s.set(g.buffer,m);(u=h[z])==null||u.call(h,r,0)}}}},o=j.IgnoreRetval|j.IgnoreInactive;t[z](r,o);const c=this.findTargetClusters(i),f=new Map;for(const l of c)for(const a of l.targets)f.set(a,l);for(const[l,a]of n)if(a){const u=f.get(a),h=(u==null?void 0:u.writable)??!l.constructor.const;l[kt]=this.getTargetAddress(e,a,u,h),me in l&&(l[me]=a.length)}},updatePointerTargets(e,t,n=!1){const s=new Map,i=function(o){var f,l;const c=this[we];if(!s.get(c)){s.set(c,!0);const a=c[O][0],u=!a||!(o&j.IsImmutable)?c[xe](e,!0,!(o&j.IsInactive)):a,h=c.constructor.const?j.IsImmutable:0;h&j.IsImmutable||a&&!a[w][C]&&((f=a[z])==null||f.call(a,i,h)),u!==a&&u&&!u[w][C]&&((l=u==null?void 0:u[z])==null||l.call(u,i,h))}},r=n?j.IgnoreRetval:0;t[z](i,r)},findTargetClusters(e){const t=[];for(const n of e){let s=null,i=0,r=0,o=null;for(const{target:c,writable:f}of n){const l=c[w],{byteOffset:a,byteLength:u}=l,h=a+u;let d=!0;s&&(r>a?(o?o.writable||(o.writable=f):(o={targets:[s],start:i,end:r,address:void 0,misaligned:void 0,writable:f},t.push(o)),o.targets.push(c),h>r?o.end=h:d=!1):o=null),d&&(s=c,i=a,r=h)}}return t}});I({init(){this.viewMap=new WeakMap},extractView(e,t,n=Yn){var f;const{type:s,byteSize:i,constructor:r}=e;let o;const c=t==null?void 0:t[Symbol.toStringTag];if(c&&(c==="DataView"?o=this.registerView(t):c==="ArrayBuffer"?o=this.obtainView(t,0,t.byteLength):(c&&c===((f=r[ue])==null?void 0:f.name)||c==="Uint8ClampedArray"&&r[ue]===Uint8Array)&&(o=this.obtainView(t.buffer,t.byteOffset,t.byteLength))),!o){const l=t==null?void 0:t[w];if(l){const{constructor:a,instance:{members:[u]}}=e;if(re(t,a))return l;if(qn(s)){const{byteSize:h,structure:{constructor:d}}=u,m=Gt(t,d);if(m!==void 0){if(s===V.Slice||m*h===i)return l;throw new We(e,null,t)}}}}return o?i!==void 0&&Mt(o,e):n==null||n(e,t),o},assignView(e,t,n,s,i){var f,l,a,u;const{byteSize:r,type:o}=n,c=r??1;if(e[w]){const h=o===V.Slice?c*e.length:c;if(t.byteLength!==h)throw new qt(n,t,e);const d={[w]:t};(u=(a=e.constructor[fe])==null?void 0:a.validateData)==null||u.call(a,d,e.length),e[U](d)}else{r!==void 0&&Mt(t,n);const h=t.byteLength/c,d={[w]:t};(l=(f=e.constructor[fe])==null?void 0:f.validateData)==null||l.call(f,d,h),i&&(s=!0),e[Te](s?null:t,h,i),s&&e[U](d)}},findViewAt(e,t,n){var r;let s=this.viewMap.get(e),i;if(s)if(s instanceof DataView)if(s.byteOffset===t&&s.byteLength===n)i=s,s=null;else{const o=s,c=`${o.byteOffset}:${o.byteLength}`;s=new Map([[c,o]]),this.viewMap.set(e,s)}else i=s.get(`${t}:${n}`);return((r=i==null?void 0:i[C])==null?void 0:r.address)===ze&&(i=null),{existing:i,entry:s}},obtainView(e,t,n){var o;const{existing:s,entry:i}=this.findViewAt(e,t,n);let r;return s||(r=new DataView(e,t,n),i?i.set(`${t}:${n}`,r):this.viewMap.set(e,r),(e===((o=this.memory)==null?void 0:o.buffer)||e===this.usizeMaxBuffer)&&(r[C]={address:t,len:n}),r)},registerView(e){if(!e[C]){const{buffer:t,byteOffset:n,byteLength:s}=e,{existing:i,entry:r}=this.findViewAt(t,n,s);if(i)return i;r?r.set(`${n}:${s}`,e):this.viewMap.set(t,e)}return e},allocateMemory(e,t=0,n=null){var s;return((s=n==null?void 0:n.alloc)==null?void 0:s.call(n,e,t))??this.allocateJSMemory(e,t)},allocateJSMemory(e,t){return this.obtainView(new ArrayBuffer(e),0,e)},restoreView(e){const t=e==null?void 0:e[C];return(t==null?void 0:t.len)>0&&e.buffer.byteLength===0&&(e=this.obtainZigView(t.address,t.len),t.align&&(e[C].align=t.align)),e},defineRestorer(){const e=this;return{value(){var s,i;const t=this[w],n=e.restoreView(t);if(t!==n){const r=this[ve]??this;return r[w]=n,(i=(s=r.constructor[Ue])==null?void 0:s.save)==null||i.call(s,n,r[je]??r),!0}else return!1}}}});function Mt(e,t){const{byteSize:n,type:s}=t;if(!(s===V.Slice?e.byteLength%n===0:e.byteLength===n))throw new qt(t,e)}function qn(e){return e===V.Array||e===V.Vector||e===V.Slice}function Yn(e){throw new Tn(e)}I({makeReadOnly(e){tn(e)}});const Kn=Object.getOwnPropertyDescriptors,Ge=Object.defineProperty;function tn(e){const t=e[we];if(t)nt(t,["length"]);else{const n=e[Ze];n?(nt(n),Xn(n)):nt(e)}}function nt(e,t=[]){const n=Kn(e.constructor.prototype);for(const[s,i]of Object.entries(n))i.set&&!t.includes(s)&&(i.set=Se,Ge(e,s,i));Ge(e,ve,{value:e})}function Xn(e){Ge(e,"set",{value:Se});const t=e.get;Ge(e,"get",{value:function(s){const i=t.call(this,s);return(i==null?void 0:i[ve])===null&&tn(i),i}})}I({defineArrayEntries(){return S(ts)},defineArrayIterator(){return S(Qn)}});function Qn(){const e=this[Ze]??this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e.get(r),i=!1}else i=!0;return{value:s,done:i}}}}function es(e){const t=Nt(e),n=this[Ze]??this,s=this.length;let i=0;return{next(){let r,o;if(i<s){const c=i++;r=[c,t(()=>n.get(c))],o=!1}else o=!0;return{value:r,done:o}}}}function ts(e){return{[Symbol.iterator]:es.bind(this,e),length:this.length}}I({defineStructEntries(){return S(nn)},defineStructIterator(){return S(ns)}});function nn(e){return{[Symbol.iterator]:ss.bind(this,e),length:this[Ie].length}}function ns(e){return nn.call(this,e)[Symbol.iterator]()}function ss(e){const t=Nt(e),n=this,s=this[Ie];let i=0;return{next(){let r,o;if(i<s.length){const c=s[i++];r=[c,t(()=>n[c])],o=!1}else o=!0;return{value:r,done:o}}}}I({defineVectorEntries(){return S(os)},defineVectorIterator(){return S(is)}});function is(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e[r],i=!1}else i=!0;return{value:s,done:i}}}}function rs(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=[r,e[r]],i=!1}else i=!0;return{value:s,done:i}}}}function os(){return{[Symbol.iterator]:rs.bind(this),length:this.length}}I({defineMember(e,t=!0){if(!e)return{};const{type:n,structure:s}=e,i=`defineMember${Ft[n]}`,o=this[i].call(this,e);if(t&&s){const{type:c}=s,f=`transformDescriptor${He[c]}`,l=this[f];if(l)return l.call(this,o,e)}return o}});function sn(e,{get:t,set:n}){return e!==void 0?{get:function(){return t.call(this,e)},set:n?function(s,i){return n.call(this,e,s,i)}:void 0}:{get:t,set:n}}I({defineBase64(e){const t=this;return ke({get(){return wn(this.dataView)},set(n,s){if(typeof n!="string")throw new ie("string",n);const i=gn(n);t.assignView(this,i,e,!1,s)}})}});I({defineMemberBool(e){return this.defineMemberUsing(e,this.getAccessor)}});I({defineClampedArray(e){const t=this,n=Uint8ClampedArray;return ke({get(){const s=this.typedArray;return new n(s.buffer,s.byteOffset,s.length)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new ie(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});I({defineDataView(e){const t=this;return ke({get(){var s;return(s=this[_])==null||s.call(this),this[w]},set(n,s){if((n==null?void 0:n[Symbol.toStringTag])!=="DataView")throw new ie("DataView",n);t.assignView(this,n,e,!0,s)}})}});I({defineMemberFloat(e){return this.defineMemberUsing(e,this.getAccessor)}});I({defineMemberInt(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});I({defineMemberObject(e){return sn(e.slot,{get:e.structure.flags&P.HasValue?cs:ls,set:e.flags&pe.IsReadOnly?Se:as})}});function cs(e){return(this[O][e]??this[Y](e)).$}function ls(e){return this[O][e]??this[Y](e)}function as(e,t,n){(this[O][e]??this[Y](e))[Z](t,n)}I({defineMemberUsing(e,t){const{littleEndian:n}=this,{bitOffset:s,byteSize:i}=e,r=t.call(this,"get",e),o=t.call(this,"set",e);if(s!==void 0){const c=s>>3;return{get:function(){var l;try{return r.call(this[w],c,n)}catch(a){if(a instanceof TypeError&&((l=this[_])!=null&&l.call(this)))return r.call(this[w],c,n);throw a}},set:function(l){var a;try{return o.call(this[w],c,l,n)}catch(u){if(u instanceof TypeError&&((a=this[_])!=null&&a.call(this)))return o.call(this[w],c,l,n);throw u}}}}else return{get:function(f){var l;try{return r.call(this[w],f*i,n)}catch(a){if(a instanceof TypeError&&((l=this[_])!=null&&l.call(this)))return r.call(this[w],f*i,n);throw Vt(e,f,a)}},set:function(f,l){var a;try{return o.call(this[w],f*i,l,n)}catch(u){if(u instanceof TypeError&&((a=this[_])!=null&&a.call(this)))return o.call(this[w],f*i,l,n);throw Vt(e,f,u)}}}}});I({defineSentinel(e){const{byteSize:t,instance:{members:[n,s],template:i}}=e,{get:r}=this.defineMember(s),{get:o}=this.defineMember(n),c=r.call(i,0),f=!!(s.flags&pe.IsRequired),{runtimeSafety:l}=this;return S({value:c,bytes:i[w],validateValue(a,u,h){if(f){if(l&&a===c&&u!==h-1)throw new Et(e,a,u,h);if(a!==c&&u===h-1)throw new et(e,c,h)}},validateData(a,u){if(f){if(l)for(let h=0;h<u;h++){const d=o.call(a,h);if(d===c&&h!==u-1)throw new Et(e,c,h,u);if(d!==c&&h===u-1)throw new et(e,c,u)}else if(u>0&&u*t===a[w].byteLength&&o.call(a,u-1)!==c)throw new et(e,c,u)}},isRequired:f})},findSentinel(e,t){const{memory:n}=this,s=t.byteLength,i=n.buffer.byteLength-s+1;for(let r=e;r<i;r+=s){const o=new DataView(n.buffer,r,s);let c=!0;for(let f=0;f<s;f++){const l=o.getUint8(f),a=t.getUint8(f);if(l!==a){c=!1;break}}if(c)return(r-e)/s}}});I({defineString(e){const t=this,{byteSize:n}=e.instance.members[0],s=`utf-${n*8}`;return ke({get(){var o;let i=Ht(this.typedArray,s);const r=(o=this.constructor[fe])==null?void 0:o.value;return r!==void 0&&i.charCodeAt(i.length-1)===r&&(i=i.slice(0,-1)),i},set(i,r){var l;if(typeof i!="string")throw new ie("string",i);const o=(l=this.constructor[fe])==null?void 0:l.value;o!==void 0&&i.charCodeAt(i.length-1)!==o&&(i+=String.fromCharCode(o));const c=Ut(i,s),f=new DataView(c.buffer);t.assignView(this,f,e,!1,r)}})}});I({defineValueOf(){return{value(){return rn(this,!1)}}}});const fs=BigInt(Number.MAX_SAFE_INTEGER),us=BigInt(Number.MIN_SAFE_INTEGER);function rn(e,t){const n=t?r=>{try{return r()}catch(o){return o}}:r=>r(),s=new Map,i=function(r){var f;const o=typeof r=="function"?V.Struct:(f=r==null?void 0:r.constructor)==null?void 0:f[Ee];if(o===void 0){if(t){if(typeof r=="bigint"&&us<=r&&r<=fs)return Number(r);if(r instanceof Error)return{error:r.message}}return r}let c=s.get(r);if(c===void 0){let l;switch(o){case V.Struct:l=r[le](),c=r.constructor[jt]&H.IsTuple?[]:{};break;case V.Union:l=r[le](),c={};break;case V.Array:case V.Vector:case V.Slice:l=r[le](),c=[];break;case V.Pointer:try{c=r["*"]}catch{c=Symbol.for("inaccessible")}break;case V.Enum:c=n(()=>String(r));break;case V.Opaque:c={};break;default:c=n(()=>r.$)}if(c=i(c),s.set(r,c),l)for(const[a,u]of l)c[a]=i(u)}return c};return i(e)}I({defineToJSON(){return{value(){return rn(this,!0)}}}});I({defineMemberType(e,t){const{slot:n}=e;return sn(n,{get(s){const i=this[O][s];return i==null?void 0:i.constructor},set:Se})}});I({defineTypedArray(e){const t=this,n=this.getTypedArray(e);return ke({get(){const s=this.dataView,i=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,i)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new ie(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});I({defineMemberUint(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});I({defineMemberVoid(e,t){const{bitOffset:n}=e;return{get(){},set:n!==void 0?function(s){if(s!==void 0)throw new xt(e)}:function(s,i){if(i!==void 0)throw new xt(e);if(s<0||s>=this.length)throw new ct(e,s)}}}});I({defineStructure(e){const{type:t,byteSize:n}=e,s=`define${He[t]}`,i=this[s],r=[],o={},c={dataView:this.defineDataView(e),base64:this.defineBase64(e),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[ve]:{value:null},[Ce]:S(o),[it]:S(r),[U]:this.defineCopier(n),[_]:this.defineRestorer()},f=e.constructor=i.call(this,e,c);for(const[l,a]of Object.entries(c)){const u=a==null?void 0:a.set;u&&!o[l]&&l!=="$"&&(o[l]=u,r.push(l))}return ye(f.prototype,c),f},finalizeStructure(e){var g;const{name:t,type:n,constructor:s,align:i,byteSize:r,flags:o,signature:c,static:{members:f,template:l}}=e,a=[],u={name:S(t),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[rt]:S(c),[ne]:S(this),[X]:S(i),[ut]:S(r),[Ee]:S(n),[jt]:S(o),[Ie]:S(a),[ue]:S(this.getTypedArray(e)),[Symbol.iterator]:this.defineStructIterator(),[le]:this.defineStructEntries(),[Ie]:S(a)},h={[Symbol.toStringTag]:S(t)};for(const A of f){const{name:p,slot:b}=A;if(A.structure.type===V.Function){const x=l[O][b];u[p]=S(x),x.name||B(x,"name",S(p));const[E,F]=((g=/^(get|set)\s+([\s\S]+)/.exec(p))==null?void 0:g.slice(1))??[],k=E==="get"?0:1;if(E&&x.length===k){u[F]||(u[F]={});const N=u[F];N[E]=x}if(A.flags&pe.IsMethod){const N=function(...W){var Ve;try{return x(this,...W)}catch(K){throw(Ve=K[xe])==null||Ve.call(K,1),K}};if(ye(N,{name:S(p),length:S(x.length-1)}),h[p]=S(N),E&&N.length===k){const W=h[F]||(h[F]={});W[E]=N}}}else u[p]=this.defineMember(A),a.push(p)}u[O]=a.length>0&&S(l[O]);const d=`finalize${He[n]}`,m=this[d];(m==null?void 0:m.call(this,e,u,h))!==!1&&(ye(s.prototype,h),ye(s,u))},createConstructor(e,t={}){const{type:n,byteSize:s,align:i,flags:r,instance:{members:o,template:c}}=e,{onCastError:f}=t;let l;if(c!=null&&c[O]){const d=o.filter(m=>m.flags&pe.IsReadOnly);d.length>0&&(l=d.map(m=>m.slot))}const a=new Wt,u=this,h=function(d,m={}){var x;const{allocator:g}=m,A=this instanceof h;let p,b;if(A){if(arguments.length===0)throw new Jt(e);if(p=this,r&P.HasSlot&&(p[O]={}),Te in p)p[Z](d,g),b=p[w];else{const E=n!==V.Pointer?g:null;p[w]=b=u.allocateMemory(s,i,E)}}else{if(Pe in h&&(p=h[Pe].call(this,d,m),p!==!1)||(b=u.extractView(e,d,f),p=a.find(b)))return p;p=Object.create(h.prototype),Te in p?u.assignView(p,b,e,!1,!1):p[w]=b,r&P.HasSlot&&(p[O]={})}if(l)for(const E of l)p[O][E]=c[O][E];return(x=p[bn])==null||x.call(p),A&&(Te in p||p[Z](d,g)),se in p&&(p=p[se]()),a.save(b,p)};return B(h,Ue,S(a)),c!=null&&c[w]&&B(c,_,this.defineRestorer()),h},createApplier(e){const{instance:{template:t}}=e;return function(n,s){const i=Object.keys(n),r=this[it],o=this[Ce];for(const u of i)if(!(u in o))throw new $n(e,u);let c=0,f=0,l=0,a=0;for(const u of r){const h=o[u];h.special?u in n&&a++:(c++,u in n?f++:h.required&&l++)}if(l!==0&&a===0){const u=r.filter(h=>o[h].required&&!(h in n));throw new zn(e,u)}if(a+f>i.length)for(const u of r)u in n&&(i.includes(u)||i.push(u));f<c&&a===0&&t&&t[w]&&this[U](t);for(const u of i)o[u].call(this,n[u],s);return i.length}},getTypedArray(e){const{type:t,instance:n}=e;if(t!==void 0&&n){const[s]=n.members;switch(t){case V.Enum:case V.ErrorSet:case V.Primitive:{const{byteSize:i,type:r}=s,o=r===$.Float?"Float":r===$.Int?"Int":"Uint",f=(i>4&&r!==$.Float?"Big":"")+o+i*8+"Array";return globalThis[f]}case V.Array:case V.Slice:case V.Vector:return this.getTypedArray(s.structure)}}}});I({defineArgStruct(e,t){var u;const{flags:n,byteSize:s,align:i,length:r,instance:{members:o}}=e,c=this,f=o.slice(1),l=function(h,d){const m=this instanceof l;let g,A;if(m?(g=this,A=c.allocateMemory(s,i)):(g=Object.create(l.prototype),A=h),g[w]=A,n&P.HasSlot&&(g[O]={}),m){let p;if(n&qe.HasOptions&&h.length===r+1&&(p=h.pop()),h.length!==r)throw new Fn(r,h.length);n&qe.IsAsync&&(g[se]=null),c.copyArguments(g,h,f,p,d)}else return g};for(const h of o)t[h.name]=this.defineMember(h);const a=t.retval.set;return t.length=S(f.length),t[Y]=n&P.HasObject&&this.defineVivificatorStruct(e),t[z]=n&P.HasPointer&&this.defineVisitorArgStruct(o),t[ae]=S(function(h){a.call(this,h,this[ht])}),t[Symbol.iterator]=(u=this.defineArgIterator)==null?void 0:u.call(this,f),t[U]=this.defineRetvalCopier(o[0]),l},finalizeArgStruct(e,t){const{flags:n}=e;t[Lt]=S(!!(n&qe.IsThrowing))}});I({defineArray(e,t){const{length:n,instance:{members:[s]},flags:i}=e,r=this.createApplier(e),o=this.defineMember(s),{set:c}=o,f=this.createConstructor(e),l=function(a,u){if(re(a,f))this[U](a),i&P.HasPointer&&this[z]("copy",j.Vivificate,a);else if(typeof a=="string"&&i&Oe.IsString&&(a={string:a}),a!=null&&a[Symbol.iterator]){if(a=Bt(a),a.length!==n)throw new We(e,this,a);let h=0;for(const d of a)c.call(this,h++,d,u)}else if(a&&typeof a=="object"){if(r.call(this,a)===0)throw new be(e,a)}else if(a!==void 0)throw new be(e,a)};return t.$={get:yt,set:l},t.length=S(n),t.entries=t[le]=this.defineArrayEntries(),i&Oe.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),i&Oe.IsString&&(t.string=this.defineString(e)),i&Oe.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t[Symbol.iterator]=this.defineArrayIterator(),t[Z]=S(l),t[se]=this.defineFinalizerArray(o),t[Y]=i&P.HasObject&&this.defineVivificatorArray(e),t[z]=i&P.HasPointer&&this.defineVisitorArray(),f},finalizeArray(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=S(s.structure.constructor),t[fe]=n&Oe.HasSentinel&&this.defineSentinel(e)}});I({defineFinalizerArray({get:e,set:t}){return{value(){const n=new Proxy(this,hs);return ye(this,{[je]:{value:n},get:{value:e.bind(this)},set:t&&{value:t.bind(this)}}),n}}},defineVivificatorArray(e){const{instance:{members:[t]}}=e,{byteSize:n,structure:s}=t,i=this;return{value:function(c){var m;const{constructor:f}=s;(m=this[_])==null||m.call(this);const l=this[w],u=l.byteOffset+n*c,h=i.obtainView(l.buffer,u,n);return this[O][c]=f.call(ft,h)}}}});const hs={get(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?e.get(n):t===Ze?e:e[t]},set(e,t,n){const s=typeof t=="symbol"?0:t|0;return s!==0||s==t?e.set(s,n):e[t]=n,!0},deleteProperty(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?!1:(delete e[t],!0)},has(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?n>=0&&n<e.length:e[t]},ownKeys(e){const t=[];for(let n=0,s=e.length;n<s;n++)t.push(`${n}`);return t.push("length",je),t},getOwnPropertyDescriptor(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t){if(n>=0&&n<e.length)return{value:e.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(e,t)}};I({defineEnum(e,t){const{instance:{members:[n]}}=e,s=this.defineMember(n),{get:i,set:r}=s,{get:o}=this.defineMember(n,!1),c=this.createApplier(e),f=["string","number","tagged union"],l=function(u){if(u&&typeof u=="object"){if(c.call(this,u)===0)throw new ge(e,f,u)}else u!==void 0&&r.call(this,u)},a=this.createConstructor(e,{onCastError(u,h){throw new ge(u,f,h)}});return t.$=s,t.toString=S(vn),t[Symbol.toPrimitive]={value(u){switch(u){case"string":case"default":return this.$[Ke];default:return o.call(this)}}},t[Z]=S(l),a},finalizeEnum(e,t){const{flags:n,constructor:s,instance:{members:[i]},static:{members:r,template:o}}=e,c=o[O],{get:f,set:l}=this.defineMember(i,!1);for(const{name:a,flags:u,slot:h}of r)if(u&pe.IsPartOfSet){const d=c[h];B(d,Ke,S(a));const m=f.call(d);t[a]=t[m]={value:d,writable:!1}}t[Pe]={value(a){if(typeof a=="string"||typeof a=="number"||typeof a=="bigint"){let u=s[a];return u||n&fn.IsOpenEnded&&typeof a!="string"&&(u=new s(void 0),l.call(u,a),B(u,Ke,S(a)),B(s,a,S(u))),u}else return a instanceof s?a:(a==null?void 0:a[It])instanceof s?a[It]:!1}},t[ue]=S(this.getTypedArray(e))},transformDescriptorEnum(e,t){const{type:n,structure:s}=t;if(n===$.Object)return e;const i=function(c){const{constructor:f}=s,l=f(c);if(!l)throw new Cn(s,c);return l},{get:r,set:o}=e;return{get:r.length===0?function(){const f=r.call(this);return i(f)}:function(f){const l=r.call(this,f);return i(l)},set:o.length===1?function(f){f=i(f)[Symbol.toPrimitive](),o.call(this,f)}:function(f,l){const a=i(l);o.call(this,f,a[Symbol.toPrimitive]())}}}});I({currentGlobalSet:void 0,currentErrorClass:void 0,defineErrorSet(e,t){const{instance:{members:[n]},flags:s}=e;if(!this.currentErrorClass){this.currentErrorClass=class extends ds{};const a={type:V.ErrorSet,name:"anyerror",instance:{members:[n]},static:{members:[],template:{SLOTS:{}}}};this.currentGlobalSet=this.defineStructure(a),this.finalizeStructure(a)}if(this.currentGlobalSet&&s&gt.IsGlobal)return this.currentGlobalSet;const i=this.defineMember(n),{set:r}=i,o=["string","number"],c=this.createApplier(e),f=function(a){if(a instanceof l[Ne])r.call(this,a);else if(a&&typeof a=="object"&&!$e(a)){if(c.call(this,a)===0)throw new ge(e,o,a)}else a!==void 0&&r.call(this,a)},l=this.createConstructor(e,{onCastError(a,u){throw new ge(a,o,u)}});return t.$=i,t[Z]=S(f),l},finalizeErrorSet(e,t){const{constructor:n,flags:s,instance:{members:[i]},static:{members:r,template:o}}=e;if(this.currentGlobalSet&&s&gt.IsGlobal)return!1;const c=(o==null?void 0:o[O])??{},{get:f}=this.defineMember(i,!1);for(const{name:l,slot:a}of r){const u=c[a],h=f.call(u);let d=this.currentGlobalSet[h],m=!0;d||(d=new this.currentErrorClass(l,h),m=!1);const g=S(d),A=String(d);t[l]=t[A]=t[h]=g,m||(ye(this.currentGlobalSet,{[h]:g,[A]:g,[l]:g}),this.currentGlobalSet[Ie].push(l))}t[Pe]={value(l){return typeof l=="number"||typeof l=="string"?n[l]:l instanceof n[Ne]?n[Number(l)]:$e(l)?n[`Error: ${l.error}`]:l instanceof Error?void 0:!1}},t[Ne]=S(this.currentErrorClass)},transformDescriptorErrorSet(e,t){const{type:n,structure:s}=t;if(n===$.Object)return e;const i=function(c){const{constructor:f}=s,l=f(c);if(!l)throw c instanceof Error?new Yt(s):new Pn(s,c);return l},{get:r,set:o}=e;return{get:r.length===0?function(){const f=r.call(this);return i(f)}:function(f){const l=r.call(this,f);return i(l)},set:o.length===1?function(f){const l=i(f);f=Number(l),o.call(this,f)}:function(f,l){const a=i(l);l=Number(a),o.call(this,f,l)}}},resetGlobalErrorSet(){this.currentErrorClass=this.currentGlobalSet=void 0}});class ds extends Error{constructor(t,n){super(Wn(t)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}I({defineErrorUnion(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:o}=this.defineMember(n),{get:c,set:f}=this.defineMember(s),{get:l,set:a}=this.defineMember(s,!1),u=function(){if(l.call(this))throw c.call(this);return r.call(this)},h=n.type===$.Void,d=s.structure.constructor,m=function(){var E;this[_e](),(E=this[z])==null||E.call(this,"clear")},g=this.createApplier(e),A=function(E,F){if(re(E,x))this[U](E),i&P.HasPointer&&(l.call(this)||this[z]("copy",0,E));else if(E instanceof d[Ne]&&d(E))f.call(this,E),m.call(this);else if(E!==void 0||h)try{o.call(this,E,F),a.call(this,0)}catch(k){if(E instanceof Error){const N=d[E]??d.Unexpected;if(N)f.call(this,N),m.call(this);else throw new Yt(e)}else if($e(E))f.call(this,E),m.call(this);else if(E&&typeof E=="object"){if(g.call(this,E)===0)throw k}else throw k}},{bitOffset:p,byteSize:b}=n,x=this.createConstructor(e);return t.$={get:u,set:A},t[Z]=S(A),t[Y]=i&P.HasObject&&this.defineVivificatorStruct(e),t[_e]=this.defineResetter(p/8,b),t[z]=i&P.HasPointer&&this.defineVisitorErrorUnion(n,l),x}});I({defineFunction(e,t){const{instance:{members:[n],template:s},static:{template:i}}=e,r=new Wt,{structure:{constructor:o}}=n,c=this,f=function(l){const a=this instanceof f;let u;if(a){if(arguments.length===0)throw new Jt(e);if(typeof l!="function")throw new ie("function",l);if(o[Ee]===V.VariadicStruct||!i)throw new Mn;u=c.getFunctionThunk(l,i)}else{if(this!==ne)throw new Ln;u=l}let h;if(h=r.find(u))return h;const d=o.prototype.length,m=a?c.createInboundCaller(l,o):c.createOutboundCaller(s,o);return ye(m,{length:S(d),name:S(a?l.name:"")}),Object.setPrototypeOf(m,f.prototype),m[w]=u,r.save(u,m),m};return Object.setPrototypeOf(f.prototype,Function.prototype),t.valueOf=t.toJSON=S(dt),f},finalizeFunction(e,t,n){n[Symbol.toStringTag]=void 0}});I({defineOptional(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:o}=this.defineMember(n),{get:c,set:f}=this.defineMember(s),l=function(){var A;return c.call(this)?r.call(this):((A=this[z])==null||A.call(this,"clear"),null)},a=n.type===$.Void,u=function(g,A){var p,b;re(g,h)?(this[U](g),i&P.HasPointer&&c.call(this)&&this[z]("copy",j.Vivificate,g)):g===null?(f.call(this,0),(p=this[_e])==null||p.call(this),(b=this[z])==null||b.call(this,"clear")):(g!==void 0||a)&&(o.call(this,g,A),i&wt.HasSelector?f.call(this,1):i&P.HasPointer&&(c.call(this)||f.call(this,13)))},h=e.constructor=this.createConstructor(e),{bitOffset:d,byteSize:m}=n;return t.$={get:l,set:u},t[Z]=S(u),t[_e]=i&wt.HasSelector&&this.defineResetter(d/8,m),t[Y]=i&P.HasObject&&this.defineVivificatorStruct(e),t[z]=i&P.HasPointer&&this.defineVisitorOptional(n,c),h}});I({definePointer(e,t){const{flags:n,byteSize:s,instance:{members:[i]}}=e,{structure:r}=i,{type:o,flags:c,byteSize:f=1}=r,l=n&L.HasLength?s/2:s,{get:a,set:u}=this.defineMember({type:$.Uint,bitOffset:0,bitSize:l*8,byteSize:l,structure:{byteSize:l}}),{get:h,set:d}=n&L.HasLength?this.defineMember({type:$.Uint,bitOffset:l*8,bitSize:l*8,byteSize:l,structure:{flags:$t.IsSize,byteSize:l}}):{},m=function(y,M=!0,T=!0){if(M||this[w][C])if(T){const R=K.child,D=a.call(this),J=n&L.HasLength?h.call(this):o===V.Slice&&c&te.HasSentinel?W.findSentinel(D,R[fe].bytes)+1:1;if(D!==this[Me]||J!==this[Re]){const Q=W.findMemory(y,D,J,R[ut]),G=Q?R.call(ne,Q):null;return this[O][0]=G,this[Me]=D,this[Re]=J,n&L.HasLength&&(this[he]=null),G}}else return this[O][0]=void 0;return this[O][0]},g=function(y){u.call(this,y),this[Me]=y},A=c&te.HasSentinel?1:0,p=n&L.HasLength||c&te.HasSentinel?function(y){var M;(M=d==null?void 0:d.call)==null||M.call(d,this,y-A),this[Re]=y}:null,b=function(){const y=this[we]??this,M=!y[O][0],T=m.call(y,null,M);if(!T){if(n&L.IsNullable)return null;throw new Dn}return n&L.IsConst?on(T):T},x=function(y){var T,R;if(y===void 0)return;const M=this[we]??this;if(y){const D=y[w][C];if(D){const{address:J,js:Q}=D;g.call(this,J),(T=p==null?void 0:p.call)==null||T.call(p,this,y.length),Q&&(y[w][C]=void 0)}else if(M[w][C])throw new Xt}else M[w][C]&&(g.call(this,0),(R=p==null?void 0:p.call)==null||R.call(p,this,0));M[O][0]=y??null,n&L.HasLength&&(M[he]=null)},E=c&P.HasValue?function(){return b.call(this).$}:b,F=n&L.IsConst?Se:function(y){const M=b.call(this);return M.$=y},k=function(){const y=b.call(this);return y?y.length:0},N=function(y){var oe,Le;y=y|0;const M=b.call(this);if(M){if(M.length===y)return}else{if(y!==0)throw new At(y,0);return}(oe=M[_])==null||oe.call(M);const T=M[w],R=T[C];let D;if(R||(n&L.HasLength?(this[he]||(this[he]=M.length),D=this[he]):D=(T.buffer.byteLength-T.byteOffset)/f|0),y<0||y>D)throw new At(y,D);const J=y*f,Q=R?W.obtainZigView(R.address,J):W.obtainView(T.buffer,T.byteOffset,J),G=r.constructor;this[O][0]=G.call(ne,Q),(Le=p==null?void 0:p.call)==null||Le.call(p,this,y)},W=this,Ve=function(y,M){var D,J,Q;const T=r.constructor;if(at(y,T)){if(!(n&L.IsConst)&&y.constructor.const)throw new Rn(e,y);y=y[O][0]}else if(n&L.IsMultiple)Tt(y,T,n)&&(y=T(y[O][0][w]));else if(o===V.Slice&&c&te.IsOpaque&&y){if(y.constructor[Ee]===V.Pointer)y=(D=y[q])==null?void 0:D[w];else if(y[w])y=y[w];else if((y==null?void 0:y.buffer)instanceof ArrayBuffer&&!(y instanceof Uint8Array||y instanceof DataView)){const{byteOffset:G,byteLength:oe}=y;G!==void 0&&oe!==void 0&&(y=new DataView(y.buffer,G,oe))}}if(y instanceof T){(J=y[_])==null||J.call(y);const G=y[ve];if(G)if(n&L.IsConst)y=G;else throw new _n(e)}else if(re(y,T))y=T.call(ne,y[w]);else if(n&L.IsSingle&&n&L.IsMultiple&&y instanceof T.child)y=T(y[w]);else if(bs(y,T)){const G=W.extractView(r,y);y=T(G)}else if(y!=null&&!y[w]){if(n&L.IsSingle&&n&L.IsMultiple&&typeof y=="object"&&!y[Symbol.iterator]){let oe=!0;const Le=T.prototype[Ce];for(const bt of Object.keys(y)){const Je=Le[bt];if(Je!=null&&Je.special){oe=!1;break}}oe&&(y=[y])}if(ue in T&&(y!=null&&y.buffer)&&y[Symbol.iterator])throw new vt(e,y);y=new T(y,{allocator:M})}else if(y!==void 0&&(!(n&L.IsNullable)||y!==null))throw new vt(e,y);const R=(Q=y==null?void 0:y[w])==null?void 0:Q[C];if((R==null?void 0:R.address)===ze)throw new Kt(y);this[q]=y},K=this.createConstructor(e);return t["*"]={get:E,set:F},t.$={get:yt,set:Ve},t.length={get:k,set:N},t.slice=o===V.Slice&&{value(y,M){const T=this[q].slice(y,M);return new K(T)}},t.subarray=o===V.Slice&&{value(y,M,T){const R=this[q].subarray(y,M,T);return new K(R)}},t[Symbol.toPrimitive]=o===V.Primitive&&{value(y){return this[q][Symbol.toPrimitive](y)}},t[Z]=S(Ve),t[se]={value(){const y=o!==V.Pointer?cn:{};let M;o===V.Function?(M=function(){},M[w]=this[w],M[O]=this[O],Object.setPrototypeOf(M,K.prototype)):M=this;const T=new Proxy(M,y);return Object.defineProperty(M,je,{value:T}),T}},t[q]={get:b,set:x},t[xe]=S(m),t[kt]={set:g},t[me]={set:p},t[z]=this.defineVisitor(),t[Me]=S(0),t[Re]=S(0),t[he]=n&L.HasLength&&S(null),t.dataView=t.base64=void 0,K},finalizePointer(e,t){const{flags:n,constructor:s,instance:{members:[i]}}=e,{structure:r}=i,{type:o,constructor:c}=r;t.child=c?S(c):{get(){return r.constructor}},t.const=S(!!(n&L.IsConst)),t[Pe]={value(f,l){if(this===ne||this===ft||f instanceof s)return!1;if(at(f,c))return new s(c(f["*"]),l);if(Tt(f,c,n))return new s(f);if(o===V.Slice)return new s(c(f),l);throw new kn(e)}}}});function at(e,t){var n;return Zt((n=e==null?void 0:e.constructor)==null?void 0:n.child,t)&&e["*"]}function Tt(e,t,n){var s,i;if(n&L.IsMultiple){if(((i=(s=e==null?void 0:e.constructor)==null?void 0:s.child)==null?void 0:i.child)===t.child&&e["*"])return!0;if(n&L.IsSingle&&at(e,t.child))return!0}return!1}const Ct=new WeakMap;function on(e){if(!e)return null;let t=Ct.get(e);if(!t){const n=e[we];n?t=new Proxy(n,ys):t=new Proxy(e,ms),Ct.set(e,t)}return t}const cn={get(e,t){return t===we?e:t in e?e[t]:e[q][t]},set(e,t,n){if(t in e)e[t]=n;else{const s=e[q];s[t]=n}return!0},deleteProperty(e,t){if(t in e)delete e[t];else{const n=e[q];delete n[t]}return!0},has(e,t){if(t in e)return!0;{const n=e[q];return t in n}},apply(e,t,n){return e["*"].apply(t,n)}},ys={...cn,set(e,t,n){if(t in e)Se();else{const s=e[q];s[t]=n}return!0}},ms={get(e,t){if(t===ve)return e;{const n=e[t];return n!=null&&n[w]?on(n):n}},set(e,t,n){Se()}};function bs(e,t){const n=e==null?void 0:e[Symbol.toStringTag];if(n){const s=t[ue];if(s)switch(n){case s.name:case"DataView":return!0;case"ArrayBuffer":return s===Uint8Array||s===Int8Array;case"Uint8ClampedArray":return s===Uint8Array}if(t.child&&Gt(e,t.child)!==void 0)return!0}return!1}I({definePrimitive(e,t){const{instance:{members:[n]}}=e,s=this.createApplier(e),{get:i,set:r}=this.defineMember(n),o=function(f){if(re(f,c))this[U](f);else if(f&&typeof f=="object"){if(s.call(this,f)===0){const l=Dt(n);throw new ge(e,l,f)}}else f!==void 0&&r.call(this,f)},c=this.createConstructor(e);return t.$={get:i,set:o},t[Z]=S(o),t[Symbol.toPrimitive]=S(i),c},finalizePrimitive(e,t){const{instance:{members:[n]}}=e;t[hn]=S(n.bitSize),t[yn]=S(n.type)}});I({defineSlice(e,t){const{align:n,flags:s,byteSize:i,name:r,instance:{members:[o]}}=e,{byteSize:c,structure:f}=o,l=this,a=function(b,x,E){b||(b=l.allocateMemory(x*c,n,E)),this[w]=b,this[me]=x},u=function(b,x){if(x!==this[me])throw new We(e,this,b)},h=this.defineMember(o),{set:d}=h,m=this.createApplier(e),g=function(b,x){var E;if(re(b,p))this[w]?u.call(this,b,b.length):a.call(this,null,b.length,x),this[U](b),s&P.HasPointer&&this[z]("copy",j.Vivificate,b);else if(typeof b=="string"&&s&te.IsString)g.call(this,{string:b},x);else if(b!=null&&b[Symbol.iterator]){b=Bt(b),this[w]?u.call(this,b,b.length):a.call(this,null,b.length,x);let F=0;for(const k of b)(E=p[fe])==null||E.validateValue(k,F,b.length),d.call(this,F++,k,x)}else if(typeof b=="number")if(!this[w]&&b>=0&&isFinite(b))a.call(this,null,b,x);else throw new be(e,b,!this[w]);else if(b&&typeof b=="object"){if(m.call(this,b,x)===0)throw new be(e,b)}else if(b!==void 0)throw new be(e,b)},A=function(b,x){const E=this[me],F=this[w];b=b===void 0?0:Pt(b,E),x=x===void 0?E:Pt(x,E);const k=b*c,N=x*c-k;return l.obtainView(F.buffer,F.byteOffset+k,N)},p=this.createConstructor(e);return t.$={get:yt,set:g},t.length={get:ps},s&te.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),s&te.IsString&&(t.string=this.defineString(e)),s&te.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=t[le]=this.defineArrayEntries(),t.subarray={value(b,x){const E=A.call(this,b,x);return p(E)}},t.slice={value(b,x,E={}){const{zig:F=!1}=E,k=A.call(this,b,x),N=l.allocateMemory(k.byteLength,n,F),W=p(N);return W[U]({[w]:k}),W}},t[Symbol.iterator]=this.defineArrayIterator(),t[Te]=S(a),t[U]=this.defineCopier(i,!0),t[Z]=S(g),t[se]=this.defineFinalizerArray(h),t[Y]=s&P.HasObject&&this.defineVivificatorArray(e),t[z]=s&P.HasPointer&&this.defineVisitorArray(),p},finalizeSlice(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=S(s.structure.constructor),t[fe]=n&te.HasSentinel&&this.defineSentinel(e)}});function ps(){return this[me]}function Pt(e,t){return e=e|0,e<0?(e=t+e,e<0&&(e=0)):e>t&&(e=t),e}I({defineStruct(e,t){const{flags:n,length:s,instance:{members:i}}=e,r=i.find(d=>d.flags&pe.IsBackingInt),o=r&&this.defineMember(r),c=this.createApplier(e),f=function(d,m){if(re(d,l))this[U](d),n&P.HasPointer&&this[z]("copy",0,d);else if(d&&typeof d=="object")c.call(this,d,m);else if((typeof d=="number"||typeof d=="bigint")&&o)o.set.call(this,d);else if(d!==void 0)throw new ge(e,"object",d)},l=this.createConstructor(e),a=t[Ce].value,u=t[it].value,h=[];for(const d of i.filter(m=>!!m.name)){const{name:m,flags:g}=d,{set:A}=t[m]=this.defineMember(d);A&&(g&pe.IsRequired&&(A.required=!0),a[m]=A,u.push(m)),h.push(m)}return t.$={get:dt,set:f},t.length=S(s),t.entries=n&H.IsTuple&&this.defineVectorEntries(),t[Symbol.toPrimitive]=o&&{value(d){return d==="string"?Object.prototype.toString.call(this):o.get.call(this)}},t[Symbol.iterator]=n&H.IsIterator?this.defineZigIterator():n&H.IsTuple?this.defineVectorIterator():this.defineStructIterator(),t[Z]=S(f),t[Y]=n&P.HasObject&&this.defineVivificatorStruct(e),t[z]=n&P.HasPointer&&this.defineVisitorStruct(i),t[le]=n&H.IsTuple?this.defineVectorEntries():this.defineStructEntries(),t[Ie]=S(h),n&H.IsAllocator&&(t.alloc=this.defineAlloc(),t.free=this.defineFree(),t.dupe=this.defineDupe()),l}});I({defineVivificatorStruct(e){const{instance:{members:t}}=e,n={};for(const i of t.filter(r=>r.type===$.Object))n[i.slot]=i;const s=this;return{value(i){var g;const r=n[i],{bitOffset:o,byteSize:c,structure:{constructor:f}}=r;(g=this[_])==null||g.call(this);const l=this[w],u=l.byteOffset+(o>>3);let h=c;if(h===void 0){if(o&7)throw new Hn(r);h=r.bitSize>>3}const d=s.obtainView(l.buffer,u,h);return this[O][i]=f.call(ft,d)}}}});I({defineVector(e,t){const{flags:n,length:s,instance:{members:[i]}}=e,r=this.createApplier(e),o=function(l){if(re(l,c))this[U](l),n&P.HasPointer&&this[z]("copy",j.Vivificate,l);else if(l!=null&&l[Symbol.iterator]){let a=l.length;if(typeof a!="number"&&(l=[...l],a=l.length),a!==s)throw new We(e,this,l);let u=0;for(const h of l)this[u++]=h}else if(l&&typeof l=="object"){if(r.call(this,l)===0)throw new be(e,l)}else if(l!==void 0)throw new be(e,l)},c=this.createConstructor(e,{initializer:o}),{bitSize:f}=i;for(let l=0,a=0;l<s;l++,a+=f)n&P.HasPointer?t[l]=this.defineMember({...i,slot:l}):t[l]=this.defineMember({...i,bitOffset:a});return t.$={get:dt,set:o},t.length=S(s),n&St.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),n&St.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=t[le]=this.defineVectorEntries(),t[Symbol.iterator]=this.defineVectorIterator(),t[Z]=S(o),t[Y]=n&P.HasObject&&this.defineVivificatorArray(e),t[z]=n&P.HasPointer&&this.defineVisitorArray(),c},finalizeVector(e,t){const{instance:{members:[n]}}=e;t.child=S(n.structure.constructor)}});I({defineVisitor(){return{value(e,t,n){let s;typeof e=="string"?s=ws[e]:s=e,s.call(this,t,n)}}}});function Fe(e,t,n,s){let i=this[O][e];if(!i)if(!(n&j.IgnoreUncreated))i=this[Y](e);else return;let r;s&&(r=s[O][e],!r)||i[z](t,n,r)}const ws={copy(e,t){const n=t[O][0];if(this[w][C]&&n&&!n[w][C])throw new Xt;this[O][0]=n},clear(e){e&j.IsInactive&&(this[O][0]=void 0)},reset(){this[O][0]=void 0,this[Me]=void 0}};I({defineVisitorArgStruct(e){const t=[];let n;for(const[s,{slot:i,structure:r}]of e.entries())r.flags&P.HasPointer&&(s===0?n=i:t.push(i));return{value(s,i,r){if(!(i&j.IgnoreArguments)&&t.length>0)for(const o of t)Fe.call(this,o,s,i|j.IsImmutable,r);!(i&j.IgnoreRetval)&&n!==void 0&&Fe.call(this,n,s,i,r)}}}});I({defineVisitorErrorUnion(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)&&(i|=j.IsInactive),(!(i&j.IsInactive)||!(i&j.IgnoreInactive))&&Fe.call(this,n,s,i,r)}}}});I({defineVisitorOptional(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)||(i|=j.IsInactive),(!(i&j.IsInactive)||!(i&j.IgnoreInactive))&&Fe.call(this,n,s,i,r)}}}});I({defineVisitorStruct(e){const t=e.filter(n=>{var s;return((s=n.structure)==null?void 0:s.flags)&P.HasPointer}).map(n=>n.slot);return{value(n,s,i){for(const r of t)Fe.call(this,r,n,s,i)}}}});I({init(){this.variables=[]},getSpecialExports(){const e=t=>{if(t===void 0)throw new Error("Not a Zig type");return t};return{init:(...t)=>{var n;return(n=this.initialize)==null?void 0:n.call(this,...t)},abandon:()=>{var t;return(t=this.abandonModule)==null?void 0:t.call(this)},released:()=>this.released,connect:t=>this.consoleObject=t,sizeOf:t=>e(t==null?void 0:t[ut]),alignOf:t=>e(t==null?void 0:t[X]),typeOf:t=>{var n;return(n=He[e(t==null?void 0:t[Ee])])==null?void 0:n.toLowerCase()}}},recreateStructures(e,t){var o;Object.assign(this,t);const n=(c,f)=>{for(const[l,a]of Object.entries(f))c[l]=i(a);return c},s=c=>c.length?c.buffer:new ArrayBuffer(0),i=c=>{const{memory:f,structure:l,actual:a}=c;if(f){if(a)return a;{const{array:u,offset:h,length:d}=f,m=this.obtainView(s(u),h,d),{handle:g,const:A}=c,p=l==null?void 0:l.constructor,b=c.actual=p.call(ne,m);return A&&this.makeReadOnly(b),c.slots&&n(b[O],c.slots),g&&this.variables.push({handle:g,object:b}),b}}else return l};(o=this.resetGlobalErrorSet)==null||o.call(this);const r=new Map;for(const c of e){for(const f of[c.instance,c.static])if(f.template){const{slots:l,memory:a,handle:u}=f.template,h=f.template={};if(a){const{array:d,offset:m,length:g}=a;h[w]=this.obtainView(s(d),m,g),u&&this.variables.push({handle:u,object:h})}if(l){const d=h[O]={};r.set(d,l)}}this.defineStructure(c)}for(const[c,f]of r)n(c,f);for(const c of e)this.finalizeStructure(c)}});I({init(){this.defaultAllocator=null,this.vtableFnIds=null},createDefaultAllocator(e,t){let n=this.defaultAllocator;if(!n){const{constructor:s}=t,{noResize:i,noRemap:r}=s,o={alloc:(f,l,a)=>this.allocateHostMemory(l,1<<a),free:(f,l,a)=>{const u=this.getViewAddress(l["*"][w]),h=l.length;this.freeHostMemory(u,h,1<<a)},resize:i};r&&(o.remap=r);const c=this.obtainZigView(ot,0);n=this.defaultAllocator=new s({ptr:c,vtable:o}),this.vtableFnIds=[o.alloc,o.free].map(f=>this.getFunctionId(f))}return n},freeDefaultAllocator(){if(this.vtableFnIds){for(const e of this.vtableFnIds)this.releaseFunction(e);this.defaultAllocator=null,this.vtableFnIds=null}},allocateHostMemory(e,t){const n=this.allocateJSMemory(e,t);try{const s=this.allocateShadowMemory(e,t),i=this.getViewAddress(s);return this.registerMemory(i,e,t,!0,n,s),s}catch{return null}},freeHostMemory(e,t,n){const s=this.unregisterMemory(e,t);s&&this.freeShadowMemory(s.shadowDV)}});I({createPromise(e,t){if(t){if(typeof t!="function")throw new ie("function",t)}else e[Rt]=new Promise((s,i)=>{t=r=>{var o;(o=r==null?void 0:r[w])!=null&&o[C]&&(r=new r.constructor(r)),r instanceof Error?i(r):s(r)}});const n=(s,i)=>{if(t.length===2){const o=i instanceof Error;t(o?i:null,o?null:i)}else t(i);e[se]();const r=this.getFunctionId(n);this.releaseFunction(r)};return e[ae]=s=>n(null,s),{ptr:null,callback:n}},createPromiseCallback(e,t){const{ptr:n,callback:s}=t,i=s["*"];return e[ae]=r=>i.call(e,n,r),(...r)=>{const o=r.length===2?r[0]??r[1]:r[0];return e[ae](o)}}});I({createSignal(e,t){const{constructor:{child:n}}=e.instance.members[0].structure,s=new Int32Array([t!=null&&t.aborted?1:0]),i=n(s);return t&&t.addEventListener("abort",()=>{{const r=this.findShadowView(i[w]);if(r){const o=new Int32Array(r.buffer,r.byteOffset,1);Atomics.store(o,0,1)}}},{once:!0}),{ptr:i}},createInboundSignal(e){const t=new AbortController;if(e.ptr["*"])t.abort();else{const n=setInterval(()=>{e.ptr["*"]&&(t.abort(),clearInterval(n))},50)}return t.signal}});I({linkVariables(e){var n,s,i;if(!this.memory){this.initPromise=this.initPromise.then(()=>this.linkVariables(e));return}const t=this.getCopyFunction();for(const{object:r,handle:o}of this.variables){const c=r[w],f=o,l=r[w]=this.obtainZigView(f,c.byteLength);e&&t(l,c),(s=(n=r.constructor[Ue])==null?void 0:n.save)==null||s.call(n,l,r);const a=u=>{var d,m;const h=u[O];if(h){const g=l.byteOffset;for(const A of Object.values(h))if(A){const p=A[w];if(p.buffer===c.buffer){const b=g+p.byteOffset-c.byteOffset;A[w]=this.obtainView(l.buffer,b,p.byteLength),(m=(d=A.constructor[Ue])==null?void 0:d.save)==null||m.call(d,l,A),a(A)}}}};a(r),(i=r[z])==null||i.call(r,function(){this[xe]()},j.IgnoreInactive)}},unlinkVariables(){const e=this.getCopyFunction();for(const{object:t}of this.variables){const n=this.restoreView(t[w]),s=n[C];if(s){const i=t[w]=this.allocateMemory(s.len);e(i,n)}}},imports:{recreateAddress:{argType:"i",returnType:"i"}}});I({init(){this.nextThreadId=1,this.workers=[]},getThreadHandler(e){switch(e){case"thread-spawn":return typeof window=="object"&&!window.crossOriginIsolated&&console.warn(`%cHTML document is not cross-origin isolated %c

WebAssembly multithreading in the browser is only possibly when %cwindow.crossOriginIsolated%c = true. Visit https://developer.mozilla.org/en-US/docs/Web/API/Window/crossOriginIsolated for information on how to enable it.`,"color: red;font-size: 200%;font-weight:bold","","background-color: lightgrey;font-weight:bold",""),this.spawnThread.bind(this)}},spawnThread(e){const t=this.nextThreadId;this.nextThreadId++;const{executable:n,memory:s,options:i}=this,r={executable:n,memory:s,options:i,tid:t,arg:e},o=(f,l)=>{var a;if(l.type==="call"){const{module:u,name:h,args:d,array:m}=l,g=(a=this.exportedModules[u])==null?void 0:a[h],A=g==null?void 0:g(...d);m&&(m[1]=A|0,m[0]=1,Atomics.notify(m,0,1))}else if(l.type==="exit"){const u=this.workers.indexOf(f);u!==-1&&(f.detach(),this.workers.splice(u,1))}},c="message";{const f=Ss(),l=new Worker(f,{name:"zig"}),a=u=>o(l,u.data);l.addEventListener(c,a),l.detach=()=>l.removeEventListener(c,a),l.postMessage(r),this.workers.push(l)}return t}});function gs(){const e=Is.toString(),t=e.indexOf("{")+1,n=e.lastIndexOf("}");return e.slice(t,n)}let st;function Ss(){if(!st){const e=gs();st=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}return st}function Is(){let e,t;self.onmessage=i=>n(i.data),e=i=>self.postMessage(i),t=()=>self.close();function n({executable:i,memory:r,options:o,tid:c,arg:f}){const l=WebAssembly,a={memory:r},u={},h={},d={env:a,wasi:u,wasi_snapshot_preview1:h};for(const{module:p,name:b,kind:x}of l.Module.imports(i))if(x==="function"){const E=s(p,b);p==="env"?a[b]=E:p==="wasi_snapshot_preview1"?h[b]=E:p==="wasi"&&(u[b]=E)}const{tableInitial:m}=o;a.__indirect_function_table=new l.Table({initial:m,element:"anyfunc"});const{exports:g}=new l.Instance(i,d),{wasi_thread_start:A}=g;A(c,f),e({type:"exit"}),t()}function s(i,r){if(r==="_handleJsCall")return function(...o){return e({type:"call",module:i,name:r,args:o}),0};{const o=new Int32Array(new SharedArrayBuffer(8));return function(...c){return o[0]=0,e({type:"call",module:i,name:r,args:c,array:o}),Atomics.wait(o,0,0),o[1]}}}}I({getAccessorInt(e,t){const{bitSize:n,byteSize:s}=t;if(s){const i=this.getAccessor(e,{type:$.Uint,bitSize:s*8,byteSize:s}),r=2**(n-1),o=r-1;return e==="get"?function(c,f){const l=i.call(this,c,f);return(l&o)-(l&r)}:function(c,f,l){const a=f<0?r|f&o:f&o;i.call(this,c,a,l)}}}});export{Es as c};
