"(function(t){\"use strict\";const e={Primitive:0,Array:1,Struct:2,Union:3,ErrorUnion:4,ErrorSet:5,Enum:6,Optional:7,Pointer:8,Slice:9,Vector:10,Opaque:11,ArgStruct:12,VariadicStruct:13,Function:14},n=Object.keys(e),r=1,s=2,i=4,o=8,c=16,a=16,l=32,u=64,f=128,h=64,d=128,g=256,b=512,y=1024,p=2048,m=16,w=32,S=64,v=512,A=16,V=16,x=16,E=32,I=64,$=128,O=256,M=16,U=32,T=64,C=128,z=256,F=16,j=16,B=16,N=32,k=16,L=32,P=64,D={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Literal:7,Null:8,Undefined:9,Unsupported:10},R=Object.keys(D),Z=1,J=2,G=4,_=16,q=64,H=1,W=2,X=0,Y=1,K=2,Q=0,tt=1,et=1,nt=2,rt=4,st={IsInactive:1,IsImmutable:2,IgnoreUncreated:4,IgnoreInactive:8,IgnoreArguments:16,IgnoreRetval:32},it=globalThis[Symbol.for(\"ZIGAR\")]??={};function ot(t){return it[t]??=Symbol(t)}function ct(t){return ot(t)}const at=ct(\"memory\"),lt=ct(\"slots\"),ut=ct(\"parent\"),ft=ct(\"zig\"),ht=ct(\"name\"),dt=ct(\"type\"),gt=ct(\"flags\"),bt=ct(\"class\"),yt=ct(\"tag\"),pt=ct(\"props\"),mt=ct(\"pointer\"),wt=ct(\"sentinel\"),St=ct(\"array\"),vt=ct(\"target\"),At=ct(\"entries\"),Vt=ct(\"max length\"),xt=ct(\"keys\"),Et=ct(\"address\"),It=ct(\"length\"),$t=ct(\"last address\"),Ot=ct(\"last length\"),Mt=ct(\"proxy\"),Ut=ct(\"cache\"),Tt=ct(\"size\"),Ct=ct(\"bit size\"),zt=ct(\"align\"),Ft=ct(\"const target\"),jt=ct(\"const proxy\"),Bt=ct(\"environment\"),Nt=ct(\"attributes\"),kt=ct(\"primitive\"),Lt=ct(\"getters\"),Pt=ct(\"setters\"),Dt=ct(\"typed array\"),Rt=ct(\"throwing\"),Zt=ct(\"promise\"),Jt=ct(\"generator\"),Gt=ct(\"allocator\"),_t=ct(\"fallback\"),qt=ct(\"signature\"),Ht=ct(\"update\"),Wt=ct(\"reset\"),Xt=ct(\"vivificate\"),Yt=ct(\"visit\"),Kt=ct(\"copy\"),Qt=ct(\"shape\"),te=ct(\"initialize\"),ee=ct(\"restrict\"),ne=ct(\"finalize\"),re=ct(\"cast\"),se=ct(\"return\"),ie=ct(\"yield\");function oe(t,e,n){if(n){const{set:r,get:s,value:i,enumerable:o,configurable:c=!0,writable:a=!0}=n;Object.defineProperty(t,e,s||r?{get:s,set:r,configurable:c,enumerable:o}:{value:i,configurable:c,enumerable:o,writable:a})}return t}function ce(t,e){for(const[n,r]of Object.entries(e))oe(t,n,r);for(const n of Object.getOwnPropertySymbols(e)){oe(t,n,e[n])}return t}function ae(t){return void 0!==t?{value:t}:void 0}function le(t){return\"return\"===t?.error?t=>{try{return t()}catch(t){return t}}:t=>t()}function ue({type:t,bitSize:e}){switch(t){case D.Bool:return\"boolean\";case D.Int:case D.Uint:if(e>32)return\"bigint\";case D.Float:return\"number\"}}function fe(t,e=\"utf-8\"){const n=de[e]??=new TextDecoder(e);let r;if(Array.isArray(t))if(1===t.length)r=t[0];else{let e=0;for(const n of t)e+=n.length;const{constructor:n}=t[0];r=new n(e);let s=0;for(const e of t)r.set(e,s),s+=e.length}else r=t;return\"SharedArrayBuffer\"===r.buffer[Symbol.toStringTag]&&(r=new r.constructor(r)),n.decode(r)}function he(t,e=\"utf-8\"){if(\"utf-16\"===e){const{length:e}=t,n=new Uint16Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}return(ge[e]??=new TextEncoder).encode(t)}const de={},ge={};function be(t,e,n){let r=0,s=t.length;if(0===s)return 0;for(;r<s;){const i=Math.floor((r+s)/2);n(t[i])<=e?r=i+1:s=i}return s}const ye=function(t,e){return!!e&&!!(t&BigInt(e-1))},pe=function(t,e){return t+BigInt(e-1)&~BigInt(e-1)},me=0xFFFFFFFFFFFFFFFFn,we=-1n,Se=function(t,e){return t+BigInt(e)};function ve(t){if(\"number\"==typeof t.length)return t;const e=t[Symbol.iterator](),n=e.next(),r=n.value?.length;if(\"number\"==typeof r&&\"length\"===Object.keys(n.value).join())return Object.assign(function*(){let t;for(;!(t=e.next()).done;)yield t.value}(),{length:r});{const t=[];let r=n;for(;!r.done;)t.push(r.value),r=e.next();return t}}function Ae(t,e){const{constructor:n}=t;return n===e?1:n.child===e?t.length:void 0}function Ve(t,e){const n=[],r=new Map,s=t=>{if(t&&!r.get(t)&&(r.set(t,!0),n.push(t),t[e]))for(const n of Object.values(t[e]))s(n)};for(const e of t)s(e.instance.template),s(e.static.template);return n}function xe(t,e){return t===e||t?.[qt]===e[qt]&&t?.[Bt]!==e?.[Bt]}function Ee(t,e){return t instanceof e||xe(t?.constructor,e)}function Ie({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}function $e(){return this}function Oe(){return this[Mt]}function Me(){return String(this)}function Ue(){}class Te{map=new WeakMap;find(t){return this.map.get(t)}save(t,e){return this.map.set(t,e),e}}const Ce={name:\"\",mixins:[],constructor:null};function ze(t){return Ce.constructor||Ce.mixins.push(t),t}function Fe(){return Ce.constructor||(Ce.constructor=function(t,e){const n={},r=function(){for(const[t,e]of Object.entries(n))this[t]=structuredClone(e)},{prototype:s}=r;oe(r,\"name\",ae(t));for(const t of e)for(let[e,r]of Object.entries(t))if(\"function\"==typeof r)oe(s,e,ae(r));else{let t=n[e];if(void 0!==t)if(t?.constructor===Object)r=Object.assign({...t},r);else if(t!==r)throw new Error(`Duplicate property: ${e}`);n[e]=r}return r}(Ce.name,Ce.mixins),Ce.name=\"\",Ce.mixins=[]),Ce.constructor}function je(t,e,n){if(t+e<=8){const r=2**e-1;if(n)return function(e,n,s){const i=n.getUint8(s)>>t&r;e.setUint8(0,i)};{const e=255^r<<t;return function(n,s,i){const o=s.getUint8(0),c=n.getUint8(i)&e|(o&r)<<t;n.setUint8(i,c)}}}{const r=8-t,s=2**r-1;if(n){const n=2**(e%8)-1;return function(i,o,c){let a,l=c,u=0,f=o.getUint8(l++),h=f>>t&s,d=r,g=e;do{g>d&&(f=o.getUint8(l++),h|=f<<d),a=g>=8?255&h:h&n,i.setUint8(u++,a),h>>=8,g-=8}while(g>0)}}{const n=2**((e-r)%8)-1,i=255^s<<t,o=255^n;return function(r,s,c){let a,l,u=0,f=c,h=r.getUint8(f),d=h&i,g=t,b=e+g;do{b>g&&(a=s.getUint8(u++),d|=a<<g,g+=8),b>=8?l=255&d:(h=r.getUint8(f),l=h&o|d&n),r.setUint8(f++,l),d>>=8,g-=8,b-=8}while(b>0)}}}}ze({accessorCache:new Map,getAccessor(t,e){const{type:n,bitSize:r,bitOffset:s,byteSize:i}=e,o=[],c=void 0===i&&(7&r||7&s);c&&o.push(\"Unaligned\");let a=R[n];r>32&&(n===D.Int||n===D.Uint)&&(a=r<=64?`Big${a}`:`Jumbo${a}`),o.push(a,`${n===D.Bool&&i?8*i:r}`),c&&o.push(`@${s}`);const l=t+o.join(\"\");let u=DataView.prototype[l];if(u&&this.usingBufferFallback()){const e=this,s=u,i=function(t){const{buffer:e,byteOffset:n,byteLength:s}=this,i=e[_t];if(i){if(t<0||t+r/8>s)throw new RangeError(\"Offset is outside the bounds of the DataView\");return i+BigInt(n+t)}};u=\"get\"===t?function(t,o){const c=i.call(this,t);return void 0!==c?e.getNumericValue(n,r,c):s.call(this,t,o)}:function(t,o,c){const a=i.call(this,t);return void 0!==a?e.setNumericValue(n,r,a,o):s.call(this,t,o,c)}}if(u)return u;if(u=this.accessorCache.get(l),u)return u;for(;o.length>0;){const n=`getAccessor${o.join(\"\")}`;if(u=this[n]?.(t,e))break;o.pop()}if(!u)throw new Error(`No accessor available: ${l}`);return oe(u,\"name\",ae(l)),this.accessorCache.set(l,u),u},imports:{getNumericValue:null,setNumericValue:null}}),ze({getAccessorBigInt(t,e){const{bitSize:n}=e,r=2n**BigInt(n-1),s=r-1n;return\"get\"===t?function(t,e){const n=this.getBigUint64(t,e);return(n&s)-(n&r)}:function(t,e,n){const i=e<0?r|e&s:e&s;this.setBigUint64(t,i,n)}}}),ze({getAccessorBigUint(t,e){const{bitSize:n}=e,r=2n**BigInt(n)-1n;return\"get\"===t?function(t,e){return this.getBigInt64(t,e)&r}:function(t,e,n){const s=e&r;this.setBigUint64(t,s,n)}}}),ze({getAccessorBool(t,e){const{byteSize:n}=e,r=8*n,s=this.getAccessor(t,{type:D.Uint,bitSize:r,byteSize:n});if(\"get\"===t)return function(t,e){return!!s.call(this,t,e)};{const t=r<=32?0:0n,e=r<=32?1:1n;return function(n,r,i){s.call(this,n,r?e:t,i)}}}}),ze({getAccessorFloat128(t,e){const{byteSize:n}=e,r=new DataView(new ArrayBuffer(8)),s=function(t,e){return BigInt(this.getUint32(t+(e?0:n-4),e))|BigInt(this.getUint32(t+(e?4:n-8),e))<<32n|BigInt(this.getUint32(t+(e?8:n-12),e))<<64n|BigInt(this.getUint32(t+(e?12:n-16),e))<<96n},i=function(t,e,r){const s=0xffffffffn&e,i=e>>32n&0xffffffffn,o=e>>64n&0xffffffffn,c=e>>96n&0xffffffffn;this.setUint32(t+(r?0:n-4),Number(s),r),this.setUint32(t+(r?4:n-8),Number(i),r),this.setUint32(t+(r?8:n-12),Number(o),r),this.setUint32(t+(r?12:n-16),Number(c),r)};return\"get\"===t?function(t,e){const n=s.call(this,t,e),i=n>>127n,o=(0x7fff0000000000000000000000000000n&n)>>112n,c=0x0000ffffffffffffffffffffffffffffn&n;if(0n===o){const t=c?Number.MIN_VALUE:0;return i?-t:t}if(0x7fffn===o)return c?NaN:i?-1/0:1/0;const a=o-16383n+1023n;if(a>=2047n){const t=1/0;return i?-t:t}const l=i<<63n|a<<52n|(c>>60n)+BigInt((c&2n**60n-1n)>=2n**59n);return r.setBigUint64(0,l,e),r.getFloat64(0,e)}:function(t,e,n){r.setFloat64(0,e,n);const s=r.getBigUint64(0,n),o=s>>63n,c=(0x7ff0000000000000n&s)>>52n,a=0x000fffffffffffffn&s;let l;l=0n===c?o<<127n|a<<60n:0x07ffn===c?o<<127n|0x7fffn<<112n|(a?1n:0n):o<<127n|c-1023n+16383n<<112n|a<<60n,i.call(this,t,l,n)}}}),ze({getAccessorFloat16(t,e){const n=new DataView(new ArrayBuffer(4)),r=DataView.prototype.setUint16,s=DataView.prototype.getUint16;return\"get\"===t?function(t,e){const r=s.call(this,t,e),i=r>>>15,o=(31744&r)>>10,c=1023&r;if(0===o)return i?-0:0;if(31===o)return c?NaN:i?-1/0:1/0;const a=i<<31|o-15+127<<23|c<<13;return n.setUint32(0,a,e),n.getFloat32(0,e)}:function(t,e,s){n.setFloat32(0,e,s);const i=n.getUint32(0,s),o=i>>>31,c=(2139095040&i)>>23,a=8388607&i,l=c-127+15;let u;u=0===c?o<<15:255===c?o<<15|31744|(a?1:0):l>=31?o<<15|31744:o<<15|l<<10|a>>13,r.call(this,t,u,s)}}}),ze({getAccessorFloat80(t,e){const{byteSize:n}=e,r=new DataView(new ArrayBuffer(8)),s=function(t,e){return BigInt(this.getUint32(t+(e?0:n-4),e))|BigInt(this.getUint32(t+(e?4:n-8),e))<<32n|BigInt(this.getUint32(t+(e?8:n-12),e))<<64n},i=function(t,e,r){const s=0xffffffffn&e,i=e>>32n&0xffffffffn,o=e>>64n&0xffffffffn;this.setUint32(t+(r?0:n-4),Number(s),r),this.setUint32(t+(r?4:n-8),Number(i),r),this.setUint32(t+(r?8:n-12),Number(o),r)};return\"get\"===t?function(t,e){const n=s.call(this,t,e),i=n>>79n,o=(0x7fff0000000000000000n&n)>>64n,c=0x00007fffffffffffffffn&n;if(0n===o){const t=c?Number.MIN_VALUE:0;return i?-t:t}if(0x7fffn===o)return c?NaN:i?-1/0:1/0;const a=o-16383n+1023n;if(a>=2047n){const t=1/0;return i?-t:t}const l=i<<63n|a<<52n|(c>>11n)+BigInt((c&2n**11n-1n)>=2n**10n);return r.setBigUint64(0,l,e),r.getFloat64(0,e)}:function(t,e,n){r.setFloat64(0,e,n);const s=r.getBigUint64(0,n),o=s>>63n,c=(0x7ff0000000000000n&s)>>52n,a=0x000fffffffffffffn&s;let l;l=0n===c?o<<79n|a<<11n:0x07ffn===c?o<<79n|0x7fffn<<64n|(a?0x00002000000000000000n:0n)|0x00008000000000000000n:o<<79n|c-1023n+16383n<<64n|a<<11n|0x00008000000000000000n,i.call(this,t,l,n)}}}),ze({getAccessorInt(t,e){const{bitSize:n,byteSize:r}=e;if(r){const e=this.getAccessor(t,{type:D.Uint,bitSize:8*r,byteSize:r}),s=2**(n-1),i=s-1;return\"get\"===t?function(t,n){const r=e.call(this,t,n);return(r&i)-(r&s)}:function(t,n,r){const o=n<0?s|n&i:n&i;e.call(this,t,o,r)}}}}),ze({getAccessorJumboInt(t,e){const{bitSize:n}=e,r=this.getJumboAccessor(t,n),s=2n**BigInt(n-1),i=s-1n;return\"get\"===t?function(t,e){const n=r.call(this,t,e);return(n&i)-(n&s)}:function(t,e,n){const o=e<0?s|e&i:e&i;r.call(this,t,o,n)}}}),ze({getAccessorJumboUint(t,e){const{bitSize:n}=e,r=this.getJumboAccessor(t,n),s=2n**BigInt(n)-1n;return\"get\"===t?function(t,e){return r.call(this,t,e)&s}:function(t,e,n){const i=e&s;r.call(this,t,i,n)}}}),ze({getJumboAccessor(t,e){const n=e+63>>6;return\"get\"===t?function(t,e){let r=0n;if(e)for(let s=0,i=t+8*(n-1);s<n;s++,i-=8){r=r<<64n|this.getBigUint64(i,e)}else for(let s=0,i=t;s<n;s++,i+=8){r=r<<64n|this.getBigUint64(i,e)}return r}:function(t,e,r){let s=e;const i=0xffffffffffffffffn;if(r)for(let e=0,o=t;e<n;e++,o+=8){const t=s&i;this.setBigUint64(o,t,r),s>>=64n}else for(let e=0,o=t+8*(n-1);e<n;e++,o-=8){const t=s&i;this.setBigUint64(o,t,r),s>>=64n}}}}),ze({getAccessorUint(t,e){const{bitSize:n,byteSize:r}=e;if(r){const s=this.getAccessor(t,{...e,bitSize:8*r}),i=2**n-1;return\"get\"===t?function(t,e){return s.call(this,t,e)&i}:function(t,e,n){const r=e&i;s.call(this,t,r,n)}}}}),ze({getAccessorUnalignedBool1(t,e){const{bitOffset:n}=e,r=1<<(7&n);return\"get\"===t?function(t){return!!(this.getInt8(t)&r)}:function(t,e){const n=this.getInt8(t),s=e?n|r:n&~r;this.setInt8(t,s)}}}),ze({getAccessorUnalignedInt(t,e){const{bitSize:n,bitOffset:r}=e,s=7&r;if(s+n<=8){const e=2**(n-1),r=e-1;if(\"get\"===t)return function(t){const n=this.getUint8(t)>>>s;return(n&r)-(n&e)};{const t=255^(r|e)<<s;return function(n,i){let o=this.getUint8(n);o=o&t|(i<0?e|i&r:i&r)<<s,this.setUint8(n,o)}}}}}),ze({getAccessorUnalignedUint(t,e){const{bitSize:n,bitOffset:r}=e,s=7&r;if(s+n<=8){const e=2**n-1;if(\"get\"===t)return function(t){return this.getUint8(t)>>>s&e};{const t=255^e<<s;return function(n,r){const i=this.getUint8(n)&t|(r&e)<<s;this.setUint8(n,i)}}}}}),ze({getAccessorUnaligned(t,e){const{bitSize:n,bitOffset:r}=e,s=7&r,i=[1,2,4,8].find((t=>8*t>=n))??64*Math.ceil(n/64),o=new DataView(new ArrayBuffer(i));if(\"get\"===t){const t=this.getAccessor(\"get\",{...e,byteSize:i}),r=je(s,n,!0);return function(e,n){return r(o,this,e),t.call(o,0,n)}}{const t=this.getAccessor(\"set\",{...e,byteSize:i}),r=je(s,n,!1);return function(e,n,s){t.call(o,0,n,s),r(this,o,e)}}}}),ze({createSignal(t,e){const{constructor:{child:n}}=t.instance.members[0].structure,r=new Int32Array([e?.aborted?1:0]),s=n(r);return e&&e.addEventListener(\"abort\",(()=>{Atomics.store(r,0,1)}),{once:!0}),{ptr:s}},createInboundSignal(t){const e=new AbortController;if(t.ptr[\"*\"])e.abort();else{const n=setInterval((()=>{t.ptr[\"*\"]&&(e.abort(),clearInterval(n))}),50)}return e.signal}});class Be extends SyntaxError{constructor(t){super(`Cannot convert ${t} to an Int`)}}class Ne extends TypeError{constructor(){super(\"Unsupported\")}}class ke extends TypeError{constructor(t){const{name:e}=t;super(`An initializer must be provided to the constructor of ${e}, even when the intended value is undefined`)}}class Le extends TypeError{constructor(t,n,r=null){const{name:s,type:i,byteSize:o}=t,c=n.byteLength,a=1!==o?\"s\":\"\";let l;if(i!==e.Slice||r){l=`${s} has ${i===e.Slice?r.length*o:o} byte${a}, received ${c}`}else l=`${s} has elements that are ${o} byte${a} in length, received ${c}`;super(l)}}class Pe extends TypeError{constructor(t){const{type:n,byteSize:r,typedArray:s}=t,i=1!==r?\"s\":\"\",o=[\"ArrayBuffer\",\"DataView\"].map(Mn);let c;s&&o.push(Mn(s.name)),c=n===e.Slice?`Expecting ${Tn(o)} that can accommodate items ${r} byte${i} in length`:`Expecting ${Tn(o)} that is ${r} byte${i} in length`,super(c)}}class De extends TypeError{constructor(t,e){const{name:n}=t;let r;r=\"number\"==typeof e||\"bigint\"==typeof e?`Value given does not correspond to an item of enum ${n}: ${e}`:`Enum item of the type ${n} expected, received ${e}`,super(r)}}class Re extends TypeError{constructor(t,e){const{name:n}=t,r=typeof e;let s;\"string\"===r||\"number\"===r||$n(e)?($n(e)&&(e=`{ error: ${JSON.stringify(e.error)} }`),s=`Error ${r} does not corresponds to any error in error set ${n}: ${e}`):s=`Error of the type ${n} expected, received ${e}`,super(s)}}class Ze extends TypeError{constructor(t){const{name:e}=t;super(`Error given is not a part of error set ${e}`)}}class Je extends TypeError{constructor(t){const{name:e}=t;super(`Only one property of ${e} can be given a value`)}}class Ge extends TypeError{constructor(t,e,n){super(`Accessing property ${e} when ${n} is active`)}}class _e extends TypeError{constructor(t,e,n){const{name:r,instance:{members:s}}=t;super(`${r} needs an initializer for one of its union properties: ${s.slice(0,n?-1:void 0).map((t=>t.name)).join(\", \")}`)}}class qe extends TypeError{constructor(t,e,n){const{name:r}=t,s=[];if(Array.isArray(e))for(const t of e)s.push(Mn(t));else s.push(Mn(e));const i=On(n);super(`${r} expects ${Tn(s)} as argument, received ${i}`)}}class He extends qe{constructor(t,n,r=!1){const{instance:{members:[s]},type:i,constructor:o}=t,c=[],a=ue(s);if(a){let t;switch(s.structure?.type){case e.Enum:t=\"enum item\";break;case e.ErrorSet:t=\"error\";break;default:t=a}c.push(`array of ${t}s`)}else c.push(\"array of objects\");o[Dt]&&c.push(o[Dt].name),i===e.Slice&&r&&c.push(\"length\"),super(t,c.join(\" or \"),n)}}class We extends TypeError{constructor(t,e,n){const{name:r,length:s,instance:{members:[i]}}=t,{structure:{constructor:o}}=i,{length:c,constructor:a}=n,l=e?.length??s,u=1!==l?\"s\":\"\";let f;f=a===o?\"only a single one\":a.child===o?`a slice/array that has ${c}`:`${c} initializer${c>1?\"s\":\"\"}`,super(`${r} has ${l} element${u}, received ${f}`)}}class Xe extends TypeError{constructor(t,e){super(t<0?\"Length of slice cannot be negative\":`Length of slice can be ${e} or less, received ${t}`)}}class Ye extends TypeError{constructor(t,e){const{name:n}=t;super(`Missing initializers for ${n}: ${e.join(\", \")}`)}}class Ke extends TypeError{constructor(t,e){const{name:n,instance:{members:r}}=t;let s;s=r.find((t=>t.name===e))?`Comptime value cannot be changed: ${e}`:`${n} does not have a property with that name: ${e}`,super(s)}}class Qe extends Error{constructor(t,e,n=!1){super(),this.fnName=\"fn\",this.argIndex=t,this.argCount=e,this.variadic=n}get message(){const t=1!==this.argIndex?\"s\":\"\";let e=this.argIndex;return this.variadic&&(e=`at least ${e}`),`${this.fnName}(): Expecting ${e} argument${t}, received ${this.argCount}`}}class tn extends Error{constructor(){super(\"Undefined argument\")}}class en extends TypeError{constructor(){super(\"Non-slice pointers can only be created with the help of the new operator\")}}class nn extends TypeError{constructor(){super(\"Casting to function is not allowed\")}}class rn extends TypeError{constructor(t,e){const{name:n}=t,{constructor:{name:r}}=e;super(`Conversion of ${r} to ${n} requires an explicit cast`)}}class sn extends TypeError{constructor(t,e,n,r){const{name:s}=t;super(`${s} expects the sentinel value ${e} at ${r-1}, found at ${n}`)}}class on extends TypeError{constructor(t,e,n){const{name:r}=t;super(`${r} expects the sentinel value ${e} at ${n-1}`)}}class cn extends TypeError{constructor(t,e){super(`Unable to simultaneously align memory to ${e}-byte and ${t}-byte boundary`)}}class an extends TypeError{constructor(t,e){const n=On(e);super(`Expected ${Mn(t)}, received ${n}`)}}class ln extends TypeError{constructor(){super(\"Pointers within an untagged union are not accessible\")}}class un extends TypeError{constructor(){super(\"Null pointer\")}}class fn extends TypeError{constructor(t){super(`Object has been freed already: ${t.constructor.name}`)}}class hn extends TypeError{constructor(t,e){const{name:n}=t;let r;if(null!=e){const t=e instanceof Object&&e.constructor!==Object?`${e.constructor.name} object`:typeof e;r=`${Un(t)} ${t}`}else r=e+\"\";super(`${n} cannot point to ${r}`)}}class dn extends TypeError{constructor(){super(\"Pointers in Zig memory cannot point to garbage-collected object\")}}class gn extends TypeError{constructor(t,e){const{type:n,bitSize:r}=t;super(`${(r>32?\"Big\":\"\")+R[n]+r} cannot represent the value given: ${e}`)}}class bn extends RangeError{constructor(t,e){const{name:n}=t;super(`Index exceeds the size of ${n??\"array\"}: ${e}`)}}class yn extends TypeError{constructor(t){const{name:e}=t;super(`${void 0!==e?`Property ${e}`:\"Element\"} can only be undefined`)}}class pn extends TypeError{constructor(t){const{name:e,structure:{name:n}}=t;super(`Unable to create ${n} as it is not situated on a byte boundary: ${e}`)}}class mn extends TypeError{constructor(){super(\"Unable to modify read-only object\")}}class wn extends TypeError{constructor(t){const{name:e}=t;super(`${e} cannot point to a read-only object`)}}class Sn extends TypeError{constructor(t){const{name:e}=t;super(`Unable to access opaque structure ${e}`)}}class vn extends TypeError{constructor(t){const{name:e}=t;super(`Unable to create instance of ${e}, as it is opaque`)}}class An extends TypeError{constructor(){super(\"Arguments passed to variadic function must be casted to a Zig type\")}}class Vn extends TypeError{constructor(){super(\"Unexpected async generator\")}}class xn extends Error{constructor(t,e=0){if(t instanceof Error){super(t.message);const{stack:n}=this;if(\"string\"==typeof n){const r=n.split(\"\\n\");r.splice(1,e),t.stack=r.join(\"\\n\")}return t}super(t??\"Error encountered in Zig code\")}}function En(t,e){const{message:n}=this;return ce(this,{fnName:ae(\"fn\"),argIndex:ae(t),argCount:ae(e),message:{get(){const{fnName:t,argIndex:e,argCount:r}=this;return`${t}(${(0!==e?\"..., \":\"\")+`args[${e}]`+(e!==r-1?\", ...\":\"\")}): ${n}`}}}),this}function In(){throw new mn}function $n(t){return\"object\"==typeof t&&\"string\"==typeof t.error&&1===Object.keys(t).length}function On(t){const e=typeof t;let n;return n=\"object\"===e?t?Object.prototype.toString.call(t):\"null\":e,Mn(n)}function Mn(t){return`${Un(t)} ${t}`}function Un(t){return/^\\W*[aeiou]/i.test(t)?\"an\":\"a\"}function Tn(t,e=\"or\"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(\", \")+n+t[t.length-1]:t.join(n)}function Cn(t){let n,r=1,s=null;if(t instanceof DataView){n=t;const e=n?.[ft]?.align;e&&(r=e)}else if(t instanceof ArrayBuffer)n=new DataView(t);else if(t)if(t[at])t.constructor[dt]===e.Pointer&&(t=t[\"*\"]),n=t[at],s=t.constructor,r=s[zt];else{\"string\"==typeof t&&(t=he(t));const{buffer:e,byteOffset:s,byteLength:i,BYTES_PER_ELEMENT:o}=t;e&&void 0!==s&&void 0!==i&&(n=new DataView(e,s,i),r=o)}return{dv:n,align:r,constructor:s}}ze({defineAlloc:()=>({value(t,e=1){const n=31-Math.clz32(e),{vtable:{alloc:r},ptr:s}=this,i=r(s,t,n,0);i.length=t;const o=i[\"*\"][at];return o[ft].align=e,o}}),defineFree(){const t=this;return{value(e){const{dv:n,align:r}=Cn(e),s=n?.[ft];if(!s)throw new an(\"object containing allocated Zig memory\",e);const{address:i}=s;if(i===we)throw new fn(e);const o=31-Math.clz32(r),{vtable:{free:c},ptr:a}=this;c(a,n,o,0),t.releaseZigView(n)}}},defineDupe(){const t=this.getCopyFunction();return{value(e){const{dv:n,align:r,constructor:s}=Cn(e);if(!n)throw new an(\"string, DataView, typed array, or Zig object\",e);const i=this.alloc(n.byteLength,r);return t(i,n),s?s(i):i}}}}),ze({variables:[],getSpecialExports(){const t=t=>{if(void 0===t)throw new Error(\"Not a Zig type\");return t};return{init:(...t)=>this.initialize?.(...t),abandon:()=>this.abandonModule?.(),released:()=>this.released,connect:t=>this.consoleObject=t,sizeOf:e=>t(e?.[Tt]),alignOf:e=>t(e?.[zt]),typeOf:e=>n[t(e?.[dt])]?.toLowerCase()}},recreateStructures(t,e){Object.assign(this,e);const n=(t,e)=>{for(const[n,r]of Object.entries(e))t[n]=s(r);return t},r=t=>t.length?t.buffer:new ArrayBuffer(0),s=t=>{const{memory:e,structure:s,actual:i}=t;if(e){if(i)return i;{const{array:i,offset:o,length:c}=e,a=this.obtainView(r(i),o,c),{handle:l,const:u}=t,f=s?.constructor,h=t.actual=f.call(Bt,a);return u&&this.makeReadOnly(h),t.slots&&n(h[lt],t.slots),l&&this.variables.push({handle:l,object:h}),h}}return s};this.resetGlobalErrorSet?.();const i=new Map;for(const e of t){for(const t of[e.instance,e.static])if(t.template){const{slots:e,memory:n,handle:s}=t.template,o=t.template={};if(n){const{array:t,offset:e,length:i}=n;o[at]=this.obtainView(r(t),e,i),s&&this.variables.push({handle:s,object:o})}if(e){const t=o[lt]={};i.set(t,e)}}this.defineStructure(e)}for(const[t,e]of i)n(t,e);for(const e of t)this.finalizeStructure(e)}}),ze({jsFunctionThunkMap:new Map,jsFunctionCallerMap:new Map,jsFunctionControllerMap:new Map,jsFunctionIdMap:null,jsFunctionNextId:1,getFunctionId(t){this.jsFunctionIdMap||(this.jsFunctionIdMap=new WeakMap);let e=this.jsFunctionIdMap.get(t);return void 0===e&&(e=this.jsFunctionNextId++,this.jsFunctionIdMap.set(t,e)),e},getFunctionThunk(t,e){const n=this.getFunctionId(t);let r=this.jsFunctionThunkMap.get(n);if(void 0===r){const t=this.getViewAddress(e[at]),s=this.createJsThunk(t,n);if(!s)throw new Error(\"Unable to create function thunk\");r=this.obtainZigView(s,0),this.jsFunctionThunkMap.set(n,r),this.jsFunctionControllerMap.set(n,e)}return r},createInboundCaller(t,e){const n=this.getFunctionId(t);return this.jsFunctionCallerMap.set(n,((n,r)=>{let s=X,i=!1;try{const o=e(n);if(Yt in o){o[Yt](\"reset\");const t=this.startContext();this.updatePointerTargets(t,o,!0),this.updateShadowTargets(t),this.endContext()}const c=function(t){try{if(!(e[Rt]&&t instanceof Error))throw t;o[se](t)}catch(e){s=Y,console.error(t)}},a=function(t){try{o[se](t)}catch(t){s=Y,console.error(t)}};try{const e=t(...o),n=o.hasOwnProperty(se);if(\"Promise\"===e?.[Symbol.toStringTag])if(r||n){const t=e.then(a,c);r&&t.then((()=>this.finalizeAsyncCall(r,s))),i=!0,s=X}else s=K;else if(e?.[Symbol.asyncIterator]){if(!o.hasOwnProperty(ie))throw new Vn;this.pipeContents(e,o),s=X}else null==e&&n||a(e)}catch(t){c(t)}}catch(t){console.error(t),s=Y}return r&&!i&&this.finalizeAsyncCall(r,s),s})),function(...e){return t(...e)}},defineArgIterator(t){const n=this,r=t.filter((({structure:t})=>t.type===e.Struct&&t.flags&g)).length;return{value(){let s,i=0,o=0,c=0;const a=[];for(const[l,{structure:u,type:f}]of t.entries())try{let t,h,d=this[l];f===D.Object&&d?.[at]?.[ft]&&(d=new d.constructor(d)),u.type===e.Struct&&(u.flags&g?(t=1===r?\"allocator\":\"allocator\"+ ++i,h=this[Gt]=d):u.flags&b?(t=\"callback\",1==++o&&(h=n.createPromiseCallback(this,d))):u.flags&y?(t=\"callback\",1==++o&&(h=n.createGeneratorCallback(this,d))):u.flags&p&&(t=\"signal\",1==++c&&(h=n.createInboundSignal(d)))),void 0!==t?void 0!==h&&(s??={},s[t]=h):a.push(d)}catch(t){a.push(t)}return s&&a.push(s),a[Symbol.iterator]()}}},performJsAction(t,e,n,r,s=0){if(t===Q){const t=this.obtainZigView(n,r);let i;return e?i=this.runFunction(e,t,s):(i=this.writeToConsole(t)?X:Y,s&&this.finalizeAsyncCall(s,i)),e&&this.releaseZigView(t),i}if(t===tt)return this.releaseFunction(e)},runFunction(t,e,n){const r=this.jsFunctionCallerMap.get(t);return r?r(e,n):Y},releaseFunction(t){const e=this.jsFunctionThunkMap.get(t),n=this.jsFunctionControllerMap.get(t);if(e&&n){const r=this.getViewAddress(n[at]),s=this.getViewAddress(e);this.destroyJsThunk(r,s),this.releaseZigView(e),t&&(this.jsFunctionThunkMap.delete(t),this.jsFunctionCallerMap.delete(t),this.jsFunctionControllerMap.delete(t))}},exports:{performJsAction:null},imports:{createJsThunk:null,destroyJsThunk:null,finalizeAsyncCall:null}}),ze({createOutboundCaller(t,e){const n=this,r=function(...s){try{return n.invokeThunk(t,r,new e(s,this?.[Gt]))}catch(t){throw\"fnName\"in t&&(t.fnName=r.name),t}};return r},copyArguments(t,n,r,s,i){let o=0,c=0,a=0;const l=t[Pt];for(const{type:u,structure:f}of r){let r,h,d,m;if(f.type===e.Struct)if(f.flags&g){r=(1==++a?s?.allocator??s?.allocator1:s?.[`allocator${a}`])??this.createDefaultAllocator(t,f)}else f.flags&b?r=h??=this.createPromise(t,s?.callback):f.flags&y?r=d??=this.createGenerator(t,s?.callback):f.flags&p&&(r=m??=this.createSignal(f,s?.signal));if(void 0===r&&(r=n[c++],void 0===r&&u!==D.Void))throw new tn;try{l[o++].call(t,r,i)}catch(t){throw En.call(t,o-1,n.length)}}},invokeThunk(t,e,n){const r=this.startContext(),s=n[Nt],i=this.getViewAddress(t[at]),o=this.getViewAddress(e[at]),c=Yt in n;c&&this.updatePointerAddresses(r,n);const a=this.getViewAddress(n[at]),l=s?this.getViewAddress(s[at]):0;this.updateShadows(r);const u=()=>{this.updateShadowTargets(r),c&&this.updatePointerTargets(r,n),this.libc&&this.flushStdout?.(),this.flushConsole?.(),this.endContext()};if(!(s?this.runVariadicThunk(i,o,a,l,s.length):this.runThunk(i,o,a)))throw u(),new xn;if(ne in n?n[ne]=u:u(),n.hasOwnProperty(se)){let t=null;try{t=n.retval}catch(e){t=new xn(e,1)}return null!=t&&n[se](t),n[Zt]??n[Jt]}try{return n.retval}catch(t){throw new xn(t,1)}},imports:{runThunk:null,runVariadicThunk:null}}),ze({copiers:null,resetters:null,defineCopier(t,e){const n=this.getCopyFunction(t,e);return{value(t){const e=t[at],r=this[at];n(r,e)}}},defineResetter(t,e){const n=this.getResetFunction(e);return{value(){const r=this[at];n(r,t,e)}}},getCopyFunction(t,e=!1){this.copiers??=this.defineCopiers();return(e?void 0:this.copiers[t])??this.copiers.any},getResetFunction(t){return this.resetters??=this.defineResetters(),this.resetters[t]??this.resetters.any},defineCopiers(){const t={type:D.Int,bitSize:8,byteSize:1},e={type:D.Int,bitSize:16,byteSize:2},n={type:D.Int,bitSize:32,byteSize:4},r=this.getAccessor(\"get\",t),s=this.getAccessor(\"set\",t),i=this.getAccessor(\"get\",e),o=this.getAccessor(\"set\",e),c=this.getAccessor(\"get\",n),a=this.getAccessor(\"set\",n);return{0:Ue,1:function(t,e){s.call(t,0,r.call(e,0))},2:function(t,e){o.call(t,0,i.call(e,0,!0),!0)},4:function(t,e){a.call(t,0,c.call(e,0,!0),!0)},8:function(t,e){a.call(t,0,c.call(e,0,!0),!0),a.call(t,4,c.call(e,4,!0),!0)},16:function(t,e){a.call(t,0,c.call(e,0,!0),!0),a.call(t,4,c.call(e,4,!0),!0),a.call(t,8,c.call(e,8,!0),!0),a.call(t,12,c.call(e,12,!0),!0)},any:function(t,e){let n=0,i=t.byteLength;for(;n+4<=i;)a.call(t,n,c.call(e,n,!0),!0),n+=4;for(;n+1<=i;)s.call(t,n,r.call(e,n)),n++}}},defineResetters(){const t={type:D.Int,bitSize:8,byteSize:1},e={type:D.Int,bitSize:16,byteSize:2},n={type:D.Int,bitSize:32,byteSize:4},r=this.getAccessor(\"set\",t),s=this.getAccessor(\"set\",e),i=this.getAccessor(\"set\",n);return{0:Ue,1:function(t,e){r.call(t,e,0)},2:function(t,e){s.call(t,e,0,!0)},4:function(t,e){i.call(t,e,0,!0)},8:function(t,e){i.call(t,e+0,0,!0),i.call(t,e+4,0,!0)},16:function(t,e){i.call(t,e+0,0,!0),i.call(t,e+4,0,!0),i.call(t,e+8,0,!0),i.call(t,e+12,0,!0)},any:function(t,e,n){let s=e;for(;s+4<=n;)i.call(t,s,0,!0),s+=4;for(;s+1<=n;)r.call(t,s,0),s++}}},imports:{copyExternBytes:null}}),ze({defaultAllocator:null,vtableFnIds:null,createDefaultAllocator(t,e){let n=this.defaultAllocator;if(!n){const{constructor:t}=e,{noResize:r}=t,s={alloc:(t,e,n)=>this.allocateHostMemory(e,1<<n),free:(t,e,n)=>{const r=this.getViewAddress(e[\"*\"][at]),s=e.length;this.freeHostMemory(r,s,1<<n)},resize:r},i=this.obtainZigView(me,0);n=this.defaultAllocator=new t({ptr:i,vtable:s}),this.vtableFnIds=[s.alloc,s.free].map((t=>this.getFunctionId(t)))}return n},freeDefaultAllocator(){if(this.vtableFnIds){for(const t of this.vtableFnIds)this.releaseFunction(t);this.defaultAllocator=null,this.vtableFnIds=null}},allocateHostMemory(t,e){const n=this.allocateJSMemory(t,e);{const r=this.getViewAddress(n);return this.registerMemory(r,t,e,!0,n),n[ft]={address:r,len:t,js:!0},n}},freeHostMemory(t,e,n){this.unregisterMemory(t,e)}}),ze({createGenerator(t,e){if(e){if(\"function\"!=typeof e)throw new an(\"function\",e)}else{const n=t[Jt]=new zn;e=n.push.bind(n)}const n=(r,s)=>{let i;if(2===e.length){const t=s instanceof Error;i=e(t?s:null,t?null:s)}else i=e(s);if(!i){t[ne]();const e=this.getFunctionId(n);this.releaseFunction(e)}return i};return t[se]=t=>n(null,t),{ptr:null,callback:n}},createGeneratorCallback(t,e){const{ptr:n,callback:r}=e;return t[ie]=e=>r.call(t,n,e),(...e)=>{const n=2===e.length?e[0]??e[1]:e[0];return t[ie](n)}},async pipeContents(t,e){try{try{const n=t[Symbol.asyncIterator]();for await(const t of n)if(null!==t&&!e[ie](t))break;e[ie](null)}catch(t){if(!e.constructor[Rt])throw t;e[ie](t)}}catch(t){console.error(t)}}});class zn{result=null;stopped=!1;finished=!1;promises={};async next(){if(this.stopped)return{done:!0};for(;;){const t=this.result;if(null!==t)return this.result=null,this.wake(\"space\"),{value:t,done:!1};if(this.error)throw this.error;if(this.finished)return{done:!0};await this.sleep(\"content\")}}async return(t){return this.stopped=!0,{value:t,done:!0}}async throw(t){throw this.stopped=!0,t}async push(t){return!this.stopped&&(t instanceof Error?(this.error=t,this.finished=!0):null===t?this.finished=!0:(null!==this.result&&await this.sleep(\"space\"),this.result=t),this.wake(\"content\"),!this.finished)}sleep(t){let e;const n=this.promises[t]??=new Promise((t=>e=t));return e&&(n.resolve=e),n}wake(t){const e=this.promises[t];e&&(this.promises[t]=null,e.resolve())}[Symbol.asyncIterator](){return this}}function Fn(t,e){return be(t,e,(t=>t.address))}ze({addIntConversion:t=>function(e,n){const r=t.call(this,e,n),{flags:s,bitSize:i}=n;if(\"set\"===e)return i>32?function(t,e,n){r.call(this,t,BigInt(e),n)}:function(t,e,n){const s=Number(e);if(!isFinite(s))throw new Be(e);r.call(this,t,s,n)};{const{flags:t}=n.structure;if(t&c&&i>32){const t=BigInt(Number.MAX_SAFE_INTEGER),e=BigInt(Number.MIN_SAFE_INTEGER);return function(n,s){const i=r.call(this,n,s);return e<=i&&i<=t?Number(i):i}}}return r}}),ze({isMemoryMapping:!0,memoryList:[],contextCount:0,startContext(){return++this.contextCount,{shadowList:[]}},endContext(){if(0==--this.contextCount){for(const{shadowDV:t}of this.memoryList)t&&this.freeShadowMemory(t);this.memoryList.splice(0)}},getShadowAddress(t,e,n,r){const s=e[at];if(n){if(void 0===n.address){const{start:e,end:i,targets:o}=n;let c,a=0;for(const t of o){const e=t[at],n=e.byteOffset,r=t.constructor[zt]??e[zt];(void 0===a||r>a)&&(a=r,c=n)}const l=i-e,u=this.allocateShadowMemory(l+a,1),f=this.getViewAddress(u),h=pe(Se(f,c-e),a),d=Se(h,e-c);for(const t of o){const n=t[at],r=n.byteOffset;if(r!==c){const s=t.constructor[zt]??n[zt];if(ye(Se(d,r-e),s))throw new cn(s,a)}}const g=u.byteOffset+Number(d-f),b=new DataView(u.buffer,g,l),y=new DataView(s.buffer,Number(e),l),p=this.registerMemory(d,l,1,r,y,b);t.shadowList.push(p),n.address=d}return Se(n.address,s.byteOffset-n.start)}{const n=e.constructor[zt]??s[zt],i=s.byteLength,o=this.allocateShadowMemory(i,n),c=this.getViewAddress(o),a=this.registerMemory(c,i,1,r,s,o);return t.shadowList.push(a),c}},updateShadows(t){const e=this.getCopyFunction();for(let{targetDV:n,shadowDV:r}of t.shadowList)e(r,n)},updateShadowTargets(t){const e=this.getCopyFunction();for(let{targetDV:n,shadowDV:r,writable:s}of t.shadowList)s&&e(n,r)},registerMemory(t,e,n,r,s,i){const o=Fn(this.memoryList,t);let c=this.memoryList[o-1];return c?.address===t&&c.len===e?c.writable||=r:(c={address:t,len:e,align:n,writable:r,targetDV:s,shadowDV:i},this.memoryList.splice(o,0,c)),c},unregisterMemory(t,e){const n=Fn(this.memoryList,t),r=this.memoryList[n-1];if(r?.address===t&&r.len===e)return this.memoryList.splice(n-1,1),r},findMemory(t,e,n,r){let s=n*(r??0);const i=Fn(this.memoryList,e),o=this.memoryList[i-1];let c;if(o?.address===e&&o.len===s)c=o.targetDV;else if(o?.address<=e&&Se(e,s)<=Se(o.address,o.len)){const t=Number(e-o.address),n=void 0===r,{targetDV:i}=o;n&&(s=i.byteLength-t),c=this.obtainView(i.buffer,i.byteOffset+t,s),n&&(c[zt]=o.align)}if(c){let{targetDV:e,shadowDV:n}=o;if(n&&t&&!t.shadowList.includes(o)){this.getCopyFunction()(e,n)}}else c=this.obtainZigView(e,s);return c},findShadowView(t){for(const{shadowDV:e,targetDV:n}of this.memoryList)if(n===t)return e},allocateZigMemory(t,e,n=jn.Normal){const r=t?this.allocateExternMemory(n,t,e):0;if(!r&&t)throw new Error(\"Out of memory\");const s=this.obtainZigView(r,t),i=s?.[ft];return i&&(i.align=e,i.type=n),s},freeZigMemory(t){const{address:e,unalignedAddress:n,len:r,align:s,type:i}=t[ft];r&&this.freeExternMemory(i,n??e,r,s),this.releaseZigView(t)},releaseZigView(t){const e=t[ft],n=e?.address;n&&n!==we&&(e.address=we,this.unregisterBuffer(Se(n,-t.byteOffset)))},getViewAddress(t){const e=t[ft];if(e)return e.address;{const e=this.getBufferAddress(t.buffer);return Se(e,t.byteOffset)}},...{imports:{allocateExternMemory:null,freeExternMemory:null,getBufferAddress:null,obtainExternBuffer:null},exports:{getViewAddress:null},externBufferList:[],allocateShadowMemory(t,e){return this.allocateJSMemory(t,e)},freeShadowMemory(t){},obtainZigView(t,e){if(function(t){return 0xaaaaaaaaaaaaaaaan===t}(t)&&(t=e>0?0:me),!t&&e)return null;const n=Fn(this.externBufferList,t),r=this.externBufferList[n-1];let s,i;return r?.address<=t&&Se(t,e)<=Se(r.address,r.len)?(s=r.buffer,i=Number(t-r.address)):(s=e>0?this.obtainExternBuffer(t,e,_t):new ArrayBuffer(0),s[ft]={address:t,len:e},this.externBufferList.splice(n,0,{address:t,len:e,buffer:s}),i=0),this.obtainView(s,i,e)},unregisterBuffer(t){const e=Fn(this.externBufferList,t),n=this.externBufferList[e-1];n?.address===t&&this.externBufferList.splice(e-1,1)},getTargetAddress(t,e,n,r){const s=e[at];if(n){if(void 0===n.misaligned){const t=this.getBufferAddress(s.buffer);for(const e of n.targets){const r=e[at].byteOffset,s=e.constructor[zt],i=Se(t,r);if(ye(i,s)){n.misaligned=!0;break}}void 0===n.misaligned&&(n.misaligned=!1,n.address=t)}if(!n.misaligned)return Se(n.address,s.byteOffset)}else{const t=e.constructor[zt],n=this.getViewAddress(s);if(!ye(n,t)){const e=s.byteLength;return this.registerMemory(n,e,t,r,s),n}}return this.getShadowAddress(t,e,n,r)}}});const jn={Normal:0,Scratch:1};function Bn(t,n){const{byteSize:r,type:s}=n;if(!(s===e.Slice?t.byteLength%r==0:t.byteLength===r))throw new Le(n,t)}function Nn(t){throw new Pe(t)}ze({released:!1,abandoned:!1,releaseFunctions(){const t=()=>{throw new Error(\"Module was abandoned\")};for(const e of Object.keys(this.imports))this[e]&&(this[e]=t)},abandonModule(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables?.(),this.abandoned=!0)},...{imports:{loadModule:null},exportFunctions(){const t={};for(const[e,n]of Object.entries(this.exports)){const r=this[n??e];r&&(t[e]=r.bind(this))}return t},importFunctions(t){for(const[e,n]of Object.entries(this.imports)){const r=t[n??e];r&&(this[e]=r)}}}}),ze({linkVariables(t){const e=this.getCopyFunction();for(const{object:n,handle:r}of this.variables){const s=n[at],i=this.recreateAddress(r),o=n[at]=this.obtainZigView(i,s.byteLength);t&&e(o,s),n.constructor[Ut]?.save?.(o,n);const c=t=>{const e=t[lt];if(e){const t=o.byteOffset;for(const n of Object.values(e))if(n){const e=n[at];if(e.buffer===s.buffer){const r=t+e.byteOffset-s.byteOffset;n[at]=this.obtainView(o.buffer,r,e.byteLength),n.constructor[Ut]?.save?.(o,n),c(n)}}}};c(n),n[Yt]?.((function(){this[Ht]()}),st.IgnoreInactive)}},unlinkVariables(){const t=this.getCopyFunction();for(const{object:e}of this.variables){const n=e[at],r=n[ft];if(r){t(e[at]=this.allocateMemory(r.len),n)}}},imports:{recreateAddress:null}}),ze({updatePointerAddresses(t,e){const n=new Map,r=new Map,s=[],i=function(t){const e=this[mt];if(void 0===n.get(e)){const t=e[lt][0];if(t){const o={target:t,writable:!e.constructor.const},c=t[at];if(c[ft])n.set(e,null);else{n.set(e,t);const a=r.get(c.buffer);if(a){const t=Array.isArray(a)?a:[a],e=be(t,c.byteOffset,(t=>t.target[at].byteOffset));t.splice(e,0,o),Array.isArray(a)||(r.set(c.buffer,t),s.push(t))}else r.set(c.buffer,o);t[Yt]?.(i,0)}}}},o=st.IgnoreRetval|st.IgnoreInactive;e[Yt](i,o);const c=this.findTargetClusters(s),a=new Map;for(const t of c)for(const e of t.targets)a.set(e,t);for(const[e,r]of n)if(r){const n=a.get(r),s=n?.writable??!e.constructor.const;e[Et]=this.getTargetAddress(t,r,n,s),It in e&&(e[It]=r.length)}},updatePointerTargets(t,e,n=!1){const r=new Map,s=function(e){const n=this[mt];if(!r.get(n)){r.set(n,!0);const i=n[lt][0],o=i&&e&st.IsImmutable?i:n[Ht](t,!0,!(e&st.IsInactive)),c=n.constructor.const?st.IsImmutable:0;c&st.IsImmutable||i&&!i[at][ft]&&i[Yt]?.(s,c),o!==i&&o&&!o[at][ft]&&o?.[Yt]?.(s,c)}},i=n?st.IgnoreRetval:0;e[Yt](s,i)},findTargetClusters(t){const e=[];for(const n of t){let t=null,r=0,s=0,i=null;for(const{target:o,writable:c}of n){const n=o[at],{byteOffset:a,byteLength:l}=n,u=a+l;let f=!0;t&&(s>a?(i?i.writable||=c:(i={targets:[t],start:r,end:s,address:void 0,misaligned:void 0,writable:c},e.push(i)),i.targets.push(o),u>s?i.end=u:f=!1):i=null),f&&(t=o,r=a,s=u)}}return e}}),ze({createPromise(t,e){if(e){if(\"function\"!=typeof e)throw new an(\"function\",e)}else t[Zt]=new Promise(((t,n)=>{e=e=>{e?.[at]?.[ft]&&(e=new e.constructor(e)),e instanceof Error?n(e):t(e)}}));const n=(r,s)=>{if(2===e.length){const t=s instanceof Error;e(t?s:null,t?null:s)}else e(s);t[ne]();const i=this.getFunctionId(n);this.releaseFunction(i)};return t[se]=t=>n(null,t),{ptr:null,callback:n}},createPromiseCallback(t,e){const{ptr:n,callback:r}=e;return t[se]=e=>r.call(t,n,e),(...e)=>{const n=2===e.length?e[0]??e[1]:e[0];return t[se](n)}}}),ze({addRuntimeCheck:t=>function(e,n){const r=t.call(this,e,n);if(\"set\"===e){const{min:t,max:e}=function(t){const{type:e,bitSize:n}=t,r=e===D.Int;let s=r?n-1:n;if(n<=32){return{min:r?-(2**s):0,max:2**s-1}}s=BigInt(s);return{min:r?-(2n**s):0n,max:2n**s-1n}}(n);return function(s,i,o){if(i<t||i>e)throw new gn(n,i);r.call(this,s,i,o)}}return r}}),ze({consoleObject:null,consolePending:[],consoleTimeout:0,writeToConsole(t){try{const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength).slice(),n=e.lastIndexOf(10);if(-1===n)this.consolePending.push(e);else{const t=e.subarray(0,n),r=e.subarray(n+1);this.writeToConsoleNow([...this.consolePending,t]),this.consolePending.splice(0),r.length>0&&this.consolePending.push(r)}return clearTimeout(this.consoleTimeout),this.consoleTimeout=0,this.consolePending.length>0&&(this.consoleTimeout=setTimeout((()=>{this.writeToConsoleNow(this.consolePending),this.consolePending.splice(0)}),250)),!0}catch(t){return console.error(t),!1}},writeToConsoleNow(t){const e=this.consoleObject??globalThis.console;e.log?.call?.(e,fe(t))},flushConsole(){this.consolePending.length>0&&(this.writeToConsoleNow(this.consolePending),this.consolePending.splice(0),clearTimeout(this.consoleTimeout))},imports:{flushStdout:null}}),ze({comptime:!1,slots:{},structures:[],structureCounters:{struct:0,union:0,errorSet:0,enum:0,opaque:0},littleEndian:!0,runtimeSafety:!1,libc:!1,readSlot(t,e){const n=t?t[lt]:this.slots;return n?.[e]},writeSlot(t,e,n){const r=t?t[lt]:this.slots;r&&(r[e]=n)},createTemplate:t=>({[at]:t,[lt]:{}}),beginStructure(t){const{type:e,name:n,length:r,signature:s=-1n,byteSize:i,align:o,flags:c}=t;return{constructor:null,type:e,flags:c,signature:s,name:n,length:r,byteSize:i,align:o,instance:{members:[],template:null},static:{members:[],template:null}}},attachMember(t,e,n=!1){(n?t.static:t.instance).members.push(e)},attachTemplate(t,e,n=!1){(n?t.static:t.instance).template=e},endStructure(t){t.name||this.inferTypeName(t),this.structures.push(t),this.finalizeStructure(t)},captureView(t,e,n,r){if(n){const n=this.allocateJSMemory(e,0);return e>0&&this.copyExternBytes(n,t,e),n}{const n=this.obtainZigView(t,e);return n[ft].handle=r,n}},castView(t,e,n,r,s){const{constructor:o,flags:c}=r,a=this.captureView(t,e,n,s),l=o.call(Bt,a);return c&i&&this.updatePointerTargets(null,l),n&&e>0&&this.makeReadOnly?.(l),l},acquireStructures(t){const e=this.getModuleAttributes();this.littleEndian=!!(e&et),this.runtimeSafety=!!(e&nt),this.libc=!!(e&rt);const n=this.getFactoryThunk(),r={[at]:this.obtainZigView(n,0)},{littleEndian:s}=this,o=new function(t){const{omitFunctions:e=!1,omitVariables:n=!1}=t,r=new DataView(new ArrayBuffer(4));let i=0;e&&(i|=H),n&&(i|=W),r.setUint32(0,i,s),this[at]=r}(t);this.comptime=!0,this.mixinUsage=new Map,this.invokeThunk(r,r,o),this.comptime=!1;for(const t of this.structures){const{constructor:e,flags:n,instance:{template:r}}=t;if(n&i&&r&&r[at]){const t=Object.create(e.prototype);t[at]=r[at],t[lt]=r[lt],this.updatePointerTargets(null,t)}}},getRootModule(){return this.structures[this.structures.length-1].constructor},hasMethods(){return!!this.structures.find((t=>t.type===e.Function))},exportStructures(){this.prepareObjectsForExport();const{structures:t,runtimeSafety:e,littleEndian:n,libc:r}=this;return{structures:t,settings:{runtimeSafety:e,littleEndian:n,libc:r}}},prepareObjectsForExport(){const t=[];for(const e of Ve(this.structures,lt)){const n=e[at]?.[ft];if(n){const{address:r,len:s,handle:i}=n,o=e[at]=this.captureView(r,s,!0);i&&(o.handle=i),t.push({address:r,len:s,owner:e,replaced:!1,handle:i})}}t.sort(((t,e)=>e.len-t.len));for(const e of t)if(!e.replaced)for(const n of t)if(e!==n&&!n.replaced&&!n.handle&&e.address<=n.address&&n.address<Se(e.address,e.len)){const t=e.owner[at],r=Number(n.address-e.address)+t.byteOffset;n.owner[at]=this.obtainView(t.buffer,r,n.len),n.replaced=!0}},useStructures(){const t=this.getRootModule(),e=Ve(this.structures,lt);for(const t of e)t[at]?.[ft]&&this.variables.push({object:t});return this.slots={},this.structures=[],t.__zigar=this.getSpecialExports(),t},inferTypeName(t){const e=this[`get${n[t.type]}Name`];t.name=e.call(this,t)},getPrimitiveName(t){const{instance:{members:[e]},static:{template:n},flags:r}=t;switch(e.type){case D.Bool:return\"bool\";case D.Int:return r&c?\"isize\":`i${e.bitSize}`;case D.Uint:return r&c?\"usize\":`u${e.bitSize}`;case D.Float:return`f${e.bitSize}`;case D.Void:return\"void\";case D.Literal:return\"enum_literal\";case D.Null:return\"null\";case D.Undefined:return\"undefined\";case D.Type:return\"type\";case D.Object:return\"comptime\";default:return\"unknown\"}},getArrayName(t){const{instance:{members:[e]},length:n}=t;return`[${n}]${e.structure.name}`},getStructName(t){return\"S\"+this.structureCounters.struct++},getUnionName(t){return\"U\"+this.structureCounters.union++},getErrorUnionName(t){const{instance:{members:[e,n]}}=t;return`${n.structure.name}!${e.structure.name}`},getErrorSetName(t){return t.flags&F?\"anyerror\":\"ES\"+this.structureCounters.errorSet++},getEnumName(t){return\"EN\"+this.structureCounters.enum++},getOptionalName(t){const{instance:{members:[e]}}=t;return`?${e.structure.name}`},getPointerName(t){const{instance:{members:[n]},flags:r}=t;let s=\"*\",i=n.structure.name;if(n.structure.type===e.Slice&&(i=i.slice(3)),r&E&&(s=r&x?\"[]\":r&I?\"[*c]\":\"[*]\"),!(r&I)){const t=n.structure.constructor?.[wt];t&&(s=s.slice(0,-1)+`:${t.value}`+s.slice(-1))}return r&$&&(s=`${s}const `),s+i},getSliceName(t){const{instance:{members:[e]},flags:n}=t;return n&z?\"anyopaque\":`[_]${e.structure.name}`},getVectorName(t){const{instance:{members:[e]},length:n}=t;return`@Vector(${n}, ${e.structure.name})`},getOpaqueName(t){return\"O\"+this.structureCounters.opaque++},getArgStructName(t){const{instance:{members:e}}=t,n=e[0],r=e.slice(1),s=n.structure.name;return`Arg(fn (${r.map((t=>t.structure.name)).join(\", \")}) ${s})`},getVariadicStructName(t){const{instance:{members:e}}=t,n=e[0],r=e.slice(1),s=n.structure.name;return`Arg(fn (${r.map((t=>t.structure.name)).join(\", \")}, ...) ${s})`},getFunctionName(t){const{instance:{members:[e]}}=t;return e.structure.name.slice(4,-1)},exports:{captureView:null,castView:null,readSlot:null,writeSlot:null,beginStructure:null,attachMember:null,createTemplate:null,attachTemplate:null,defineStructure:null,endStructure:null},imports:{getFactoryThunk:null,getModuleAttributes:null}}),ze({}),ze({viewMap:null,extractView(t,n,r=Nn){const{type:s,byteSize:i,constructor:o}=t;let c;const a=n?.[Symbol.toStringTag];if(a&&(\"DataView\"===a?c=this.registerView(n):\"ArrayBuffer\"===a?c=this.obtainView(n,0,n.byteLength):(a&&a===o[Dt]?.name||\"Uint8ClampedArray\"===a&&o[Dt]===Uint8Array||\"Uint8Array\"===a&&n instanceof Buffer)&&(c=this.obtainView(n.buffer,n.byteOffset,n.byteLength))),!c){const r=n?.[at];if(r){const{constructor:o,instance:{members:[c]}}=t;if(Ee(n,o))return r;if(function(t){return t===e.Array||t===e.Vector||t===e.Slice}(s)){const{byteSize:o,structure:{constructor:a}}=c,l=Ae(n,a);if(void 0!==l){if(s===e.Slice||l*o===i)return r;throw new We(t,null,n)}}}}return c?void 0!==i&&Bn(c,t):r?.(t,n),c},assignView(t,n,r,s,i){const{byteSize:o,type:c}=r,a=o??1;if(t[at]){const s=c===e.Slice?a*t.length:a;if(n.byteLength!==s)throw new Le(r,n,t);const i={[at]:n};t.constructor[wt]?.validateData?.(i,t.length),t[Kt](i)}else{void 0!==o&&Bn(n,r);const e=n.byteLength/a,c={[at]:n};t.constructor[wt]?.validateData?.(c,e),i&&(s=!0),t[Qt](s?null:n,e,i),s&&t[Kt](c)}},findViewAt(t,e,n){let r,s=(this.viewMap??=new WeakMap).get(t);if(s)if(s instanceof DataView)if(s.byteOffset===e&&s.byteLength===n)r=s,s=null;else{const e=s,n=`${e.byteOffset}:${e.byteLength}`;s=new Map([[n,e]]),this.viewMap.set(t,s)}else r=s.get(`${e}:${n}`);return{existing:r,entry:s}},obtainView(t,e,n){const{existing:r,entry:s}=this.findViewAt(t,e,n);let i;if(r)return r;s?(i=new DataView(t,e,n),s.set(`${e}:${n}`,i)):this.viewMap.set(t,i=new DataView(t,e,n));{const r=t[ft];r&&(i[ft]={address:Se(r.address,e),len:n})}return i},registerView(t){if(!t[ft]){const{buffer:e,byteOffset:n,byteLength:r}=t,{existing:s,entry:i}=this.findViewAt(e,n,r);if(s)return s;i?i.set(`${n}:${r}`,t):this.viewMap.set(e,t)}return t},allocateMemory(t,e=0,n=null){return n?.alloc?.(t,e)??this.allocateJSMemory(t,e)},...{imports:{requireBufferFallback:null,syncExternalBuffer:null},needFallback:void 0,usingBufferFallback(){return void 0===this.needFallback&&(this.needFallback=this.requireBufferFallback?.()),this.needFallback},allocateJSMemory(t,e){const n=e>kn&&this.getBufferAddress?e:0,r=new ArrayBuffer(t+n);let s=0;if(n){const t=this.getBufferAddress(r);s=pe(t,e)-t}return this.obtainView(r,Number(s),t)}}});const kn=[\"arm64\",\"ppc64\",\"x64\",\"s390x\"].includes(process.arch)?16:8;ze({}),ze({makeReadOnly(t){Dn(t)}});const Ln=Object.getOwnPropertyDescriptors,Pn=Object.defineProperty;function Dn(t){const e=t[mt];if(e)Rn(e,[\"length\"]);else{const e=t[St];e?(Rn(e),function(t){Pn(t,\"set\",{value:In});const e=t.get;Pn(t,\"get\",{value:function(t){const n=e.call(this,t);return null===n?.[Ft]&&Dn(n),n}})}(e)):Rn(t)}}function Rn(t,e=[]){const n=Ln(t.constructor.prototype);for(const[r,s]of Object.entries(n))s.set&&!e.includes(r)&&(s.set=In,Pn(t,r,s));Pn(t,Ft,{value:t})}function Zn(){const t=this[St]??this,e=this.length;let n=0;return{next(){let r,s;if(n<e){const e=n++;r=t.get(e),s=!1}else s=!0;return{value:r,done:s}}}}function Jn(t){const e=le(t),n=this[St]??this,r=this.length;let s=0;return{next(){let t,i;if(s<r){const r=s++;t=[r,e((()=>n.get(r)))],i=!1}else i=!0;return{value:t,done:i}}}}function Gn(t){return{[Symbol.iterator]:Jn.bind(this,t),length:this.length}}function _n(t){return{[Symbol.iterator]:Hn.bind(this,t),length:this[pt].length}}function qn(t){return _n.call(this,t)[Symbol.iterator]()}function Hn(t){const e=le(t),n=this,r=this[pt];let s=0;return{next(){let t,i;if(s<r.length){const o=r[s++];t=[o,e((()=>n[o]))],i=!1}else i=!0;return{value:t,done:i}}}}function Wn(t){return{[Symbol.iterator]:Yn.bind(this,t),length:this[pt].length}}function Xn(t){return Wn.call(this,t)[Symbol.iterator]()}function Yn(t){const e=le(t),n=this,r=this[pt],s=this[Lt];let i=0;return{next(){let t,o;if(i<r.length){const c=r[i++];t=[c,e((()=>s[c].call(n)))],o=!1}else o=!0;return{value:t,done:o}}}}function Kn(){const t=this,e=this.length;let n=0;return{next(){let r,s;if(n<e){const e=n++;r=t[e],s=!1}else s=!0;return{value:r,done:s}}}}function Qn(){const t=this,e=this.length;let n=0;return{next(){let r,s;if(n<e){const e=n++;r=[e,t[e]],s=!1}else s=!0;return{value:r,done:s}}}}function tr(){return{[Symbol.iterator]:Qn.bind(this),length:this.length}}function er(){const t=this;return{next(){const e=t.next();return{value:e,done:null===e}}}}function nr(t,{get:e,set:n}){return void 0!==t?{get:function(){return e.call(this,t)},set:n?function(e,r){return n.call(this,t,e,r)}:void 0}:{get:e,set:n}}function rr(t){return(this[lt][t]??this[Xt](t)).$}function sr(t){return this[lt][t]??this[Xt](t)}function ir(t,e,n){(this[lt][t]??this[Xt](t))[te](e,n)}ze({defineArrayEntries:()=>ae(Gn),defineArrayIterator:()=>ae(Zn)}),ze({defineStructEntries:()=>ae(_n),defineStructIterator:()=>ae(qn)}),ze({defineUnionEntries:()=>ae(Wn),defineUnionIterator:()=>ae(Xn)}),ze({defineVectorEntries:()=>ae(tr),defineVectorIterator:()=>ae(Kn)}),ze({defineZigIterator:()=>ae(er)}),ze({defineMember(t,e=!0){if(!t)return{};const{type:r,structure:s}=t,i=this[`defineMember${R[r]}`].call(this,t);if(e&&s){const{type:e}=s,r=this[`transformDescriptor${n[e]}`];if(r)return r.call(this,i,t)}return i}}),ze({defineBase64(t){const e=this;return Ie({get(){return function(t){if(\"function\"==typeof Buffer&&Buffer.prototype instanceof Uint8Array)return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString(\"base64\");const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}(this.dataView)},set(n,r){if(\"string\"!=typeof n)throw new an(\"string\",n);const s=function(t){if(\"function\"==typeof Buffer&&Buffer.prototype instanceof Uint8Array){const e=Buffer.from(t,\"base64\");return new DataView(e.buffer,e.byteOffset,e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<n.byteLength;t++)n[t]=e.charCodeAt(t);return new DataView(n.buffer)}(n);e.assignView(this,s,t,!1,r)}})}}),ze({defineMemberBool(t){return this.defineMemberUsing(t,this.getAccessor)}}),ze({defineClampedArray(t){const e=this,n=Uint8ClampedArray;return Ie({get(){const t=this.typedArray;return new n(t.buffer,t.byteOffset,t.length)},set(r,s){if(r?.[Symbol.toStringTag]!==n.name)throw new an(n.name,r);const i=new DataView(r.buffer,r.byteOffset,r.byteLength);e.assignView(this,i,t,!0,s)}})}}),ze({defineDataView(t){const e=this;return Ie({get(){const t=this[at];if(e.usingBufferFallback()){const n=t.buffer[_t];void 0!==n&&e.syncExternalBuffer(t.buffer,n)}return t},set(n,r){if(\"DataView\"!==n?.[Symbol.toStringTag])throw new an(\"DataView\",n);e.assignView(this,n,t,!0,r)}})},imports:{syncExternalBuffer:null}}),ze({defineMemberFloat(t){return this.defineMemberUsing(t,this.getAccessor)}}),ze({defineMemberInt(t){let e=this.getAccessor;return this.runtimeSafety&&(e=this.addRuntimeCheck(e)),e=this.addIntConversion(e),this.defineMemberUsing(t,e)}}),ze({defineMemberLiteral(t){const{slot:e}=t;return nr(e,{get(t){return this[lt][t].string},set:In})}}),ze({defineMemberNull:t=>({get:function(){return null},set:In})}),ze({defineMemberObject:t=>nr(t.slot,{get:t.structure.flags&r?rr:sr,set:t.flags&J?In:ir})}),ze({...{defineMemberUsing(t,e){const{littleEndian:n}=this,{bitOffset:r,byteSize:s}=t,i=e.call(this,\"get\",t),o=e.call(this,\"set\",t);if(void 0!==r){const t=r>>3;return{get:function(){return i.call(this[at],t,n)},set:function(e){return o.call(this[at],t,e,n)}}}return{get:function(e){try{return i.call(this[at],e*s,n)}catch(n){throw function(t,e,n){return n instanceof RangeError&&!(n instanceof bn)&&(n=new bn(t,e)),n}(t,e,n)}},set:function(t,e){return o.call(this[at],t*s,e,n)}}}}}),ze({defineSentinel(t){const{byteSize:e,instance:{members:[n,r],template:s}}=t,{get:i}=this.defineMember(r),{get:o}=this.defineMember(n),c=i.call(s,0),a=!!(r.flags&Z),{runtimeSafety:l}=this;return ae({value:c,bytes:s[at],validateValue(e,n,r){if(a){if(l&&e===c&&n!==r-1)throw new sn(t,e,n,r);if(e!==c&&n===r-1)throw new on(t,c,r)}},validateData(n,r){if(a)if(l)for(let e=0;e<r;e++){const s=o.call(n,e);if(s===c&&e!==r-1)throw new sn(t,c,e,r);if(s!==c&&e===r-1)throw new on(t,c,r)}else if(r>0&&r*e===n[at].byteLength){if(o.call(n,r-1)!==c)throw new on(t,c,r)}},isRequired:a})},imports:{findSentinel:null}}),ze({defineString(t){const e=this,{byteSize:n}=t.instance.members[0],r=\"utf-\"+8*n;return Ie({get(){let t=fe(this.typedArray,r);const e=this.constructor[wt]?.value;return void 0!==e&&t.charCodeAt(t.length-1)===e&&(t=t.slice(0,-1)),t},set(n,s){if(\"string\"!=typeof n)throw new an(\"string\",n);const i=this.constructor[wt]?.value;void 0!==i&&n.charCodeAt(n.length-1)!==i&&(n+=String.fromCharCode(i));const o=he(n,r),c=new DataView(o.buffer);e.assignView(this,c,t,!1,s)}})}}),ze({defineValueOf:()=>({value(){return ar(this,!1)}})});const or=BigInt(Number.MAX_SAFE_INTEGER),cr=BigInt(Number.MIN_SAFE_INTEGER);function ar(t,n){const r=n?t=>{try{return t()}catch(t){return t}}:t=>t(),s=new Map,i=function(t){const o=\"function\"==typeof t?e.Struct:t?.constructor?.[dt];if(void 0===o){if(n){if(\"bigint\"==typeof t&&cr<=t&&t<=or)return Number(t);if(t instanceof Error)return{error:t.message}}return t}let c=s.get(t);if(void 0===c){let n;switch(o){case e.Struct:n=t[At](),c=t.constructor[gt]&d?[]:{};break;case e.Union:n=t[At](),c={};break;case e.Array:case e.Vector:case e.Slice:n=t[At](),c=[];break;case e.Pointer:try{c=t[\"*\"]}catch(t){c=Symbol.for(\"inaccessible\")}break;case e.Enum:c=r((()=>String(t)));break;case e.Opaque:c={};break;default:c=r((()=>t.$))}if(c=i(c),s.set(t,c),n)for(const[t,e]of n)c[t]=i(e)}return c};return i(t)}ze({defineToJSON:()=>({value(){return ar(this,!0)}})}),ze({defineMemberType(t,e){const{slot:n}=t;return nr(n,{get(t){const e=this[lt][t];return e?.constructor},set:In})}}),ze({defineTypedArray(t){const e=this,n=this.getTypedArray(t);return Ie({get(){const t=this.dataView,e=t.byteLength/n.BYTES_PER_ELEMENT;return new n(t.buffer,t.byteOffset,e)},set(r,s){if(r?.[Symbol.toStringTag]!==n.name)throw new an(n.name,r);const i=new DataView(r.buffer,r.byteOffset,r.byteLength);e.assignView(this,i,t,!0,s)}})}}),ze({defineMemberUint(t){let e=this.getAccessor;return this.runtimeSafety&&(e=this.addRuntimeCheck(e)),e=this.addIntConversion(e),this.defineMemberUsing(t,e)}}),ze({defineMemberUndefined:t=>({get:function(){},set:In})}),ze({defineMemberUnsupported(t){const e=function(){throw new Ne};return{get:e,set:e}}}),ze({defineMemberVoid(t,e){const{bitOffset:n}=t;return{get(){},set:void 0!==n?function(e){if(void 0!==e)throw new yn(t)}:function(e,n){if(void 0!==n)throw new yn(t);if(e<0||e>=this.length)throw new bn(t,e)}}}}),ze({defineStructure(t){const{type:e,byteSize:r}=t,s=this[`define${n[e]}`],i=[],o={},c={dataView:this.defineDataView(t),base64:this.defineBase64(t),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[Ft]:{value:null},[Pt]:ae(o),[xt]:ae(i),[Kt]:this.defineCopier(r)},a=t.constructor=s.call(this,t,c);for(const[t,e]of Object.entries(c)){const n=e?.set;n&&!o[t]&&(o[t]=n,i.push(t))}return ce(a.prototype,c),a},finalizeStructure(t){const{name:r,type:s,constructor:i,align:o,byteSize:c,flags:a,signature:l,static:{members:u,template:f}}=t,h=[],d={name:ae(r),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[qt]:ae(l),[Bt]:ae(this),[zt]:ae(o),[Tt]:ae(c),[dt]:ae(s),[gt]:ae(a),[pt]:ae(h),[Dt]:ae(this.getTypedArray(t)),[Symbol.iterator]:this.defineStructIterator(),[At]:this.defineStructEntries(),[pt]:ae(h)},g={[Symbol.toStringTag]:ae(r)};for(const t of u){const{name:n,slot:r}=t;if(t.structure.type===e.Function){const e=f[lt][r];d[n]=ae(e),e.name||oe(e,\"name\",ae(n));const[s,i]=/^(get|set)\\s+([\\s\\S]+)/.exec(n)?.slice(1)??[],o=\"get\"===s?0:1;if(s&&e.length===o){(d[i]??={})[s]=e}if(t.flags&_){const t=function(...t){try{return e(this,...t)}catch(t){throw\"argCount\"in t&&(t.argIndex--,t.argCount--),t}};if(ce(t,{name:ae(n),length:ae(e.length-1)}),g[n]=ae(t),s&&t.length===o){(g[i]??={})[s]=t}}}else d[n]=this.defineMember(t),h.push(n)}d[lt]=h.length>0&&ae(f[lt]);const b=this[`finalize${n[s]}`];!1!==b?.call(this,t,d,g)&&(ce(i.prototype,g),ce(i,d))},createConstructor(t,n={}){const{type:r,byteSize:s,align:i,flags:c,instance:{members:a,template:l}}=t,{onCastError:u}=n;let f;if(l?.[lt]){const t=a.filter((t=>t.flags&J));t.length>0&&(f=t.map((t=>t.slot)))}const h=new Te,d=this,g=function(n,a={}){const{allocator:b}=a,y=this instanceof g;let p,m;if(y){if(0===arguments.length)throw new ke(t);if(p=this,c&o&&(p[lt]={}),Qt in p)p[te](n,b),m=p[at];else{const t=r!==e.Pointer?b:null;p[at]=m=d.allocateMemory(s,i,t)}}else{if(re in g&&(p=g[re].call(this,n,a),!1!==p))return p;if(m=d.extractView(t,n,u),p=h.find(m))return p;p=Object.create(g.prototype),Qt in p?d.assignView(p,m,t,!1,!1):p[at]=m,c&o&&(p[lt]={})}if(f)for(const t of f)p[lt][t]=l[lt][t];return p[ee]?.(),y&&(Qt in p||p[te](n,b)),ne in p&&(p=p[ne]()),h.save(m,p)};return oe(g,Ut,ae(h)),g},createApplier(t){const{instance:{template:e}}=t;return function(n,r){const s=Object.keys(n),i=this[xt],o=this[Pt];for(const e of s)if(!(e in o))throw new Ke(t,e);let c=0,a=0,l=0,u=0;for(const t of i){const e=o[t];e.special?t in n&&u++:(c++,t in n?a++:e.required&&l++)}if(0!==l&&0===u){const e=i.filter((t=>o[t].required&&!(t in n)));throw new Ye(t,e)}if(u+a>s.length)for(const t of i)t in n&&(s.includes(t)||s.push(t));a<c&&0===u&&e&&e[at]&&this[Kt](e);for(const t of s){o[t].call(this,n[t],r)}return s.length}},getTypedArray(t){const{type:n,instance:r}=t;if(void 0!==n&&r){const[t]=r.members;switch(n){case e.Enum:case e.ErrorSet:case e.Primitive:{const{byteSize:e,type:n}=t;return globalThis[(e>4&&n!==D.Float?\"Big\":\"\")+(n===D.Float?\"Float\":n===D.Int?\"Int\":\"Uint\")+8*e+\"Array\"]}case e.Array:case e.Slice:case e.Vector:return this.getTypedArray(t.structure)}}}}),ze({defineArgStruct(t,e){const{flags:n,byteSize:r,align:c,length:a,instance:{members:l}}=t,u=this,f=l.slice(1),h=function(t,e){const s=this instanceof h;let i,l;if(s?(i=this,l=u.allocateMemory(r,c)):(i=Object.create(h.prototype),l=t),i[at]=l,n&o&&(i[lt]={}),!s)return i;{let r;if(n&k&&t.length===a+1&&(r=t.pop()),t.length!==a)throw new Qe(a,t.length);n&P&&(i[ne]=null),u.copyArguments(i,t,f,r,e)}};for(const t of l)e[t.name]=this.defineMember(t);const d=e.retval.set;return e.length=ae(f.length),e[Xt]=n&s&&this.defineVivificatorStruct(t),e[Yt]=n&i&&this.defineVisitorArgStruct(l),e[se]=ae((function(t){d.call(this,t,this[Gt])})),e[Symbol.iterator]=this.defineArgIterator?.(f),h},finalizeArgStruct(t,e){const{flags:n}=t;e[Rt]=ae(!!(n&L))}}),ze({defineFinalizerArray:({get:t,set:e})=>({value(){const n=new Proxy(this,lr);return ce(this,{[Mt]:{value:n},get:{value:t.bind(this)},set:e&&{value:e.bind(this)}}),n}}),defineVivificatorArray(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:r}=e,s=this;return{value:function(t){const{constructor:e}=r,i=this[at],o=i.byteOffset+n*t,c=s.obtainView(i.buffer,o,n);return this[lt][t]=e.call(ut,c)}}}});const lr={get(t,e){const n=\"symbol\"==typeof e?0:0|e;return 0!==n||n==e?t.get(n):e===St?t:t[e]},set(t,e,n){const r=\"symbol\"==typeof e?0:0|e;return 0!==r||r==e?t.set(r,n):t[e]=n,!0},deleteProperty(t,e){const n=\"symbol\"==typeof e?0:0|e;return 0===n&&n!=e&&(delete t[e],!0)},has(t,e){const n=\"symbol\"==typeof e?0:0|e;return 0!==n||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(`${n}`);return e.push(\"length\",Mt),e},getOwnPropertyDescriptor(t,e){const n=\"symbol\"==typeof e?0:0|e;return 0===n&&n!=e?Object.getOwnPropertyDescriptor(t,e):n>=0&&n<t.length?{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}:void 0}};ze({defineArray(t,e){const{length:n,instance:{members:[r]},flags:o}=t,c=this.createApplier(t),a=this.defineMember(r),{set:h}=a,d=this.createConstructor(t),g=function(e,r){if(Ee(e,d))this[Kt](e),o&i&&this[Yt](\"copy\",st.Vivificate,e);else if(\"string\"==typeof e&&o&l&&(e={string:e}),e?.[Symbol.iterator]){if((e=ve(e)).length!==n)throw new We(t,this,e);let s=0;for(const t of e)h.call(this,s++,t,r)}else if(e&&\"object\"==typeof e){if(0===c.call(this,e))throw new He(t,e)}else if(void 0!==e)throw new He(t,e)};return e.$={get:Oe,set:g},e.length=ae(n),e.entries=e[At]=this.defineArrayEntries(),o&u&&(e.typedArray=this.defineTypedArray(t),o&l&&(e.string=this.defineString(t)),o&f&&(e.clampedArray=this.defineClampedArray(t))),e[Symbol.iterator]=this.defineArrayIterator(),e[te]=ae(g),e[ne]=this.defineFinalizerArray(a),e[Xt]=o&s&&this.defineVivificatorArray(t),e[Yt]=o&i&&this.defineVisitorArray(),d},finalizeArray(t,e){const{flags:n,instance:{members:[r]}}=t;e.child=ae(r.structure.constructor),e[wt]=n&a&&this.defineSentinel(t)}}),ze({defineEnum(t,e){const{instance:{members:[n]}}=t,r=this.defineMember(n),{get:s,set:i}=r,{get:o}=this.defineMember(n,!1),c=this.createApplier(t),a=[\"string\",\"number\",\"tagged union\"],l=this.createConstructor(t,{onCastError(t,e){throw new qe(t,a,e)}});return e.$=r,e.toString=ae(Me),e[Symbol.toPrimitive]={value(t){switch(t){case\"string\":case\"default\":return this.$[ht];default:return o.call(this)}}},e[te]=ae((function(e){if(e&&\"object\"==typeof e){if(0===c.call(this,e))throw new qe(t,a,e)}else void 0!==e&&i.call(this,e)})),l},finalizeEnum(t,e){const{flags:n,constructor:r,instance:{members:[s]},static:{members:i,template:o}}=t,c=o[lt],{get:a,set:l}=this.defineMember(s,!1);for(const{name:t,flags:n,slot:r}of i)if(n&G){const n=c[r];oe(n,ht,ae(t));const s=a.call(n);e[t]=e[s]={value:n,writable:!1}}e[re]={value(t){if(\"string\"==typeof t||\"number\"==typeof t||\"bigint\"==typeof t){let e=r[t];return e||n&A&&\"string\"!=typeof t&&(e=new r(void 0),l.call(e,t),oe(e,ht,ae(t)),oe(r,t,ae(e))),e}return t instanceof r?t:t?.[yt]instanceof r&&t[yt]}},e[Dt]=ae(this.getTypedArray(t))},transformDescriptorEnum(t,e){const{type:n,structure:r}=e;if(n===D.Object)return t;const s=function(t){const{constructor:e}=r,n=e(t);if(!n)throw new De(r,t);return n},{get:i,set:o}=t;return{get:0===i.length?function(){const t=i.call(this);return s(t)}:function(t){const e=i.call(this,t);return s(e)},set:1===o.length?function(t){t=s(t)[Symbol.toPrimitive](),o.call(this,t)}:function(t,e){const n=s(e);o.call(this,t,n[Symbol.toPrimitive]())}}}}),ze({currentGlobalSet:void 0,currentErrorClass:void 0,defineErrorSet(t,n){const{instance:{members:[r]},flags:s}=t;if(!this.currentErrorClass){this.currentErrorClass=class extends ur{};const t={type:e.ErrorSet,name:\"anyerror\",instance:{members:[r]},static:{members:[],template:{SLOTS:{}}}};this.currentGlobalSet=this.defineStructure(t),this.finalizeStructure(t)}if(this.currentGlobalSet&&s&F)return this.currentGlobalSet;const i=this.defineMember(r),{set:o}=i,c=[\"string\",\"number\"],a=this.createApplier(t),l=this.createConstructor(t,{onCastError(t,e){throw new qe(t,c,e)}});return n.$=i,n[te]=ae((function(e){if(e instanceof l[bt])o.call(this,e);else if(e&&\"object\"==typeof e&&!$n(e)){if(0===a.call(this,e))throw new qe(t,c,e)}else void 0!==e&&o.call(this,e)})),l},finalizeErrorSet(t,e){const{constructor:n,flags:r,instance:{members:[s]},static:{members:i,template:o}}=t;if(this.currentGlobalSet&&r&F)return!1;const c=o?.[lt]??{},{get:a}=this.defineMember(s,!1);for(const{name:t,slot:n}of i){const r=c[n],s=a.call(r);let i=this.currentGlobalSet[s],o=!0;i||(i=new this.currentErrorClass(t,s),o=!1);const l=ae(i),u=String(i);e[t]=e[u]=e[s]=l,o||(ce(this.currentGlobalSet,{[s]:l,[u]:l,[t]:l}),this.currentGlobalSet[pt].push(t))}e[re]={value:t=>\"number\"==typeof t||\"string\"==typeof t?n[t]:t instanceof n[bt]?n[Number(t)]:$n(t)?n[`Error: ${t.error}`]:t instanceof Error&&void 0},e[bt]=ae(this.currentErrorClass)},transformDescriptorErrorSet(t,e){const{type:n,structure:r}=e;if(n===D.Object)return t;const s=function(t){const{constructor:e}=r,n=e(t);if(!n)throw t instanceof Error?new Ze(r):new Re(r,t);return n},{get:i,set:o}=t;return{get:0===i.length?function(){const t=i.call(this);return s(t)}:function(t){const e=i.call(this,t);return s(e)},set:1===o.length?function(t){const e=s(t);t=Number(e),o.call(this,t)}:function(t,e){const n=s(e);e=Number(n),o.call(this,t,e)}}},resetGlobalErrorSet(){this.currentErrorClass=this.currentGlobalSet=void 0}});class ur extends Error{constructor(t,e){super(function(t){let e=t.replace(/_/g,\" \");try{e=e.replace(/(\\p{Uppercase}+)(\\p{Lowercase}*)/gu,((t,e,n)=>1===e.length?` ${e.toLocaleLowerCase()}${n}`:n?t:` ${e}`)).trimStart()}catch(t){}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}(t)),this.number=e,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case\"string\":case\"default\":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}function fr(t,e){return xe(t?.constructor?.child,e)&&t[\"*\"]}function hr(t,e,n){if(n&E){if(t?.constructor?.child?.child===e.child&&t[\"*\"])return!0;if(n&I&&fr(t,e.child))return!0}return!1}function dr(t){let e=t[jt];return e||(Object.defineProperty(t,jt,{value:void 0,configurable:!0}),e=new Proxy(t,br),Object.defineProperty(t,jt,{value:e})),e}ze({defineErrorUnion(t,e){const{instance:{members:[n,r]},flags:o}=t,{get:c,set:a}=this.defineMember(n),{get:l,set:u}=this.defineMember(r),{get:f,set:h}=this.defineMember(r,!1),d=n.type===D.Void,g=r.structure.constructor,b=function(){this[Wt](),this[Yt]?.(\"clear\")},y=this.createApplier(t),p=function(e,n){if(Ee(e,S))this[Kt](e),o&i&&(f.call(this)||this[Yt](\"copy\",0,e));else if(e instanceof g[bt]&&g(e))u.call(this,e),b.call(this);else if(void 0!==e||d)try{a.call(this,e,n),h.call(this,0)}catch(n){if(e instanceof Error){const n=g[e]??g.Unexpected;if(!n)throw new Ze(t);u.call(this,n),b.call(this)}else if($n(e))u.call(this,e),b.call(this);else{if(!e||\"object\"!=typeof e)throw n;if(0===y.call(this,e))throw n}}},{bitOffset:m,byteSize:w}=n,S=this.createConstructor(t);return e.$={get:function(){if(f.call(this))throw l.call(this);return c.call(this)},set:p},e[te]=ae(p),e[Xt]=o&s&&this.defineVivificatorStruct(t),e[Wt]=this.defineResetter(m/8,w),e[Yt]=o&i&&this.defineVisitorErrorUnion(n,f),S}}),ze({defineFunction(t,n){const{instance:{members:[r],template:s},static:{template:i}}=t,o=new Te,{structure:{constructor:c}}=r,a=this,l=function(n){const r=this instanceof l;let u,f;if(r){if(0===arguments.length)throw new ke(t);if(\"function\"!=typeof n)throw new an(\"function\",n);if(c[dt]===e.VariadicStruct)throw new Ne;u=a.getFunctionThunk(n,i)}else{if(this!==Bt)throw new nn;u=n}if(f=o.find(u))return f;const h=c.prototype.length,d=r?a.createInboundCaller(n,c):a.createOutboundCaller(s,c);return ce(d,{length:ae(h),name:ae(\"\")}),Object.setPrototypeOf(d,l.prototype),d[at]=u,o.save(u,d),d};return Object.setPrototypeOf(l.prototype,Function.prototype),n.valueOf=n.toJSON=ae($e),l},finalizeFunction(t,e,n){n[Symbol.toStringTag]=void 0}}),ze({defineOpaque(t,e){const{flags:n}=t,r=()=>{throw new Sn(t)},s=this.createConstructor(t);return e.$={get:r,set:r},e[Symbol.iterator]=n&j&&this.defineZigIterator(),e[Symbol.toPrimitive]={value(e){const{name:n}=t;return`[opaque ${n}]`}},e[te]=ae((()=>{throw new vn(t)})),s}}),ze({defineOptional(t,e){const{instance:{members:[n,r]},flags:o}=t,{get:c,set:a}=this.defineMember(n),{get:l,set:u}=this.defineMember(r),f=n.type===D.Void,h=function(t,e){Ee(t,d)?(this[Kt](t),o&i&&l.call(this)&&this[Yt](\"copy\",st.Vivificate,t)):null===t?(u.call(this,0),this[Wt]?.(),this[Yt]?.(\"clear\")):(void 0!==t||f)&&(a.call(this,t,e),o&V?u.call(this,1):o&i&&(l.call(this)||u.call(this,13)))},d=t.constructor=this.createConstructor(t),{bitOffset:g,byteSize:b}=n;return e.$={get:function(){return l.call(this)?c.call(this):(this[Yt]?.(\"clear\"),null)},set:h},e[te]=ae(h),e[Wt]=o&V&&this.defineResetter(g/8,b),e[Xt]=o&s&&this.defineVivificatorStruct(t),e[Yt]=o&i&&this.defineVisitorOptional(n,l),d}}),ze({definePointer(t,n){const{flags:s,byteSize:i,instance:{members:[o]}}=t,{structure:a}=o,{type:l,flags:u,byteSize:f=1}=a,h=s&x?i/2:i,{get:d,set:g}=this.defineMember({type:D.Uint,bitOffset:0,bitSize:8*h,byteSize:h,structure:{byteSize:h}}),{get:b,set:y}=s&x?this.defineMember({type:D.Uint,bitOffset:8*h,bitSize:8*h,byteSize:h,structure:{flags:c,byteSize:h}}):{},p=function(t,n=!0,r=!0){if(n||this[at][ft]){if(!r)return this[lt][0]=void 0;{const n=C.child,r=d.call(this),i=s&x?b.call(this):l===e.Slice&&u&M?U.findSentinel(r,n[wt].bytes)+1:1;if(r!==this[$t]||i!==this[Ot]){const e=U.findMemory(t,r,i,n[Tt]),o=e?n.call(Bt,e):null;return this[lt][0]=o,this[$t]=r,this[Ot]=i,s&x&&(this[Vt]=null),o}}}return this[lt][0]},m=function(t){g.call(this,t),this[$t]=t},w=u&M?1:0,S=s&x||u&M?function(t){y?.call?.(this,t-w),this[Ot]=t}:null,v=function(){const t=this[mt]??this,e=!t[lt][0],n=p.call(t,null,e);if(!n){if(s&O)return null;throw new un}return s&$?dr(n):n},A=u&r?function(){return v.call(this).$}:v,V=s&$?In:function(t){return v.call(this).$=t},U=this,T=function(n,r){const i=a.constructor;if(fr(n,i)){if(!(s&$)&&n.constructor.const)throw new rn(t,n);n=n[lt][0]}else if(s&E)hr(n,i,s)&&(n=i(n[lt][0][at]));else if(l===e.Slice&&u&z&&n)if(n.constructor[dt]===e.Pointer)n=n[vt]?.[at];else if(n[at])n=n[at];else if(n?.buffer instanceof ArrayBuffer&&!(n instanceof Uint8Array||n instanceof DataView)){const{byteOffset:t,byteLength:e}=n;void 0!==t&&void 0!==e&&(n=new DataView(n.buffer,t,e))}if(n instanceof i){const e=n[Ft];if(e){if(!(s&$))throw new wn(t);n=e}}else if(Ee(n,i))n=i.call(Bt,n[at]);else if(s&I&&s&E&&n instanceof i.child)n=i(n[at]);else if(function(t,e){const n=t?.[Symbol.toStringTag];if(n){const r=e[Dt];if(r)switch(n){case r.name:case\"DataView\":return!0;case\"ArrayBuffer\":return r===Uint8Array||r===Int8Array;case\"Uint8ClampedArray\":return r===Uint8Array}if(e.child&&void 0!==Ae(t,e.child))return!0}return!1}(n,i)){n=i(U.extractView(a,n))}else if(null==n||n[at]){if(!(void 0===n||s&O&&null===n))throw new hn(t,n)}else{if(s&I&&s&E&&\"object\"==typeof n&&!n[Symbol.iterator]){let t=!0;const e=i.prototype[Pt];for(const r of Object.keys(n)){const n=e[r];if(n?.special){t=!1;break}}t&&(n=[n])}if(Dt in i&&n?.buffer&&n[Symbol.iterator])throw new hn(t,n);n=new i(n,{allocator:r})}const o=n?.[at]?.[ft];if(o?.address===we)throw new fn(n);this[vt]=n},C=this.createConstructor(t);return n[\"*\"]={get:A,set:V},n.$={get:Oe,set:T},n.length={get:function(){const t=v.call(this);return t?t.length:0},set:function(t){t|=0;const e=v.call(this);if(!e){if(0!==t)throw new Xe(t,0);return}if(e.length===t)return;const n=e[at],r=n[ft],i=n.buffer.byteLength-n.byteOffset;let o;if(r||(o=s&x?this[Vt]??=e.length:i/f|0),t<0||t>o)throw new Xe(t,o);const c=t*f,l=c<=i?U.obtainView(n.buffer,n.byteOffset,c):U.obtainZigView(r.address,c),u=a.constructor;this[lt][0]=u.call(Bt,l),S?.call?.(this,t)}},n.slice=l===e.Slice&&{value(t,e){const n=this[vt].slice(t,e);return new C(n)}},n.subarray=l===e.Slice&&{value(t,e,n){const r=this[vt].subarray(t,e,n);return new C(r)}},n[Symbol.toPrimitive]=l===e.Primitive&&{value(t){return this[vt][Symbol.toPrimitive](t)}},n[te]=ae(T),n[ne]={value(){const t=l!==e.Pointer?gr:{};let n;l===e.Function?(n=function(){},n[at]=this[at],n[lt]=this[lt],Object.setPrototypeOf(n,C.prototype)):n=this;const r=new Proxy(n,t);return Object.defineProperty(n,Mt,{value:r}),r}},n[vt]={get:v,set:function(t){if(void 0===t)return;const e=this[mt]??this;if(t){const n=t[at][ft];if(n){const{address:e,js:r}=n;m.call(this,e),S?.call?.(this,t.length),r&&(t[at][ft]=void 0)}else if(e[at][ft])throw new dn}else e[at][ft]&&(m.call(this,0),S?.call?.(this,0));e[lt][0]=t??null,s&x&&(e[Vt]=null)}},n[Ht]=ae(p),n[Et]={set:m},n[It]={set:S},n[Yt]=this.defineVisitor(),n[$t]=ae(0),n[Ot]=ae(0),n[Vt]=s&x&&ae(null),n.dataView=n.base64=void 0,C},finalizePointer(t,n){const{flags:r,constructor:s,instance:{members:[i]}}=t,{structure:o}=i,{type:c,constructor:a}=o;n.child=a?ae(a):{get:()=>o.constructor},n.const=ae(!!(r&$)),n[re]={value(n,i){if(this===Bt||this===ut||n instanceof s)return!1;if(fr(n,a))return new s(a(n[\"*\"]),i);if(hr(n,a,r))return new s(n);if(c===e.Slice)return new s(a(n),i);throw new en(t)}}}});const gr={get(t,e){if(e===mt)return t;if(e in t)return t[e];return t[vt][e]},set(t,e,n){if(e in t)t[e]=n;else{t[vt][e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{delete t[vt][e]}return!0},has(t,e){if(e in t)return!0;return e in t[vt]},apply:(t,e,n)=>t[\"*\"].apply(e,n)},br={get(t,e){if(e===Ft)return t;{const n=t[e];return null===n?.[Ft]?dr(n):n}},set(t,e,n){const r=t[mt];return r&&!(e in r)?t[e]=n:In(),!0}};function yr(){return this[It]}function pr(t,e){return(t|=0)<0?(t=e+t)<0&&(t=0):t>e&&(t=e),t}function mr(){throw new ln}function wr(){const t={get:mr,set:mr};ce(this[mt],{\"*\":t,$:t,[mt]:t,[vt]:t})}function Sr(t,e,n,r){let s,i=this[lt][t];if(!i){if(n&st.IgnoreUncreated)return;i=this[Xt](t)}r&&(s=r[lt][t],!s)||i[Yt](e,n,s)}ze({definePrimitive(t,e){const{instance:{members:[n]}}=t,r=this.createApplier(t),{get:s,set:i}=this.defineMember(n),o=function(e){if(Ee(e,c))this[Kt](e);else if(e&&\"object\"==typeof e){if(0===r.call(this,e)){const r=ue(n);throw new qe(t,r,e)}}else void 0!==e&&i.call(this,e)},c=this.createConstructor(t);return e.$={get:s,set:o},e[te]=ae(o),e[Symbol.toPrimitive]=ae(s),c},finalizePrimitive(t,e){const{instance:{members:[n]}}=t;e[Ct]=ae(n.bitSize),e[kt]=ae(n.type)}}),ze({defineSlice(t,e){const{align:n,flags:r,byteSize:o,name:c,instance:{members:[a]}}=t,{byteSize:l,structure:u}=a,f=this,h=function(t,e,r){t||(t=f.allocateMemory(e*l,n,r)),this[at]=t,this[It]=e},d=function(e,n){if(n!==this[It])throw new We(t,this,e)},g=this.defineMember(a),{set:b}=g,y=this.createApplier(t),p=function(e,n){if(Ee(e,w))this[at]?d.call(this,e,e.length):h.call(this,null,e.length,n),this[Kt](e),r&i&&this[Yt](\"copy\",st.Vivificate,e);else if(\"string\"==typeof e&&r&U)p.call(this,{string:e},n);else if(e?.[Symbol.iterator]){e=ve(e),this[at]?d.call(this,e,e.length):h.call(this,null,e.length,n);let t=0;for(const r of e)w[wt]?.validateValue(r,t,e.length),b.call(this,t++,r,n)}else if(\"number\"==typeof e){if(!(!this[at]&&e>=0&&isFinite(e)))throw new He(t,e,!this[at]);h.call(this,null,e,n)}else if(e&&\"object\"==typeof e){if(0===y.call(this,e,n))throw new He(t,e)}else if(void 0!==e)throw new He(t,e)},m=function(t,e){const n=this[It],r=this[at];t=void 0===t?0:pr(t,n),e=void 0===e?n:pr(e,n);const s=t*l,i=e*l-s;return f.obtainView(r.buffer,r.byteOffset+s,i)},w=this.createConstructor(t);return e.$={get:Oe,set:p},e.length={get:yr},r&T&&(e.typedArray=this.defineTypedArray(t),r&U&&(e.string=this.defineString(t)),r&C&&(e.clampedArray=this.defineClampedArray(t))),e.entries=e[At]=this.defineArrayEntries(),e.subarray={value(t,e){const n=m.call(this,t,e);return w(n)}},e.slice={value(t,e,r={}){const{zig:s=!1}=r,i=m.call(this,t,e),o=f.allocateMemory(i.byteLength,n,s),c=w(o);return c[Kt]({[at]:i}),c}},e[Symbol.iterator]=this.defineArrayIterator(),e[Qt]=ae(h),e[Kt]=this.defineCopier(o,!0),e[te]=ae(p),e[ne]=this.defineFinalizerArray(g),e[Xt]=r&s&&this.defineVivificatorArray(t),e[Yt]=r&i&&this.defineVisitorArray(),w},finalizeSlice(t,e){const{flags:n,instance:{members:[r]}}=t;e.child=ae(r.structure.constructor),e[wt]=n&M&&this.defineSentinel(t)}}),ze({defineVivificatorStruct(t){const{instance:{members:e}}=t,n={};for(const t of e.filter((t=>t.type===D.Object)))n[t.slot]=t;const r=this;return{value(t){const e=n[t],{bitOffset:s,byteSize:i,structure:{constructor:o}}=e,c=this[at],a=c.byteOffset+(s>>3);let l=i;if(void 0===l){if(7&s)throw new pn(e);l=e.bitSize>>3}const u=r.obtainView(c.buffer,a,l);return this[lt][t]=o.call(ut,u)}}}}),ze({defineStruct(t,e){const{flags:n,length:r,instance:{members:o}}=t,c=o.find((t=>t.flags&q)),a=c&&this.defineMember(c),l=this.createApplier(t),u=function(e,r){if(Ee(e,f))this[Kt](e),n&i&&this[Yt](\"copy\",0,e);else if(e&&\"object\"==typeof e)l.call(this,e,r);else if(\"number\"!=typeof e&&\"bigint\"!=typeof e||!a){if(void 0!==e)throw new qe(t,\"object\",e)}else a.set.call(this,e)},f=this.createConstructor(t),b=e[Pt].value,y=e[xt].value,p=[];for(const t of o.filter((t=>!!t.name))){const{name:n,flags:r}=t,{set:s}=e[n]=this.defineMember(t);s&&(r&Z&&(s.required=!0),b[n]=s,y.push(n)),p.push(n)}return e.$={get:$e,set:u},e.length=ae(r),e.entries=n&d&&this.defineVectorEntries(),e[Symbol.toPrimitive]=a&&{value(t){return\"string\"===t?Object.prototype.toString.call(this):a.get.call(this)}},e[Symbol.iterator]=n&h?this.defineZigIterator():n&d?this.defineVectorIterator():this.defineStructIterator(),e[te]=ae(u),e[Xt]=n&s&&this.defineVivificatorStruct(t),e[Yt]=n&i&&this.defineVisitorStruct(o),e[At]=n&d?this.defineVectorEntries():this.defineStructEntries(),e[pt]=ae(p),n&g&&(e.alloc=this.defineAlloc(),e.free=this.defineFree(),e.dupe=this.defineDupe()),f}}),ze({defineUnion(t,e){const{flags:n,instance:{members:r}}=t,o=!!(n&m),c=o?r.slice(0,-1):r,a=o?r[r.length-1]:null,{get:l,set:u}=this.defineMember(a),{get:f}=this.defineMember(a,!1),h=n&w?function(){return l.call(this)[ht]}:function(){const t=l.call(this);return c[t].name},d=n&w?function(t){const{constructor:e}=a.structure;u.call(this,e[t])}:function(t){const e=c.findIndex((e=>e.name===t));u.call(this,e)},g=this.createApplier(t),b=function(e,r){if(Ee(e,y))this[Kt](e),n&i&&this[Yt](\"copy\",st.Vivificate,e);else if(e&&\"object\"==typeof e){let n=0;for(const t of x)t in e&&n++;if(n>1)throw new Je(t);if(0===g.call(this,e,r))throw new _e(t,e,o)}else if(void 0!==e)throw new qe(t,\"object with a single property\",e)},y=this.createConstructor(t),p={},A=e[Pt].value,V=e[xt].value,x=[];for(const r of c){const{name:s}=r,{get:i,set:c}=this.defineMember(r),a=o?function(){const e=h.call(this);if(s!==e){if(n&w)return null;throw new Ge(t,s,e)}return this[Yt]?.(\"clear\"),i.call(this)}:i,l=o&&c?function(e){const n=h.call(this);if(s!==n)throw new Ge(t,s,n);c.call(this,e)}:c,u=o&&c?function(t){d.call(this,s),c.call(this,t),this[Yt]?.(\"clear\")}:c;e[s]={get:a,set:l},A[s]=u,p[s]=i,V.push(s),x.push(s)}e.$={get:function(){return this},set:b},e[Symbol.iterator]=n&v?this.defineZigIterator():this.defineUnionIterator(),e[Symbol.toPrimitive]=n&w&&{value(t){switch(t){case\"string\":case\"default\":return h.call(this);default:return f.call(this)}}};const{comptime:E}=this;return e[ee]=n&S&&{value(){return E||this[Yt](wr),this[Yt]=Ue,this}},e[te]=ae(b),e[yt]=n&w&&{get:l,set:u},e[Xt]=n&s&&this.defineVivificatorStruct(t),e[Yt]=n&i&&this.defineVisitorUnion(c,n&w?f:null),e[At]=this.defineUnionEntries(),e[pt]=n&w?{get(){return[h.call(this)]}}:ae(x),e[Lt]=ae(p),y},finalizeUnion(t,e){const{flags:n,instance:{members:r}}=t;n&w&&(e.tag=ae(r[r.length-1].structure.constructor))}}),ze({defineVariadicStruct(t,e){const{byteSize:n,align:r,flags:i,length:o,instance:{members:c}}=t,a=this,l=c.slice(1);for(const t of c)e[t.name]=this.defineMember(t);const u=e.retval.set,f=function(t){this[at]=a.allocateMemory(8*t,4),this.length=t,this.littleEndian=a.littleEndian};return ce(f,{[zt]:{value:4}}),ce(f.prototype,{set:ae((function(t,e,n,r,s){const i=this[at],o=a.littleEndian;i.setUint16(8*t,e,o),i.setUint16(8*t+2,n,o),i.setUint16(8*t+4,r,o),i.setUint8(8*t+6,s==D.Float),i.setUint8(8*t+7,s==D.Int||s==D.Float)}))}),e[Xt]=i&s&&this.defineVivificatorStruct(t),e[Yt]=this.defineVisitorVariadicStruct(c),e[se]=ae((function(t){u.call(this,t,this[ALLOCATOR])})),function(t){if(t.length<o)throw new Qe(o,t.length,!0);let e=n,s=r;const i=t.slice(o),c={};for(const[n,r]of i.entries()){const i=r?.[at],a=r?.constructor?.[zt];if(!i||!a){const e=new An;throw En.call(e,o+n,t.length)}a>s&&(s=a);e=(c[n]=e+(a-1)&~(a-1))+i.byteLength}const u=new f(t.length),h=a.allocateMemory(e,s);h[zt]=s,this[at]=h,this[lt]={},a.copyArguments(this,t,l);let d=-1;for(const[t,{bitOffset:e,bitSize:n,type:r,slot:s,structure:{align:i}}]of l.entries())u.set(t,e/8,n,i,r),s>d&&(d=s);for(const[t,e]of i.entries()){const n=d+t+1,{byteLength:r}=e[at],s=c[t],i=a.obtainView(h.buffer,s,r),l=this[lt][n]=e.constructor.call(ut,i),f=e.constructor[Ct]??8*r,g=e.constructor[zt],b=e.constructor[kt];l.$=e,u.set(o+t,s,f,g,b)}this[Nt]=u}},finalizeVariadicStruct(t,e){const{flags:n}=t;e[Rt]=ae(!!(n&L)),e[zt]=ae(void 0)}}),ze({defineVector(t,e){const{flags:n,length:r,instance:{members:[o]}}=t,c=this.createApplier(t),a=function(e){if(Ee(e,l))this[Kt](e),n&i&&this[Yt](\"copy\",st.Vivificate,e);else if(e?.[Symbol.iterator]){let n=e.length;if(\"number\"!=typeof n&&(n=(e=[...e]).length),n!==r)throw new We(t,this,e);let s=0;for(const t of e)this[s++]=t}else if(e&&\"object\"==typeof e){if(0===c.call(this,e))throw new He(t,e)}else if(void 0!==e)throw new He(t,e)},l=this.createConstructor(t,{initializer:a}),{bitSize:u}=o;for(let t=0,s=0;t<r;t++,s+=u)e[t]=n&i?this.defineMember({...o,slot:t}):this.defineMember({...o,bitOffset:s});return e.$={get:$e,set:a},e.length=ae(r),n&B&&(e.typedArray=this.defineTypedArray(t),n&N&&(e.clampedArray=this.defineClampedArray(t))),e.entries=e[At]=this.defineVectorEntries(),e[Symbol.iterator]=this.defineVectorIterator(),e[te]=ae(a),e[Xt]=n&s&&this.defineVivificatorArray(t),e[Yt]=n&i&&this.defineVisitorArray(),l},finalizeVector(t,e){const{instance:{members:[n]}}=t;e.child=ae(n.structure.constructor)}}),ze({defineVisitor:()=>({value(t,e,n){let r;r=\"string\"==typeof t?vr[t]:t,r.call(this,e,n)}})});const vr={copy(t,e){const n=e[lt][0];if(this[at][ft]&&n&&!n[at][ft])throw new dn;this[lt][0]=n},clear(t){t&st.IsInactive&&(this[lt][0]=void 0)},reset(){this[lt][0]=void 0,this[$t]=void 0}};return ze({defineVisitorArgStruct(t){const e=[];let n;for(const[r,{slot:s,structure:o}]of t.entries())o.flags&i&&(0===r?n=s:e.push(s));return{value(t,r,s){if(!(r&st.IgnoreArguments)&&e.length>0)for(const n of e)Sr.call(this,n,t,r|st.IsImmutable,s);r&st.IgnoreRetval||void 0===n||Sr.call(this,n,t,r,s)}}}}),ze({defineVisitorArray:()=>({value(t,e,n){for(let r=0,s=this.length;r<s;r++)Sr.call(this,r,t,e,n)}})}),ze({defineVisitorErrorUnion(t,e){const{slot:n}=t;return{value(t,r,s){e.call(this)&&(r|=st.IsInactive),r&st.IsInactive&&r&st.IgnoreInactive||Sr.call(this,n,t,r,s)}}}}),ze({defineVisitorOptional(t,e){const{slot:n}=t;return{value(t,r,s){e.call(this)||(r|=st.IsInactive),r&st.IsInactive&&r&st.IgnoreInactive||Sr.call(this,n,t,r,s)}}}}),ze({defineVisitorStruct(t){const e=t.filter((t=>t.structure?.flags&i)).map((t=>t.slot));return{value(t,n,r){for(const s of e)Sr.call(this,s,t,n,r)}}}}),ze({defineVisitorUnion(t,e){const n=[];for(const[e,{slot:r,structure:s}]of t.entries())s?.flags&i&&n.push({index:e,slot:r});return{value(t,r,s){const i=e?.call(this);for(const{index:e,slot:o}of n){let n=r;e!==i&&(n|=st.IsInactive),n&st.IsInactive&&n&st.IgnoreInactive||Sr.call(this,o,t,n,s)}}}}}),ze({defineVisitorVariadicStruct(t){const e=t[0],n=e.structure.flags&i?e.slot:void 0;return{value(t,e,r){if(!(e&st.IgnoreArguments))for(const[s,i]of Object.entries(this[lt]))s!==n&&Yt in i&&Sr.call(this,s,t,e|st.IsImmutable,r);e&st.IgnoreRetval||void 0===n||Sr.call(this,n,t,e,r)}}}}),t.createEnvironment=function(){return new(Fe())},t}({}))"
