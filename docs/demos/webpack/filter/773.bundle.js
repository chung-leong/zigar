"use strict";(self.webpackChunkfilter=self.webpackChunkfilter||[]).push([[773],{773:(t,e,n)=>{n.d(e,{Dj:()=>rr,Ig:()=>ir,MO:()=>gr,N7:()=>lr,Nq:()=>Qn,TJ:()=>er,Tj:()=>or,aX:()=>me,dj:()=>pe,h_:()=>tr,nu:()=>cr,pc:()=>ie,s4:()=>be,wL:()=>ge,yI:()=>de,yZ:()=>ar,z3:()=>sr,z7:()=>nr});const r={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11,Unsupported:12},i={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,VariadicStruct:6,ExternUnion:7,BareUnion:8,TaggedUnion:9,ErrorUnion:10,ErrorSet:11,Enum:12,Optional:13,SinglePointer:14,SlicePointer:15,MultiPointer:16,CPointer:17,Slice:18,Vector:19,Opaque:20,Function:21};function s(t){const{type:e,bitSize:n,byteSize:i}=t;return e===r.Int?`${n<=32?"":"Big"}Int${n}`:e===r.Uint?`${n<=32?"":"Big"}Uint${n}`:e===r.Float?`Float${n}`:e===r.Bool?"Bool"+(void 0!==i?8*i:1):e===r.Void?"Null":void 0}function o({type:t,bitSize:e}){return t===r.Int||t===r.Uint?e<=32?Number:BigInt:t===r.Float?Number:t===r.Bool?Boolean:void 0}function c(t){const e=o(t);if(e)return typeof e(0)}function a(t){switch(t){case i.SinglePointer:case i.SlicePointer:case i.MultiPointer:case i.CPointer:return!0;default:return!1}}function l({bitOffset:t,bitSize:e,byteSize:n}){return!(void 0===n&&(7&t||7&e)&&0!==e)}function u(t){return"object"==typeof t&&"string"==typeof t.error&&1===Object.keys(t).length}class f extends ReferenceError{constructor(t){super(`Invalid memory deallocation: @${t.toString(16)}`)}}TypeError;class h extends TypeError{constructor(t){const{name:e}=t;super(`An initializer must be provided to the constructor of ${e}, even when the intended value is undefined`)}}class y extends TypeError{constructor(t,e,n=null){const{name:r,type:s,byteSize:o}=t,c=e.byteLength,a=1!==o?"s":"";let l;l=s!==i.Slice||n?`${r} has ${s===i.Slice?n.length*o:o} byte${a}, received ${c}`:`${r} has elements that are ${o} byte${a} in length, received ${c}`,super(l)}}class d extends TypeError{constructor(t){const{type:e,byteSize:n,typedArray:r}=t,s=1!==n?"s":"",o=["ArrayBuffer","DataView"].map(q);let c;r&&o.push(q(r.name)),c=e===i.Slice?`Expecting ${H(o)} that can accommodate items ${n} byte${s} in length`:`Expecting ${H(o)} that is ${n} byte${s} in length`,super(c)}}class b extends TypeError{constructor(t,e){const{name:n}=t;let r;r="number"==typeof e||"bigint"==typeof e?`Value given does not correspond to an item of enum ${n}: ${e}`:`Enum item of the type ${n} expected, received ${e}`,super(r)}}class p extends TypeError{constructor(t,e){const{name:n}=t,r=typeof e;let i;"string"===r||"number"===r||u(e)?(u(e)&&(e=`{ error: ${JSON.stringify(e.error)} }`),i=`Error ${r} does not corresponds to any error in error set ${n}: ${e}`):i=`Error of the type ${n} expected, received ${e}`,super(i)}}class g extends TypeError{constructor(t){const{name:e}=t;super(`Error given is not a part of error set ${e}`)}}TypeError,TypeError,TypeError;class m extends TypeError{constructor(t,e,n){const{name:r}=t,i=[];if(Array.isArray(e))for(const t of e)i.push(q(t));else i.push(q(e));const s=J(n);super(`${r} expects ${H(i)} as argument, received ${s}`)}}class v extends m{constructor(t,e,n=!1){const{instance:{members:[r]},type:s,typedArray:o}=t,a=[],l=c(r);if(l){let t;switch(r.structure?.type){case i.Enum:t="enum item";break;case i.ErrorSet:t="error";break;default:t=l}a.push(`array of ${t}s`)}else a.push("array of objects");o&&a.push(o.name),s===i.Slice&&n&&a.push("length"),super(t,a.join(" or "),e)}}class w extends TypeError{constructor(t,e,n){const{name:r,length:i,instance:{members:[s]}}=t,{structure:{constructor:o}}=s,{length:c,constructor:a}=n,l=e?.length??i,u=1!==l?"s":"";let f;f=a===o?"only a single one":a.child===o?`a slice/array that has ${c}`:`${c} initializer${c>1?"s":""}`,super(`${r} has ${l} element${u}, received ${f}`)}}class S extends TypeError{constructor(t,e){super(t<0?"Length of slice cannot be negative":`Length of slice can be ${e} or less, received ${t}`)}}class x extends TypeError{constructor(t,e){const{name:n}=t;super(`Missing initializers for ${n}: ${e.join(", ")}`)}}class A extends TypeError{constructor(t,e){const{name:n,instance:{members:r}}=t;let i;i=r.find((t=>t.name===e))?`Comptime value cannot be changed: ${e}`:`${n} does not have a property with that name: ${e}`,super(i)}}class T extends Error{constructor(t,e,n){super(`${t}() expects ${e} argument${1!==e?"s":""}, received ${n}`)}}class O extends TypeError{constructor(t){super("Non-slice pointers can only be created with the help of the new operator")}}class I extends TypeError{constructor(t,e){const{name:n}=t,{constructor:{name:r}}=e;super(`Conversion of ${r} to ${n} requires an explicit cast`)}}class $ extends TypeError{constructor(t,e,n,r){const{name:i}=t;super(`${i} expects the sentinel value ${e} at ${r-1}, found at ${n}`)}}class V extends TypeError{constructor(t,e,n){const{name:r}=t;super(`${r} expects the sentinel value ${e} at ${n-1}`)}}class E extends TypeError{constructor(t,e){super(`Unable to simultaneously align memory to ${e}-byte and ${t}-byte boundary`)}}class P extends TypeError{constructor(t,e){const n=J(e);super(`Expected ${q(t)}, received ${n}`)}}TypeError;class M extends TypeError{constructor(){super("Null pointer")}}class j extends TypeError{constructor(t,e){const{name:n}=t;let r;if(null!=e){const t=typeof e,n="object"===t&&e.constructor!==Object?`${e.constructor.name} object`:t;r=`${G(n)} ${n}`}else r=e+"";super(`${n} cannot point to ${r}`)}}class z extends TypeError{constructor(t,e){super("Pointers in fixed memory cannot point to garbage-collected object")}}class _ extends TypeError{constructor(t,e){super(`${s(t)} cannot represent the value given: ${e}`)}}class k extends RangeError{constructor(t,e){const{name:n}=t;super(`Index exceeds the size of ${n??"array"}: ${e}`)}}TypeError;class U extends TypeError{constructor(t){const{name:e,structure:{name:{struct:n}}}=t;super(`Unable to create ${n} as it is not situated on a byte boundary: ${e}`)}}class F extends TypeError{constructor(){super("Unable to modify read-only object")}}class C extends TypeError{constructor(t){const{name:e}=t;super(`${e} cannot point to a read-only object`)}}TypeError,TypeError,TypeError;class L extends Error{constructor(t){super(W(t))}}class B extends L{constructor(t){super("Program exited"),this.code=t}}function D(t,e,n,r){const i=(0!==e?"..., ":"")+`args[${e}]`+(e!==n-1?", ...":""),s=Object.create(r.constructor.prototype);return s.message=`${t}(${i}): ${r.message}`,s.stack=r.stack,s}function N(t,e,n){return n instanceof RangeError&&!(n instanceof k)&&(n=new k(t,e)),n}function R(){throw new F}function W(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,((t,e,n)=>1===e.length?` ${e.toLocaleLowerCase()}${n}`:n?t:` ${e}`)).trimStart()}catch(t){}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function J(t){const e=typeof t;let n;return n="object"===e?t?Object.prototype.toString.call(t):"null":e,q(n)}function q(t){return`${G(t)} ${t}`}function G(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function H(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}const X=Symbol("memory"),Z=Symbol("slots"),K=Symbol("parent"),Y=Symbol("fixed"),Q=Symbol("name"),tt=Symbol("type"),et=Symbol("tuple"),nt=Symbol("class"),rt=Symbol("tag"),it=Symbol("props"),st=Symbol("getter"),ot=Symbol("setter"),ct=Symbol("elementGetter"),at=Symbol("elementSetter"),lt=Symbol("targetGetter"),ut=Symbol("targetSetter"),ft=Symbol("entriesGetter"),ht=Symbol("addressSetter"),yt=Symbol("lengthSetter"),dt=Symbol("targetUpdater"),bt=Symbol("maxLength"),pt=(Symbol("propGetters"),Symbol("propSetters")),gt=Symbol("memoryRestorer"),mt=Symbol("writeDisabler"),vt=Symbol("allKeys"),wt=Symbol("address"),St=Symbol("length"),xt=Symbol("proxy"),At=Symbol("compat"),Tt=Symbol("cache"),Ot=Symbol("size"),It=Symbol("bitSize"),$t=Symbol("align"),Vt=Symbol("array"),Et=Symbol("pointer"),Pt=Symbol("constTarget"),Mt=Symbol("constProxy"),jt=Symbol("copier"),zt=Symbol("resetter"),_t=Symbol("vivificator"),kt=Symbol("pointerVisitor"),Ut=Symbol("environment"),Ft=Symbol("attributes"),Ct=Symbol("more"),Lt=Symbol("primitive");function Bt(t){return function(){const e=this[X];this[X]=null,this[Z]&&(this[Z]={}),t.releaseFixedView(e)}}function Dt(t,e,n){if(t+e<=8){const r=2**e-1;if(n)return function(e,n,i){const s=n.getUint8(i)>>t&r;e.setUint8(0,s)};{const e=255^r<<t;return function(n,i,s){const o=i.getUint8(0),c=n.getUint8(s)&e|(o&r)<<t;n.setUint8(s,c)}}}{const r=8-t,i=2**r-1;if(n){const n=2**(e%8)-1;return function(s,o,c){let a,l=c,u=0,f=o.getUint8(l++),h=f>>t&i,y=r,d=e;do{d>y&&(f=o.getUint8(l++),h|=f<<y),a=d>=8?255&h:h&n,s.setUint8(u++,a),h>>=8,d-=8}while(d>0)}}{const n=2**((e-r)%8)-1,s=255^i<<t,o=255^n;return function(r,i,c){let a,l,u=0,f=c,h=r.getUint8(f),y=h&s,d=t,b=e+d;do{b>d&&(a=i.getUint8(u++),y|=a<<d,d+=8),b>=8?l=255&y:(h=r.getUint8(f),l=h&o|y&n),r.setUint8(f++,l),y>>=8,d-=8,b-=8}while(b>0)}}}}function Nt(t,e=!1){const n=Rt(t,e);return function(t){this[gt]?.(),t[gt]?.();const e=t[X],r=this[X];n(r,e)}}function Rt(t,e=!1){if(void 0!==t){if(!e){const e=Jt[t];if(e)return e}return 7&t?3&t?1&t?qt:Gt:Ht:Xt}return Wt}function Wt(t,e){Rt(t.byteLength)(t,e)}const Jt={1:function(t,e){t.setInt8(0,e.getInt8(0))},2:function(t,e){t.setInt16(0,e.getInt16(0,!0),!0)},4:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0)},8:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)},16:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)},32:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}};function qt(t,e){for(let n=0,r=t.byteLength;n<r;n++)t.setInt8(n,e.getInt8(n))}function Gt(t,e){for(let n=0,r=t.byteLength;n<r;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function Ht(t,e){for(let n=0,r=t.byteLength;n<r;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function Xt(t,e){for(let n=0,r=t.byteLength;n<r;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function Zt(t,e){const n=function(t){const e=Kt[t];return e||(7&t?3&t?1&t?Yt:Qt:te:ee)}(e);return function(){this[gt]?.();const r=this[X];n(r,t,e)}}const Kt={1:function(t,e){t.setInt8(e,0)},2:function(t,e){t.setInt16(e,0,!0)},4:function(t,e){t.setInt32(e,0,!0)},8:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)},16:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)},32:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}};function Yt(t,e,n){for(let r=e,i=e+n;r<i;r++)t.setInt8(r,0)}function Qt(t,e,n){for(let r=e,i=e+n;r<i;r+=2)t.setInt16(r,0,!0)}function te(t,e,n){for(let r=e,i=e+n;r<i;r+=4)t.setInt32(r,0,!0)}function ee(t,e,n){for(let r=e,i=e+n;r<i;r+=8)t.setInt32(r,0,!0),t.setInt32(r+4,0,!0)}function ne(t,e){return function(t,e,n){const{type:i,bitOffset:c,bitSize:a,structure:u}=e,f=7&c,h=s(e),y=l(e)?"":`Bit${f}`,d=i===r.Int||i===r.Uint;let b=`${t}${h}${y}`,p=!1,g=b;if(d&&64===a){const t=u?.name;"usize"!==t&&"isize"!==t||(b+="Size",p=!0)}let m=he[b];if(!m){if(d&&"set"===t){const t=o(e),r=n(g);m=function(e,n,i){r.call(this,e,t(n),i)}}else if(p&&"get"===t){const t=n(g),e=BigInt(Number.MIN_SAFE_INTEGER),r=BigInt(Number.MAX_SAFE_INTEGER);m=function(n,i){const s=t.call(this,n,i);return e<=s&&s<=r?Number(s):s}}else m=n(b);m&&m.name!==b&&Object.defineProperty(m,"name",{value:b,configurable:!0,writable:!1}),he[b]=m}return m}(t,e,(n=>DataView.prototype[n]?DataView.prototype[n]:function(t,e){return(0,re[e.type])(t,e)}(t,e)))}const re={};function ie(){re[r.Uint]=se}function se(t,e){return l(e)?function(t,e){const{bitSize:n,byteSize:r}=e;if(n<64){const i=s({...e,bitSize:8*r}),o=DataView.prototype[`get${i}`],c=DataView.prototype[`set${i}`],a=n<=32?2**n-1:2n**BigInt(n)-1n;return"get"===t?function(t,e){return o.call(this,t,e)&a}:function(t,e,n){const r=e&a;c.call(this,t,r,n)}}{const{get:e,set:r}=function(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,r=Math.ceil(t/64);return{get:function(t,n){let i=0n;if(n)for(let s=0,o=t+8*(r-1);s<r;s++,o-=8)i=i<<64n|e.call(this,o,n);else for(let s=0,o=t;s<r;s++,o+=8)i=i<<64n|e.call(this,o,n);return i},set:function(e,i,s){let o=i;const c=0xFFFFFFFFFFFFFFFFn;if(s)for(let t=0,i=e;t<r;t++,i+=8){const t=o&c;n.call(this,i,t,s),o>>=64n}else{o<<=BigInt(64*r-t);for(let t=0,i=e+8*(r-1);t<r;t++,i-=8){const t=o&c;n.call(this,i,t,s),o>>=64n}}return o}}}(n),i=2n**BigInt(n)-1n;return"get"===t?function(t,n){return e.call(this,t,n)&i}:function(t,e,n){const s=e&i;r.call(this,t,s,n)}}}(t,e):function(t,e){const{bitSize:n,bitOffset:r}=e,i=7&r;if(i+n<=8){const e=DataView.prototype.setUint8,r=DataView.prototype.getUint8,s=2**n-1;if("get"===t)return function(t){return r.call(this,t)>>>i&s};{const t=255^s<<i;return function(n,o){const c=r.call(this,n)&t|(o&s)<<i;e.call(this,n,c)}}}return function(t,e){const{bitSize:n,bitOffset:r}=e,i=7&r,s=[1,2,4,8].find((t=>8*t>=n))??64*Math.ceil(n/64),o=new DataView(new ArrayBuffer(s));if("get"===t){const t=ne("get",{...e,byteSize:s}),r=Dt(i,n,!0);return function(e,n){return r(o,this,e),t.call(o,0,n)}}{const t=ne("set",{...e,byteSize:s}),r=Dt(i,n,!1);return function(e,n,i){t.call(o,0,n,i),r(this,o,e)}}}(t,e)}(t,e)}function oe(t,e,n){const{type:r,byteSize:s,typedArray:o}=t;let c;const a=e?.[Symbol.toStringTag];if("DataView"===a)c=n.registerView(e);else if("ArrayBuffer"===a||"SharedArrayBuffer"===a)c=n.obtainView(e,0,e.byteLength);else if(o&&a===o.name||"Uint8ClampedArray"===a&&o===Uint8Array)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if("Uint8Array"===a&&"function"==typeof Buffer&&e instanceof Buffer)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const n=e?.[X];if(n){const{constructor:o,instance:{members:[c]}}=t;if(e instanceof o)return n;if(function(t){return t===i.Array||t===i.Vector||t===i.Slice}(r)){const{byteSize:o,structure:{constructor:a}}=c,l=le(e,a);if(void 0!==l){if(r===i.Slice||l*o===s)return n;throw new w(t,null,e)}}}}return c&&void 0!==s&&ce(c,t),c}function ce(t,e){const{byteSize:n,type:r}=e;if(!(r===i.Slice?t.byteLength%n==0:t.byteLength===n))throw new y(e,t)}function ae(t,e,n,r,s){const{byteSize:o,type:c,sentinel:a}=e,l=o??1;if(this[X]){const n=c===i.Slice?l*this.length:l;if(t.byteLength!==n)throw new y(e,t,this);const r={[X]:t};a?.validateData(r,this.length),this[jt](r)}else{const{shapeDefiner:i}=s;void 0!==o&&ce(t,e);const c=t.byteLength/l,u={[X]:t};a?.validateData(u,c),r&&(n=!0),i.call(this,n?null:t,c,r),n&&this[jt](u)}}function le(t,e){const{constructor:n}=t;return n===e?1:n.child===e?t.length:void 0}function ue(t){const{type:e,byteSize:n}=t;if(e===r.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===r.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===r.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===r.Object)return t.structure.typedArray;return null}function fe(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),e!==Uint8Array&&e!==Int8Array||(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),e===Uint8Array&&n.push("Uint8ClampedArray"))),n}const he={};const ye={};function de(){ye[r.Uint]=Se}function be(){ye[r.Float]=xe}function pe(){ye[r.Object]=Pe}function ge(){ye[r.Type]=je}function me(){ye[r.Comptime]=ze}const ve={};function we(t,e){return(0,ye[t.type])(t,e)}function Se(t,e){return function(t,e){const{structure:n}=e,r=ve[n?.type];return r?r(t,n):t}(_e(t,e,function(t,e){return function(n,i){const{runtimeSafety:s=!0}=t,o=e(n,i);if(s&&"set"===n){const{min:t,max:e}=function(t){const{type:e,bitSize:n}=t,i=e===r.Int;let s=i?n-1:n;return n<=32?{min:i?-(2**s):0,max:2**s-1}:(s=BigInt(s),{min:i?-(2n**s):0n,max:2n**s-1n})}(i);return function(n,r,s){if(r<t||r>e)throw new _(i,r);o.call(this,n,r,s)}}return o}}(e,ne)),t)}function xe(t,e){return _e(t,e,ne)}function Ae(t,e){const n=function(t){const{constructor:n}=e,r=n(t);if(!r)throw new b(e,t);return r};return{get:0===t.get.length?function(e){const r=t.get.call(this);return"number"===e?r:n(r)}:function(e){const r=t.get.call(this,e);return n(r)},set:1===t.set.length?function(e,r){"number"!==r&&(e=n(e)[Symbol.toPrimitive]()),t.set.call(this,e)}:function(e,r){const i=n(r);t.set.call(this,e,i[Symbol.toPrimitive]())}}}function Te(t,e){const n=function(t){const{constructor:n}=e,r=n(t);if(!r)throw t instanceof Error?new g(e):new p(e,t);return r};return{get:0===t.get.length?function(e){const r=t.get.call(this);return"number"===e?r:n(r)}:function(e){const r=t.get.call(this,e);return n(r)},set:1===t.set.length?function(e,r){if("number"!==r){const t=n(e);e=Number(t)}t.set.call(this,e)}:function(e,r){const i=n(r);r=Number(i),t.set.call(this,e,r)}}}function Oe(t){switch(t?.type){case i.Primitive:case i.ErrorUnion:case i.Optional:case i.Enum:case i.ErrorSet:return!0;default:return!1}}function Ie(t){return(this[Z][t]??this[_t](t))[st]()}function $e(t){return this[Z][t]??this[_t](t)}function Ve(t,e){(this[Z][t]??this[_t](t))[ot](e)}function Ee(t,{get:e,set:n}){return void 0!==t?{get:function(){return e.call(this,t)},set:n?function(e){return n.call(this,t,e)}:void 0}:{get:e,set:n}}function Pe(t,e){const{structure:n,slot:r}=t;return Ee(r,{get:Oe(n)?Ie:$e,set:Ve})}function Me(t){const e=this[Z][t];return e?.constructor}function je(t,e){const{slot:n}=t;return Ee(n,{get:Me})}function ze(t,e){const{slot:n,structure:r}=t;return Ee(n,{get:Oe(r)?Ie:$e})}function _e(t,e,n){const{littleEndian:r=!0}=e,{bitOffset:i,byteSize:s}=t,o=n("get",t),c=n("set",t);if(void 0!==i){const t=i>>3;return{get:function(){try{return o.call(this[X],t,r)}catch(e){if(e instanceof TypeError&&this[gt]())return o.call(this[X],t,r);throw e}},set:function(e){try{return c.call(this[X],t,e,r)}catch(n){if(n instanceof TypeError&&this[gt]())return c.call(this[X],t,e,r);throw n}}}}return{get:function(e){try{return o.call(this[X],e*s,r)}catch(n){if(n instanceof TypeError&&this[gt]())return o.call(this[X],e*s,r);throw N(t,e,n)}},set:function(e,n){try{return c.call(this[X],e*s,n,r)}catch(i){if(i instanceof TypeError&&this[gt]())return c.call(this[X],e*s,n,r);throw N(t,e,i)}}}}function ke(t,e,n){if(n){const{set:r,get:i,value:s,enumerable:o,configurable:c=!0,writable:a=!0}=n;Object.defineProperty(t,e,i?{get:i,set:r,configurable:c,enumerable:o}:{value:s,configurable:c,enumerable:o,writable:a})}}function Ue(t,e){for(const[n,r]of Object.entries(e))ke(t,n,r);for(const n of Object.getOwnPropertySymbols(e))ke(t,n,e[n])}function Fe(t,e,n,r){const i={};for(const[t,n]of Object.entries(e))n?.set&&"$"!==t&&(i[t]=n.set);const{get:s,set:o}=e.$;return Ue(t.prototype,{[vt]:{value:Object.keys(i)},[ot]:{value:o},[st]:{value:s},[pt]:{value:i},[Pt]:{value:null},[gt]:{value:Be(t[Tt],r)},...e}),Ue(t,n),t}function Ce(){const t=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[e,n]of Object.entries(t))n.set&&(n.set=R,Object.defineProperty(this,e,n));Object.defineProperty(this,ot,{value:R}),Object.defineProperty(this,Pt,{value:this})}function Le(t,e,n){const{byteSize:i,align:s,instance:{members:o,template:c}}=t,{modifier:a,initializer:l,finalizer:u,alternateCaster:f,shapeDefiner:y}=e,b=function(t){for(const{type:e}of t)switch(e){case r.Object:case r.Comptime:case r.Type:case r.Literal:return!0}return!1}(o);let p;if(c?.[Z]){const t=o.filter((t=>function({type:t}){switch(t){case r.Type:case r.Comptime:case r.Literal:return!0;default:return!1}}(t)));t.length>0&&(p=t.map((t=>t.slot)))}const g=new We,m=function(e,r={}){const{fixed:o=!1}=r,v=this instanceof m;let w,S;if(v){if(0===arguments.length)throw new h(t);w=this,b&&(w[Z]={}),y?(l.call(w,e,o),S=w[X]):w[X]=S=n.allocateMemory(i,s,o)}else{if(f&&(w=f.call(this,e,r),!1!==w))return w;if(S=function(t,e,n){const r=oe(t,e,n);if(!r)throw new d(t);return r}(t,e,n),w=g.find(S))return w;w=Object.create(m.prototype),y?ae.call(w,S,t,!1,!1,{shapeDefiner:y}):w[X]=S,b&&(w[Z]={})}if(p)for(const t of p)w[Z][t]=c[Z][t];return a&&a.call(w),v&&(y||l.call(w,e)),u&&(w=u.call(w)),g.save(S,w)};return ke(m,Tt,{value:g}),m}function Be(t,e){return function(){const n=this[X],r=n[Y];if(r&&0===n.buffer.byteLength){const n=e.obtainFixedView(r.address,r.len);return r.align&&(n[Y].align=r.align),this[X]=n,t?.save(n,this),!0}return!1}}function De({source:t}){const e=t[Z][0];e&&this[ut](e)}function Ne(t){const{instance:{template:e}}=t;return function(n,r){const i=Object.keys(n),s=this[pt],o=this[vt];for(const e of i)if(!(e in s))throw new A(t,e);let c=0,a=0,l=0,u=0;for(const t of o){const e=s[t];e.special?t in n&&u++:(c++,t in n?a++:e.required&&l++)}if(0!==l&&0===u){const e=o.filter((t=>s[t].required&&!(t in n)));throw new x(t,e)}if(u+a>i.length)for(const t of o)t in n&&(i.includes(t)||i.push(t));a<c&&0===u&&e&&(e[X]&&this[jt](e),this[kt]?.(De,{vivificate:!0,source:e}));for(const t of i)s[t].call(this,n[t],r);return i.length}}function Re(){return this}class We{map=new WeakMap;find(t){return this.map.get(t)}save(t,e){return this.map.set(t,e),e}}const Je={},qe={};function Ge(t,e="utf-8"){let n,r=Je[e];if(r||(r=Je[e]=new TextDecoder(e)),Array.isArray(t))if(1===t.length)n=t[0];else{let e=0;for(const n of t)e+=n.length;const{constructor:r}=t[0];n=new r(e);let i=0;for(const e of t)n.set(e,i),i+=e.length}else n=t;return r.decode(n)}function He(){return Ye(this,!1)}function Xe(){return Ye(this,!0)}const Ze=BigInt(Number.MAX_SAFE_INTEGER),Ke=BigInt(Number.MIN_SAFE_INTEGER);function Ye(t,e){const n=e?"return":"throw",r=new Map,s=function(t){const o="function"==typeof t?i.Struct:t?.constructor?.[tt];if(void 0===o){if(e){if("bigint"==typeof t&&Ke<=t&&t<=Ze)return Number(t);if(t instanceof Error)return{error:t.message}}return t}let c=r.get(t);if(void 0===c){let e;switch(o){case i.Struct:case i.PackedStruct:case i.ExternStruct:case i.TaggedUnion:case i.BareUnion:case i.ExternUnion:e=t[ft]?.({error:n}),c=t.constructor[et]?[]:{};break;case i.Array:case i.Vector:case i.Slice:e=t[ft]?.({error:n}),c=[];break;case i.SinglePointer:case i.SlicePointer:case i.MultiPointer:case i.CPointer:try{c=t["*"]}catch(t){c=Symbol.for("inaccessible")}break;case i.Enum:c=Qe((()=>String(t)),{error:n});break;case i.Opaque:c={};break;default:c=Qe((()=>t.$),{error:n})}if(c=s(c),r.set(t,c),e)for(const[t,n]of e)c[t]=s(n)}return c};return s(t)}function Qe(t,e={}){const{error:n="throw"}=e;try{return t()}catch(t){if("return"===n)return t;throw t}}function tn(t,e={}){return sn({get(){return this[gt](),this[X]},set(n,r){!function(t){if("DataView"!==t?.[Symbol.toStringTag])throw new P("a DataView",t)}(n),ae.call(this,n,t,!0,r,e)}})}function en(t,e={}){return sn({get(){return function(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}(this.dataView)},set(n,r){if("string"!=typeof n)throw new P("string",n);const i=function(t){const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<n.byteLength;t++)n[t]=e.charCodeAt(t);return new DataView(n.buffer)}(n);ae.call(this,i,t,!1,r,e)}})}function nn(t,e={}){const{sentinel:n,instance:{members:r}}=t,{byteSize:i}=r[0];return sn({get(){const t=this.dataView;let e=Ge(new(1===i?Int8Array:Int16Array)(t.buffer,t.byteOffset,this.length),"utf-"+8*i);return void 0!==n?.value&&e.charCodeAt(e.length-1)===n.value&&(e=e.slice(0,-1)),e},set(r,s){if("string"!=typeof r)throw new P("a string",r);void 0!==n?.value&&r.charCodeAt(r.length-1)!==n.value&&(r+=String.fromCharCode(n.value));const o=function(t,e="utf-8"){if("utf-16"===e){const{length:e}=t,n=new Uint16Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}{let n=qe[e];return n||(n=qe[e]=new TextEncoder),n.encode(t)}}(r,"utf-"+8*i),c=new DataView(o.buffer);ae.call(this,c,t,!1,s,e)}})}function rn(t,e={}){const{typedArray:n}=t;return sn({get(){const t=this.dataView,e=t.byteLength/n.BYTES_PER_ELEMENT;return new n(t.buffer,t.byteOffset,e)},set(r,i){if(!function(t,e){const n=t?.[Symbol.toStringTag];return!!e&&n===e.name}(r,n))throw new P(n.name,r);const s=new DataView(r.buffer,r.byteOffset,r.byteLength);ae.call(this,s,t,!0,i,e)}})}function sn({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}let on,cn;function an(t,e){const{name:n,byteSize:r,align:i,instance:{members:[s]}}=t;if(cn||(cn=class extends un{},on=an({...t,name:"anyerror"},e)),on&&"anyerror"===n)return t.constructor=on,t.typedArray=ue(s),on;const o=cn,{get:c,set:a}=we(s,e),l=["string","number"],f=Ne(t),h=t.constructor=Le(t,{initializer:function(e){if(e instanceof h[nt])a.call(this,e);else if(e&&"object"==typeof e&&!u(e)){if(0===f.call(this,e))throw new m(t,l,e)}else void 0!==e&&a.call(this,e)},alternateCaster:function(n){if("number"==typeof n||"string"==typeof n)return h[n];if(n instanceof h[nt])return h[Number(n)];if(u(n))return h[`Error: ${n.error}`];if(oe(t,n,e))return!1;throw new m(t,l,n)}},e),y=t.typedArray=ue(s),d={$:{get:c,set:a},dataView:tn(t),base64:en(t),typedArray:y&&rn(t),valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[jt]:{value:Nt(r)},[mt]:{value:Ce}},b={[$t]:{value:i},[Ot]:{value:r},[nt]:{value:o},[it]:"anyerror"===n?{value:[]}:void 0,[tt]:{value:t.type}};return Fe(h,d,b,e)}function ln(t,e,n){const r=n[st]("number");let i=on[r];i||(i=new(0,t[nt])(e,r));const s=String(i),o={[r]:{value:i},[s]:{value:i},[e]:{value:i}};Ue(t,o),Ue(on,o),on[it].push(e)}class un extends Error{constructor(t,e){super(W(t)),this.number=e,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}function fn(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function hn(t,e){const{byteSize:n,align:r,instance:{members:[i]}}=t,{get:s,set:o}=we(i,e),c=["string","number","tagged union"],a=Ne(t),l=t.constructor=Le(t,{initializer:function(e){if(e&&"object"==typeof e){if(0===a.call(this,e))throw new m(t,c,e)}else void 0!==e&&o.call(this,e)},alternateCaster:function(n){if("string"==typeof n||"number"==typeof n||"bigint"==typeof n){let t=l[n];return t||l[Ct]&&"string"!=typeof n&&(t=new l(void 0),o.call(t,n,"number"),yn(l,`${n}`,t)),t}if(n instanceof l)return n;if(n?.[rt]instanceof l)return n[rt];if(oe(t,n,e))return!1;throw new m(t,c,n)}},e),u=t.typedArray=ue(i),f={$:{get:s,set:o},dataView:tn(t),base64:en(t),typedArray:u&&rn(t),valueOf:{value:He},toString:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[Symbol.toPrimitive]:{value:function(t){switch(t){case"string":case"default":return this.$[Q];default:return s.call(this,"number")}}},[jt]:{value:Nt(n)},[mt]:{value:Ce}},h={[$t]:{value:r},[Ot]:{value:n},[tt]:{value:t.type}};return Fe(l,f,h,e)}function yn(t,e,n){if(void 0!==e){if(n instanceof t){Ue(n,{[Q]:{value:e}});const r=n[Symbol.toPrimitive]();Ue(t,{[r]:{value:n},[e]:{value:n}})}}else Ue(t,{[Ct]:{value:!0}})}function dn(t,e){const{name:n,type:s,byteSize:o,align:c,instance:{members:[l]},isConst:u}=t,{runtimeSafety:f=!0}=e,{structure:h}=l,{type:y,sentinel:d,byteSize:b=1}=h,p=s===i.SlicePointer,g=p?o/2:o,{get:m,set:v}=we({type:r.Uint,bitOffset:0,bitSize:8*g,byteSize:g,structure:{byteSize:g}},e),{get:w,set:x}=p?we({type:r.Uint,bitOffset:8*g,bitSize:8*g,byteSize:g,structure:{name:"usize",byteSize:g}},e):{},A=function(t=!0,n=!0){if(t||this[X][Y]){if(!n)return this[Z][0]=void 0;{const t=m.call(this),n=p?w.call(this):d?.isRequired?e.findSentinel(t,d.bytes)+1:1;if(t!==this[wt]||n!==this[St]){const r=h.constructor,i=e.findMemory(t,n,r[Ot]),s=i?r.call(Ut,i):null;return this[Z][0]=s,this[wt]=t,this[St]=n,p&&(this[bt]=void 0),s}}}return this[Z][0]},T=function(t){v.call(this,t),this[wt]=t},$=p||d?function(t){x?.call?.(this,t),this[St]=t}:null,V=function(){const t=this[Et]??this,e=A.call(t,!1);if(!e){if(s===i.CPointer)return null;throw new M}return u?xn(e):e},E=Oe(h)?function(){return V.call(this)[st]()}:V,P=u?R:function(t){return V.call(this)[ot](t)},_=function(r){const o=h.constructor;if(wn(r,o)){if(!u&&r.constructor.const)throw new I(t,r);r=r[Z][0]}else if(s!=i.SinglePointer)Sn(r,o,s)&&(r=o(r[Z][0][X]));else if("*anyopaque"===n&&r)if(a(r.constructor[tt]))r=r["*"]?.[X];else if(r[X])r=r[X];else if(r?.buffer instanceof ArrayBuffer&&!(r instanceof Uint8Array||r instanceof DataView)){const{byteOffset:t,byteLength:e}=r;void 0!==t&&void 0!==e&&(r=new DataView(r.buffer,t,e))}if(r instanceof o){r[gt]();const e=r[Pt];if(e){if(!u)throw new C(t);r=e}}else if(s===i.CPointer&&r instanceof o.child)r=o(r[X]);else if(function(t,e){if(t){const n=e[At];if(n){const e=t?.[Symbol.toStringTag];if(n.includes(e))return!0}if(e.child&&void 0!==le(t,e.child))return!0}return!1}(r,o))r=o(oe(h,r,e));else if(null==r||r[X]){if(void 0!==r&&(s!==i.CPointer||null!==r))throw new j(t,r)}else{if(s===i.CPointer&&"object"==typeof r&&!r[Symbol.iterator]){let t=!0;const e=o.prototype[pt];for(const n of Object.keys(r)){const r=e[n];if(r?.special){t=!1;break}}t&&(r=[r])}const t=new o(r,{fixed:!!this[X][Y]});if(f&&h.typedArray){const t=r?.buffer?.[Symbol.toStringTag];"ArrayBuffer"!==t&&"SharedArrayBuffer"!==t||function(t,e){const n=q(t.typedArray.name),r=q(e.constructor.name);console.warn(`Implicitly creating ${n} from ${r}`)}(h,r)}r=t}this[ut](r)},k=y===i.Primitive?function(t){return this[lt]()[Symbol.toPrimitive](t)}:null,U=y===i.Slice?function(t,e){const n=this[lt]().slice(t,e);return new L(n)}:null,F=y===i.Slice?function(t,e,n){const r=this[lt]().subarray(t,e,n);return new L(r)}:null,L=t.constructor=Le(t,{initializer:_,alternateCaster:function(e,n){const r=h.constructor;if(this===Ut||this===K||e instanceof L)return!1;if(wn(e,r))return new L(r(e["*"]),n);if(Sn(e,r,s))return new L(e);if(y===i.Slice)return new L(r(e),n);throw new O(t)},finalizer:function(){const t=a(y)?{}:An,e=new Proxy(this,t);return Object.defineProperty(this,xt,{value:e}),e}},e),B={"*":{get:E,set:P},$:{get:gn,set:_},length:{get:function(){const t=V.call(this);return t?t.length:0},set:function(t){t|=0;const n=V.call(this);if(!n){if(0!==t)throw new S(t,0);return}const r=n[X],i=r[Y],s=r.buffer.byteLength-r.byteOffset;let o;if(i||(p?(o=this[bt],void 0===o&&(o=this[bt]=n.length)):o=s/b|0),t<0||t>o)throw new S(t,o);const c=t*b,a=c<=s?e.obtainView(r.buffer,r.byteOffset,c):e.obtainFixedView(i.address,c),l=h.constructor;this[Z][0]=l.call(Ut,a),p&&$?.call(this,t)}},valueOf:{value:He},toJSON:{value:Xe},delete:{value:pn},slice:U&&{value:U},subarray:F&&{value:F},[Symbol.toPrimitive]:k&&{value:k},[lt]:{value:V},[ut]:{value:function(n){if(void 0===n)return;const r=this[Et]??this;if(n){if(n[X][Y]){const t=e.getViewAddress(n[X]);T.call(this,t),p&&$.call(this,n.length)}else if(r[X][Y])throw new z(t,n)}else r[X][Y]&&(T.call(this,0),p&&$.call(this,0));r[Z][0]=n??null,p&&(r[bt]=void 0)}},[dt]:{value:A},[ht]:{value:T},[yt]:$&&{value:$},[kt]:{value:vn},[jt]:{value:Nt(o)},[mt]:{value:bn},[wt]:{value:void 0,writable:!0},[St]:$&&{value:void 0,writable:!0}},D={child:{get:()=>h.constructor},const:{value:u},[$t]:{value:c},[Ot]:{value:o},[tt]:{value:t.type}};return Fe(L,B,D,e)}function bn(){const t=this[Et],e=Object.getOwnPropertyDescriptor(t.constructor.prototype,"$");e.set=R,Object.defineProperty(t,"$",e),Object.defineProperty(t,Pt,{value:t})}function pn(){const t=this[lt]();t?.delete()}function gn(){return this[xt]}function mn({isActive:t}){this[Z][0]&&!t(this)&&(this[Z][0]=void 0)}function vn(t,e={}){const{source:n,isActive:r=On,isMutable:i=On}=e;t.call(this,{source:n,isActive:r,isMutable:i})}function wn(t,e){return t?.constructor?.child===e&&t["*"]}function Sn(t,e,n){if(n!==i.SinglePointer){if(t?.constructor?.child?.child===e.child&&t["*"])return!0;if(n===i.CPointer&&wn(t,e.child))return!0}return!1}function xn(t){let e=t[Mt];return e||(Object.defineProperty(t,Mt,{value:void 0,configurable:!0}),e=new Proxy(t,Tn),Object.defineProperty(t,Mt,{value:e})),e}const An={get:(t,e)=>e===Et?t:e in t?t[e]:t[lt]()[e],set:(t,e,n)=>(e in t?t[e]=n:t[lt]()[e]=n,!0),deleteProperty:(t,e)=>(e in t?delete t[e]:delete t[lt]()[e],!0),has:(t,e)=>e in t||e in t[lt]()},Tn={get(t,e){if(e===Pt)return t;{const n=t[e];return null===n?.[Pt]?xn(n):n}},set(t,e,n){const r=t[Et];return r&&!(e in r)?t[e]=n:R(),!0}};function On(){return!0}function In(t,e){const{length:n,byteSize:r,align:i,instance:{members:[s]}}=t,{bitSize:o,structure:c}=s,a={};for(let t=0,r=0;t<n;t++,r+=o){const{get:n,set:i}=we({...s,bitOffset:r},e);a[t]={get:n,set:i,configurable:!0}}const l=Ne(t),u=function(e){if(e instanceof f)this[jt](e);else if(e?.[Symbol.iterator]){let r=e.length;if("number"!=typeof r&&(r=(e=[...e]).length),r!==n)throw new w(t,this,e);let i=0;for(const t of e)this[pt][i++].call(this,t)}else if(e&&"object"==typeof e){if(0===l.call(this,e))throw new v(t,e)}else if(void 0!==e)throw new v(t,e)},f=t.constructor=Le(t,{initializer:u},e),h=t.typedArray=ue(s),y={...a,$:{get:Re,set:u},length:{value:n},dataView:tn(t),base64:en(t),typedArray:h&&rn(t),valueOf:{value:He},toJSON:{value:Xe},entries:{value:En},delete:{value:Bt(t)},[Symbol.iterator]:{value:$n},[ft]:{value:En},[jt]:{value:Nt(r)},[mt]:{value:Ce}},d={child:{get:()=>c.constructor},[At]:{value:fe(t)},[$t]:{value:i},[Ot]:{value:r},[tt]:{value:t.type}};return Fe(f,y,d,e)}function $n(){const t=this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=t[e],i=!1}else i=!0;return{value:r,done:i}}}}function Vn(){const t=this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=[e,t[e]],i=!1}else i=!0;return{value:r,done:i}}}}function En(){return{[Symbol.iterator]:Vn.bind(this),length:this.length}}function Pn(t,e){const{byteSize:n,align:i,instance:{members:s},isTuple:o,isIterator:c,hasPointer:a}=t,l={},u=s.filter((t=>!!t.name)),f=s.find((t=>!t.name));for(const t of u){const{get:n,set:r}=we(t,e);l[t.name]={get:n,set:r,configurable:!0,enumerable:!0},t.isRequired&&r&&(r.required=!0)}const h=f?we(f,e):null,y=!!s.find((t=>t.type===r.Object)),d=Ne(t),b=function(e){if(e instanceof p)this[jt](e),a&&this[kt](De,{vivificate:!0,source:e});else if(e&&"object"==typeof e)d.call(this,e);else if("number"!=typeof e&&"bigint"!=typeof e||!h){if(void 0!==e)throw new m(t,"object",e)}else h.set.call(this,e)},p=t.constructor=Le(t,{initializer:b},e),g=h?function(t){return"string"===t?Object.prototype.toString.call(this):h.get.call(this)}:null,v=o&&s.length>0?parseInt(s[s.length-1].name)+1:0,w=c?jn:o?$n:zn,S={$:{get:Re,set:b},dataView:tn(t),base64:en(t),length:o&&{value:v},valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},entries:o&&{value:En},...l,[Symbol.iterator]:{value:w},[Symbol.toPrimitive]:h&&{value:g},[ft]:{value:o?En:Mn},[jt]:{value:Nt(n)},[_t]:y&&{value:kn(t,e)},[kt]:a&&{value:Un(t,On)},[mt]:{value:Ce},[it]:{value:u.map((t=>t.name))}},x={[$t]:{value:i},[Ot]:{value:n},[tt]:{value:t.type},[et]:{value:o}};return Fe(p,S,x,e)}function Mn(t){return{[Symbol.iterator]:_n.bind(this,t),length:this[it].length}}function jn(){const t=this;return{next(){const e=t.next();return{value:e,done:null===e}}}}function zn(t){return Mn.call(this,t)[Symbol.iterator]()}function _n(t){const e=this,n=this[it];let r=0;return{next(){let i,s;if(r<n.length){const o=n[r++];i=[o,Qe((()=>e[o]),t)],s=!1}else s=!0;return{value:i,done:s}}}}function kn(t,e){const{instance:{members:n}}=t,i={};for(const t of n.filter((t=>t.type===r.Object)))i[t.slot]=t;return function(t){const n=i[t],{bitOffset:r,byteSize:s,structure:{constructor:o}}=n,c=this[X],a=c.byteOffset+(r>>3);let l=s;if(void 0===l){if(7&r)throw new U(n);l=n.bitSize>>3}const u=e.obtainView(c.buffer,a,l);return this[Z][t]=o.call(K,u)}}function Un(t,e={}){const{isChildActive:n=On,isChildMutable:r=On}=e,{instance:{members:i}}=t,s=i.filter((t=>t.structure?.hasPointer));return function(t,e={}){const{source:i,vivificate:o=!1,isActive:c=On,isMutable:a=On}=e,l={...e,isActive:t=>c(this)&&n.call(this,t),isMutable:t=>a(this)&&r.call(this,t)};for(const{slot:e}of s){if(i){const t=i[Z]?.[e];if(!t)continue;l.source=t}const n=this[Z][e]??(o?this[_t](e):null);n&&n[kt](t,l)}}}function Fn(t,e){const{byteSize:n,align:i,instance:{members:s},hasPointer:o}=t,c=!!s.find((t=>t.type===r.Object)),a=s.slice(1).map((t=>t.name)),l=a.length,u=t.constructor=function(t,r,s){const o=e.allocateMemory(n,i);if(this[X]=o,c&&(this[Z]={}),t.length!==l)throw new T(r,l-s,t.length-s);for(const[e,n]of a.entries())try{this[n]=t[e]}catch(t){throw D(r,e-s,l-s,t)}},f={};for(const t of s)f[t.name]=we(t,e);const{slot:h,type:y}=s[0],d=y===r.Object?function(t){return t===this[_t](h)}:function(){return!1};return Ue(u.prototype,{...f,[jt]:{value:Nt(n)},[_t]:c&&{value:kn(t,e)},[kt]:o&&{value:Un(t,{isChildMutable:d})},[gt]:{value:Be(null,e)}}),Ue(u,{[$t]:{value:i},[Ot]:{value:n}}),u}function Cn(t,e){const{length:n,byteSize:i,align:s,instance:{members:[o]},hasPointer:c}=t,{get:a,set:l}=we(o,e),u=Dn(o),f=Ne(t),h=function(e){if(e instanceof d)this[jt](e),c&&this[kt](De,{vivificate:!0,source:e});else if("string"==typeof e&&u&&(e={string:e}),e?.[Symbol.iterator]){if((e=Gn(e)).length!==n)throw new w(t,this,e);let r=0;for(const t of e)l.call(this,r++,t)}else if(e&&"object"==typeof e){if(0===f.call(this,e))throw new v(t,e)}else if(void 0!==e)throw new v(t,e)},y=Ln,d=t.constructor=Le(t,{initializer:h,finalizer:y},e),b=t.typedArray=ue(o),p=o.type===r.Object,g={$:{get:gn,set:h},length:{value:n},dataView:tn(t),base64:en(t),string:u&&nn(t),typedArray:b&&rn(t),get:{value:a},set:{value:l},entries:{value:Wn},valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[Symbol.iterator]:{value:Nn},[ft]:{value:Wn},[jt]:{value:Nt(i)},[_t]:p&&{value:Jn(t,e)},[kt]:c&&{value:qn()},[mt]:{value:Bn}},m={child:{get:()=>o.structure.constructor},[At]:{value:fe(t)},[$t]:{value:s},[Ot]:{value:i},[tt]:{value:t.type}};return Fe(d,g,m,e)}function Ln(){const t=new Proxy(this,Hn);return Object.defineProperty(this,xt,{value:t}),t}function Bn(){Ce.call(this),Object.defineProperty(this,"set",{value:R});const t=this.get;Object.defineProperty(this,"get",{value:function(e){const n=t.call(this,e);return null===n?.[Pt]&&n[mt]?.(),n}})}function Dn(t){return t.type===r.Uint&&[8,16].includes(t.bitSize)}function Nn(){const t=this[Vt]??this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=t.get(e),i=!1}else i=!0;return{value:r,done:i}}}}function Rn(t){const e=this[Vt]??this,n=this.length;let r=0;return{next(){let i,s;if(r<n){const n=r++;i=[n,Qe((()=>e.get(n)),t)],s=!1}else s=!0;return{value:i,done:s}}}}function Wn(t){return{[Symbol.iterator]:Rn.bind(this,t),length:this.length}}function Jn(t,e){const{instance:{members:[n]}}=t,{byteSize:r,structure:i}=n;return function(t){const{constructor:n}=i,s=this[X],o=s.byteOffset+r*t,c=e.obtainView(s.buffer,o,r);return this[Z][t]=n.call(K,c)}}function qn(t){return function(t,e={}){const{source:n,vivificate:r=!1,isActive:i=On,isMutable:s=On}=e,o={...e,isActive:()=>i(this),isMutable:()=>s(this)};for(let e=0,i=this.length;e<i;e++){n&&(o.source=n?.[Z][e]);const i=this[Z][e]??(r?this[_t](e):null);i&&i[kt](t,o)}}}function Gn(t){if("number"==typeof t.length)return t;const e=t[Symbol.iterator](),n=e.next(),r=n.value?.length;if("number"==typeof r&&"length"===Object.keys(n.value).join())return Object.assign(function*(){let t;for(;!(t=e.next()).done;)yield t.value}(),{length:r});{const t=[];let r=n;for(;!r.done;)t.push(r.value),r=e.next();return t}}const Hn={get(t,e){const n="symbol"==typeof e?0:0|e;if(0!==n||n==e)return t.get(n);switch(e){case"get":return t[ct]||(t[ct]=t.get.bind(t)),t[ct];case"set":return t[at]||(t[at]=t.set.bind(t)),t[at];case Vt:return t;default:return t[e]}},set(t,e,n){const r="symbol"==typeof e?0:0|e;if(0!==r||r==e)t.set(r,n);else switch(e){case"get":t[ct]=n;break;case"set":t[at]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n="symbol"==typeof e?0:0|e;if(0!==n||n==e)return!1;switch(e){case"get":delete t[ct];break;case"set":delete t[at];break;default:delete t[e]}return!0},has(t,e){const n="symbol"==typeof e?0:0|e;return 0!==n||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(`${n}`);return e.push("length",xt),e},getOwnPropertyDescriptor(t,e){const n="symbol"==typeof e?0:0|e;return 0===n&&n!=e?Object.getOwnPropertyDescriptor(t,e):n>=0&&n<t.length?{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}:void 0}};function Xn(t,e){const{byteSize:n,align:i,instance:{members:s},hasPointer:o}=t,{get:c,set:a}=we(s[0],e),{get:l,set:f}=we(s[1],e),h=s[0].type===r.Void,y=s[1].structure.constructor,d=function(){return!l.call(this,"number")},b=function(){this[zt](),this[kt]?.(mn)},p=!!s.find((t=>t.type===r.Object)),m=Ne(t),v=function(e){if(e instanceof w)this[jt](e),o&&d.call(this)&&this[kt](De,{vivificate:!0,source:e});else if(e instanceof y[nt]&&y(e))f.call(this,e),b.call(this);else if(void 0!==e||h)try{a.call(this,e),f.call(this,0,"number")}catch(n){if(e instanceof Error)throw new g(t);if(u(e))f.call(this,e),b.call(this);else{if(!e||"object"!=typeof e)throw n;if(0===m.call(this,e))throw n}}},w=t.constructor=Le(t,{initializer:v},e),{bitOffset:S,byteSize:x}=s[0],A={$:{get:function(){if(l.call(this,"number"))throw l.call(this);return c.call(this)},set:v},dataView:tn(t),base64:en(t),valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[jt]:{value:Nt(n)},[zt]:{value:Zt(S/8,x)},[_t]:p&&{value:kn(t,e)},[kt]:o&&{value:Un(t,{isChildActive:d})},[mt]:{value:Ce}},T={[$t]:{value:i},[Ot]:{value:n},[tt]:{value:t.type}};return Fe(w,A,T,e)}function Zn(t,e){const{byteSize:n,align:r,instance:{members:[i]}}=t,{get:s,set:o}=we(i,e),a=Ne(t),l=t.constructor=Le(t,{initializer:function(e){if(e instanceof l)this[jt](e);else if(e&&"object"==typeof e){if(0===a.call(this,e)){const n=c(i);throw new m(t,n,e)}}else void 0!==e&&o.call(this,e)}},e),u=t.typedArray=ue(i),f={$:{get:s,set:o},dataView:tn(t),base64:en(t),typedArray:u&&rn(t),valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[Symbol.toPrimitive]:{value:s},[jt]:{value:Nt(n)},[mt]:{value:Ce}},h={[At]:{value:fe(t)},[$t]:{value:r},[Ot]:{value:n},[It]:{value:i.bitSize},[tt]:{value:t.type},[Lt]:{value:i.type}};return Fe(l,f,h,e)}function Kn(t,e){const{align:n,instance:{members:[i]},byteSize:s,hasPointer:o}=t,{get:c,set:a}=we(i,e),{byteSize:l,structure:u}=i,f=function(t,e){const{runtimeSafety:n=!0}=e,{byteSize:r,instance:{members:[i,s],template:o}}=t;if(!s)return;const{get:c}=we(s,e),a=c.call(o,0),{get:l}=we(i,e),{isRequired:u}=s,f=u?n?function(e,n,r){if(e===a&&n!==r-1)throw new $(t,e,n,r);if(e!==a&&n===r-1)throw new V(t,a,n,r)}:function(e,n,r){if(e!==a&&n===r-1)throw new V(t,a,r)}:function(){},h=u?n?function(e,n){for(let r=0;r<n;r++){const i=l.call(e,r);if(i===a&&r!==n-1)throw new $(t,a,r,n);if(i!==a&&r===n-1)throw new V(t,a,n)}}:function(e,n){if(n*r===e[X].byteLength){const r=n-1;if(l.call(e,r)!==a)throw new V(t,a,n)}}:function(){},y=o[X];return{value:a,bytes:y,validateValue:f,validateData:h,isRequired:u}}(t,e);f&&(t.sentinel=f);const h=Dn(i),y=function(t,r,i=!1){t||(t=e.allocateMemory(r*l,n,i)),this[X]=t,this[St]=r},d=function(e,n){if(n!==this[St])throw new w(t,this,e)},b=Ne(t),p=function(e,n=!1){if(e instanceof A)this[X]?d.call(this,e,e.length):y.call(this,null,e.length,n),this[jt](e),o&&this[kt](De,{vivificate:!0,source:e});else if("string"==typeof e&&h)p.call(this,{string:e},n);else if(e?.[Symbol.iterator]){e=Gn(e),this[X]?d.call(this,e,e.length):y.call(this,null,e.length,n);let t=0;for(const n of e)f?.validateValue(n,t,e.length),a.call(this,t++,n)}else if("number"==typeof e){if(!(!this[X]&&e>=0&&isFinite(e)))throw new v(t,e,!this[X]);y.call(this,null,e,n)}else if(e&&"object"==typeof e){if(0===b.call(this,e,n))throw new v(t,e)}else if(void 0!==e)throw new v(t,e)},g=function(t,e){return(t|=0)<0?(t=e+t)<0&&(t=0):t>e&&(t=e),t};function m(t,n){t=void 0===t?0:g(t,this.length),n=void 0===n?this.length:g(n,this.length);const r=this[X],i=t*l,s=n*l-i;return e.obtainView(r.buffer,r.byteOffset+i,s)}const S=Ln,x=Nt(l,!0),A=t.constructor=Le(t,{initializer:p,shapeDefiner:y,finalizer:S},e),T=t.typedArray=ue(i),O=i.type===r.Object,I={shapeDefiner:y},E={$:{get:gn,set:p},length:{get:function(){return this[St]}},dataView:tn(t,I),base64:en(t,I),string:h&&nn(t,I),typedArray:T&&rn(t,I),get:{value:c},set:{value:a},entries:{value:Wn},slice:{value:function(t,r,i={}){const{fixed:s=!1}=i,o=m.call(this,t,r),c=e.allocateMemory(o.byteLength,n,s),a=A(c);return x.call(a,{[X]:o}),a}},subarray:{value:function(t,e){const n=m.call(this,t,e);return A(n)}},valueOf:{value:He},toJSON:{value:Xe},delete:{value:Bt(e)},[Symbol.iterator]:{value:Nn},[ft]:{value:Wn},[jt]:{value:x},[_t]:O&&{value:Jn(t,e)},[kt]:o&&{value:qn()},[mt]:{value:Bn}},P={child:{get:()=>u.constructor},[At]:{value:fe(t)},[$t]:{value:n},[Ot]:{value:s},[tt]:{value:t.type}};return Fe(A,E,P,e)}const Yn=Array(Object.values(i).length);function Qn(){Yn[i.Primitive]=Zn}function tr(){Yn[i.Array]=Cn}function er(){Yn[i.Struct]=Pn}function nr(){Yn[i.ArgStruct]=Fn}function rr(){Yn[i.ErrorUnion]=Xn}function ir(){Yn[i.ErrorSet]=an,ve[i.ErrorSet]=Te}function sr(){Yn[i.Enum]=hn,ve[i.Enum]=Ae}function or(){Yn[i.SinglePointer]=dn,de()}function cr(){Yn[i.SlicePointer]=dn,de()}function ar(){Yn[i.Slice]=Kn}function lr(){Yn[i.Vector]=In}class ur{context;contextStack=[];consolePending=[];consoleTimeout=0;viewMap=new WeakMap;emptyBuffer=new ArrayBuffer(0);abandoned=!1;released=!1;littleEndian=!0;wordSize=4;runtimeSafety=!0;comptime=!1;variables=[];imports;console=globalThis.console;startContext(){this.context&&this.contextStack.push(this.context),this.context=new fr}endContext(){this.context=this.contextStack.pop()}allocateMemory(t,e=0,n=!1){return n?this.allocateFixedMemory(t,e):this.allocateRelocMemory(t,e)}allocateFixedMemory(t,e,n=0){const r=t?this.allocateExternMemory(n,t,e):0,i=this.obtainFixedView(r,t);return i[Y].align=e,i[Y].type=n,i}freeFixedMemory(t){const{address:e,unalignedAddress:n,len:r,align:i,type:s}=t[Y];r&&this.freeExternMemory(s,n??e,r,i)}obtainFixedView(t,e){let n;if(t&&e)n=this.obtainExternView(t,e);else{let e=this.viewMap.get(this.emptyBuffer);e||this.viewMap.set(this.emptyBuffer,e={});const r=`${t}:0`;n=e[r],n||(n=e[r]=new DataView(this.emptyBuffer),n[Y]={address:t,len:0})}return n}releaseFixedView(t){void 0!==t[Y]?.type&&(this.freeFixedMemory(t),t[Y]=null)}allocateRelocMemory(t,e){return this.obtainView(new ArrayBuffer(t),0,t)}registerMemory(t,e=null,n=void 0){const{memoryList:r}=this.context,i=this.getViewAddress(t),s=yr(r,i);return r.splice(s,0,{address:i,dv:t,len:t.byteLength,targetDV:e,targetAlign:n}),i}unregisterMemory(t){const{memoryList:e}=this.context,n=yr(e,t),r=e[n-1];if(r?.address===t)return e.splice(n-1,1),r.dv}findMemory(t,e,n){if(function(t){return"bigint"==typeof t?0xaaaaaaaaaaaaaaaan===t:2863311530===t}(t)){if(e)return null;t=0}else if(!t&&e)return null;let r=e*(n??0);if(this.context){const{memoryList:e}=this.context,i=e[yr(e,t)-1];if(i?.address===t&&i.len===r)return i.targetDV??i.dv;if(i?.address<=t&&t<br(i.address,i.len)){const e=Number(t-i.address),s=i.targetDV??i.dv,o=void 0===n;o&&(r=s.byteLength-e);const c=this.obtainView(s.buffer,s.byteOffset+e,r);return o&&(c[$t]=i.targetAlign),c}}return this.obtainFixedView(t,r)}getViewAddress(t){const e=t[Y];return e?e.address:br(this.getBufferAddress(t.buffer),t.byteOffset)}findViewAt(t,e,n){let r,i=this.viewMap.get(t);if(i)if(i instanceof DataView)if(i.byteOffset===e&&i.byteLength===n)r=i;else{const e=i,n=`${e.byteOffset}:${e.byteLength}`;i={[n]:e},this.viewMap.set(t,i)}else r=i[`${e}:${n}`];return{existing:r,entry:i}}obtainView(t,e,n){const{existing:r,entry:i}=this.findViewAt(t,e,n);let s;if(r)return r;i?s=i[`${e}:${n}`]=new DataView(t,e,n):this.viewMap.set(t,s=new DataView(t,e,n));const o=t[Y];return o&&(s[Y]={address:br(o.address,e),len:n}),s}registerView(t){if(!t[Y]){const{buffer:e,byteOffset:n,byteLength:r}=t,{existing:i,entry:s}=this.findViewAt(e,n,r);if(i)return i;s?s[`${n}:${r}`]=t:this.viewMap.set(e,t)}return t}captureView(t,e,n){if(n){const n=this.allocateRelocMemory(e,0);return e>0&&this.copyBytes(n,t,e),n}return this.obtainFixedView(t,e)}castView(t,e,n,r){const{constructor:i,hasPointer:s}=r,o=this.captureView(t,e,n),c=i.call(Ut,o);return s&&this.updatePointerTargets(c),n&&c[mt](),c}finalizeShape(t){var e;const n=(e=t.type,Yn[e])(t,this);"function"==typeof n&&(Ue(n,{name:{value:t.name,configurable:!0}}),n.prototype.hasOwnProperty(Symbol.toStringTag)||Ue(n.prototype,{[Symbol.toStringTag]:{value:t.name,configurable:!0}}))}finalizeStructure(t){!function(t,e){const{type:n,constructor:r,static:{members:s,template:o}}=t,c={};for(const t of s)c[t.name]=we(t,e);if(Ue(r,{valueOf:{value:He},toJSON:{value:Xe},...c,[Symbol.iterator]:{value:zn},[ft]:{value:Mn},[Z]:o&&{value:o[Z]},[it]:!r[it]&&{value:s.map((t=>t.name))}}),n===i.Enum)for(const{name:t,slot:e}of s)yn(r,t,r[Z][e]);else if(n===i.ErrorSet)for(const{name:t,slot:e}of s)ln(r,t,r[Z][e])}(t,this),function(t,e){const n=(t,{methods:n},r)=>{const i={},s=/^(get|set)\s+([\s\S]+)/;for(const t of n){const n=e.createCaller(t,r),o=s.exec(n.name);if(o){const e=o[1],s=o[2],c="get"===e?0:1;if(fn(t,r)===c){let t=i[s];t||(t=i[s]={configurable:!0,enumerable:!0}),t[e]=n}}else i[n.name]={value:n,configurable:!0,writable:!0}}Ue(t,i)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}(t,this)}createCaller(t,e){const{name:n,argStruct:r,thunkId:i}=t,{constructor:s}=r,o=this;let c;return c=e?function(...t){return o.invokeThunk(i,new s([this,...t],n,1))}:function(...t){return o.invokeThunk(i,new s(t,n,0))},Object.defineProperty(c,"name",{value:n}),c}recreateStructures(t,e){Object.assign(this,e);const n=(t,e)=>{for(const[n,i]of Object.entries(e))t[n]=r(i);return t},r=t=>{const{memory:e,structure:r,actual:i}=t;if(e){if(i)return i;{const{array:i,offset:s,length:o}=e,c=this.obtainView(i.buffer,s,o),{constructor:a}=r,{reloc:l,const:u}=t,f=t.actual=a.call(Ut,c);return u&&f[mt]?.(),t.slots&&n(f[Z],t.slots),void 0!==l&&this.variables.push({reloc:l,object:f}),f}}return r};cn=on=void 0;const i=new Map;for(const e of t){for(const t of[e.instance,e.static])if(t.template){const e=t.template,n=t.template={};if(e.memory){const{array:t,offset:r,length:i}=e.memory;n[X]=this.obtainView(t.buffer,r,i)}if(e.slots){const t=n[Z]={};i.set(t,e.slots)}}this.finalizeShape(e)}for(const[t,e]of i)n(t,e);for(const e of t)this.finalizeStructure(e)}linkVariables(t){const e=[];for(const{object:n,reloc:r}of this.variables)this.linkObject(n,r,t),n[lt]&&n[Z][0]&&e.push(n);for(const t of e){const e=t[lt](),n=this.getViewAddress(e[X]);t[ht](n),t[yt]?.(e.length)}}linkObject(t,e,n){if(t[X][Y])return;const r=t[X],i=this.recreateAddress(e),s=this.obtainFixedView(i,r.byteLength);if(n){const e=Object.create(t.constructor.prototype);e[X]=s,e[jt](t)}t[X]=s;const o=t=>{if(t[Z])for(const e of Object.values(t[Z]))if(e){const t=e[X];if(t.buffer===r.buffer){const n=t.byteOffset-r.byteOffset;e[X]=this.obtainView(s.buffer,n,t.byteLength),o(e)}}};o(t)}unlinkVariables(){for(const{object:t}of this.variables)this.unlinkObject(t)}unlinkObject(t){if(!t[X][Y])return;t[gt]();const e=t[X],n=this.allocateMemory(e.byteLength),r=Object.create(t.constructor.prototype);r[X]=n,r[jt](t),t[X]=n}releaseFunctions(){const t=()=>{throw new Error("Module was abandoned")};for(const e of Object.keys(this.imports))this[e]&&(this[e]=t)}getSpecialExports(){const t=t=>{if(void 0===t)throw new Error("Not a Zig type");return t};return{init:(...t)=>this.init(...t),abandon:()=>this.abandon(),released:()=>this.released,connect:t=>this.console=t,sizeOf:e=>t(e[Ot]),alignOf:e=>t(e[$t]),typeOf:e=>function(t){for(const[e,n]of Object.entries(i))if(n===t)return e.replace(/\B[A-Z]/g,(t=>` ${t}`)).toLowerCase()}(t(e[tt]))}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}updatePointerAddresses(t){const e=new Map,n=new Map,r=[],i=function({isActive:t}){if(t(this)){const t=this[Et];if(!e.get(t)){const s=t[Z][0];if(s){e.set(t,s);const o=s[X];if(!o[Y]){const t=n.get(o.buffer);if(t){const e=Array.isArray(t)?t:[t],i=hr(e,o.byteOffset,(t=>t[X].byteOffset));e.splice(i,0,s),Array.isArray(t)||(n.set(o.buffer,e),r.push(e))}else n.set(o.buffer,s);s[kt]?.(i)}}}}};t[kt](i);const s=this.findTargetClusters(r),o=new Map;for(const t of s)for(const e of t.targets)o.set(e,t);for(const[t,n]of e){const e=o.get(n),r=this.getTargetAddress(n,e)??this.getShadowAddress(n,e);t[ht](r),t[yt]?.(n.length)}}findTargetClusters(t){const e=[];for(const n of t){let t=null,r=0,i=0,s=null;for(const o of n){const n=o[X],{byteOffset:c,byteLength:a}=n,l=c+a;let u=!0;t&&(i>c?(s||(s={targets:[t],start:r,end:i,address:void 0,misaligned:void 0},e.push(s)),s.targets.push(o),l>i?s.end=l:u=!1):s=null),u&&(t=o,r=c,i=l)}}return e}createClusterShadow(t){const{start:e,end:n,targets:r}=t;let i,s=0;for(const t of r){const e=t[X],n=e.byteOffset,r=t.constructor[$t]??e[$t];(void 0===s||r>s)&&(s=r,i=n)}const o=n-e,c=this.allocateShadowMemory(o+s,1),a=this.getViewAddress(c),l=function(t,e){let n;return n="bigint"==typeof t?~((e=BigInt(e))-1n):~(e-1),(t&n)+e}(br(a,i-e),s),u=br(l,e-i),f=c.byteOffset+Number(u-a),h=new DataView(c.buffer,f,o);for(const t of r){const n=t[X],r=n.byteOffset;if(r!==i){const i=t.constructor[$t]??n[$t];if(dr(br(u,r-e),i))throw new E(i,s)}}const y={[jt]:Nt(o)},d=Object.create(y),b=Object.create(y);return d[X]=new DataView(r[0][X].buffer,Number(e),o),b[X]=h,h[Y]={address:u,len:o,align:1,unalignedAddress:a,type:1},this.addShadow(b,d,1)}getShadowAddress(t,e){if(e){const n=t[X];if(void 0===e.address){const t=this.createClusterShadow(e);e.address=this.getViewAddress(t[X])}return br(e.address,n.byteOffset-e.start)}{const e=this.createShadow(t);return this.getViewAddress(e[X])}}createShadow(t){const e=t[X],n=t.constructor[$t]??e[$t],r=Object.create(t.constructor.prototype);return r[X]=this.allocateShadowMemory(e.byteLength,n),this.addShadow(r,t,n)}addShadow(t,e,n){let{shadowMap:r}=this.context;return r||(r=this.context.shadowMap=new Map),t[X][Y],t[gt]=Be(null,this),r.set(t,e),this.registerMemory(t[X],e[X],n),t}removeShadow(t){const{shadowMap:e}=this.context;if(e)for(const[n]of e)if(n[X]===t){e.delete(n);break}}updateShadows(){const{shadowMap:t}=this.context;if(t)for(const[e,n]of t)e[jt](n)}updateShadowTargets(){const{shadowMap:t}=this.context;if(t)for(const[e,n]of t)n[jt](e)}releaseShadows(){const{shadowMap:t}=this.context;if(t)for(const[e]of t)this.freeShadowMemory(e[X])}updatePointerTargets(t){const e=new Map,n=function({isActive:t,isMutable:r}){const i=this[Et]??this;if(!e.get(i)){e.set(i,!0);const s=!i.constructor.const,o=i[Z][0],c=!o||r(this)?i[dt](!0,t(this)):o;o?.[kt]?.(n,{vivificate:!0,isMutable:()=>s}),c!==o&&c?.[kt]?.(n,{vivificate:!0,isMutable:()=>s})}};t[kt](n,{vivificate:!0})}writeToConsole(t){const{console:e}=this;try{const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength).slice(),r=n.lastIndexOf(10);if(-1===r)this.consolePending.push(n);else{const t=n.subarray(0,r),i=n.subarray(r+1),s=[...this.consolePending,t];e.log(Ge(s)),this.consolePending=i.length>0?[i]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout((()=>{e.log(Ge(this.consolePending)),this.consolePending=[]}),250))}catch(t){e.error(t)}}flushConsole(){this.consolePending.length>0&&(console.log(Ge(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}}class fr{pointerProcessed=new Map;memoryList=[];shadowMap=null;call=0}function hr(t,e,n){let r=0,i=t.length;if(0===i)return 0;for(;r<i;){const s=Math.floor((r+i)/2);n(t[s])<=e?r=s+1:i=s}return i}function yr(t,e){return hr(t,e,(t=>t.address))}function dr(t,e){return void 0!==e&&("bigint"==typeof t&&(t=Number(0xFFFFFFFFn&t)),!!(t&e-1))}function br(t,e){return t+("bigint"==typeof t?BigInt(e):e)}class pr extends ur{imports={allocateExternMemory:{argType:"iii",returnType:"i"},freeExternMemory:{argType:"iiii"},runThunk:{argType:"ii",returnType:"v"},runVariadicThunk:{argType:"iiii",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"},flushStdout:{argType:"",returnType:""}};exports={allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"iibv",returnType:"v"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"}};nextValueIndex=1;valueTable={0:null};valueIndices=new Map;memory=null;initPromise=null;customWASI=null;hasCodeSource=!1;littleEndian=!0;async init(t){if(t&&this.hasCodeSource)throw new Error("Cannot set WASI interface after compilation has already begun (consider disabling topLevelAwait)");this.customWASI=t,await this.initPromise}allocateHostMemory(t,e){const n={[$t]:e},r=Nt(t),i=this.allocateRelocMemory(t,e),s=this.allocateShadowMemory(t,e),o={constructor:n,[X]:i,[jt]:r},c={constructor:n,[X]:s,[jt]:r};return this.addShadow(c,o,e),s}freeHostMemory(t,e,n){const r=this.unregisterMemory(t);if(!r)throw new f(t);this.removeShadow(r),this.freeShadowMemory(r)}allocateShadowMemory(t,e){return this.allocateFixedMemory(t,e,1)}freeShadowMemory(t){return this.freeFixedMemory(t)}getBufferAddress(t){return 0}obtainExternView(t,e){const{buffer:n}=this.memory;return n[Y]||(n[Y]={address:0,len:n.byteLength}),this.obtainView(n,t,e)}copyBytes(t,e,n){const{memory:r}=this,i=new DataView(r.buffer,e,n);Rt(n)(t,i)}findSentinel(t,e){const{memory:n}=this,r=e.byteLength,i=n.buffer.byteLength-r+1;for(let s=t;s<i;s+=r){const i=new DataView(n.buffer,s,r);let o=!0;for(let t=0;t<r;t++)if(i.getUint8(t)!==e.getUint8(t)){o=!1;break}if(o)return(s-t)/r}}captureString(t,e){const{buffer:n}=this.memory;return Ge(new Uint8Array(n,t,e))}getTargetAddress(t,e){const n=t[X];return n[Y]?this.getViewAddress(n):0===n.byteLength?0:void 0}clearExchangeTable(){1!==this.nextValueIndex&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(t){if(t){let e=this.valueIndices.get(t);return void 0===e&&(e=this.nextValueIndex++,this.valueIndices.set(t,e),this.valueTable[e]=t),e}return 0}fromWebAssembly(t,e){switch(t){case"v":case"s":return this.valueTable[e];case"i":return e;case"b":return!!e}}toWebAssembly(t,e){switch(t){case"v":case"s":return this.getObjectIndex(e);case"i":return e;case"b":return e?1:0}}exportFunction(t,e="",n=""){return t?(...r)=>{r=r.map(((t,n)=>this.fromWebAssembly(e.charAt(n),t)));const i=t.apply(this,r);return this.toWebAssembly(n,i)}:()=>{}}importFunction(t,e="",n=""){return(...r)=>{r=r.map(((t,n)=>this.toWebAssembly(e.charAt(n),t)));const i=t.apply(this,r);return this.fromWebAssembly(n,i)}}exportFunctions(){const t={};for(const[e,{argType:n,returnType:r,alias:i}]of Object.entries(this.exports)){const s=this[i??e];t[`_${e}`]=this.exportFunction(s,n,r)}return t}importFunctions(t){for(const[e,{argType:n,returnType:r}]of Object.entries(this.imports)){const i=t[e];if(!i)throw new Error(`Unable to import function: ${e}`);this[e]=this.importFunction(i,n,r)}}async instantiateWebAssembly(t){const e=await t;this.hasCodeSource=!0;const n={env:this.exportFunctions(),wasi_snapshot_preview1:this.getWASIImport()};return"Response"===e[Symbol.toStringTag]?WebAssembly.instantiateStreaming(e,n):WebAssembly.instantiate(e,n)}loadModule(t){return this.initPromise=(async()=>{const{instance:e}=await this.instantiateWebAssembly(t),{memory:n,_initialize:r}=e.exports;this.importFunctions(e.exports),this.trackInstance(e),this.customWASI?.initialize?.(e),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=n})()}trackInstance(t){const e=new WeakRef(t);Object.defineProperty(this,"released",{get:()=>!e.deref(),enumerable:!0})}linkVariables(t){this.initPromise&&(this.initPromise=this.initPromise.then((()=>super.linkVariables(t))))}getMemoryOffset(t){return t}recreateAddress(t){return t}invokeThunk(t,e){return this.runThunk?this.invokeThunkForReal(t,e):this.initPromise.then((()=>this.invokeThunkForReal(t,e)))}invokeThunkForReal(t,e){try{this.startContext(),e[kt]&&this.updatePointerAddresses(e);const n=this.getShadowAddress(e),r=e[Ft],i=r?this.getShadowAddress(r):0;this.updateShadows();const s=r?this.runVariadicThunk(t,n,i,r.length):this.runThunk(t,n);if(this.updateShadowTargets(),e[kt]&&this.updatePointerTargets(e),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&(this.flushStdout(),this.flushConsole()),s)throw new L(s);return e.retval}catch(t){if(!(t instanceof B&&0===t.code))throw t}}getWASIImport(){if(this.customWASI)return this.customWASI.wasiImport;{const t=38,e=8,n=()=>t;return{args_get:n,args_sizes_get:n,clock_res_get:n,clock_time_get:n,environ_get:n,environ_sizes_get:n,fd_advise:n,fd_allocate:n,fd_close:n,fd_datasync:n,fd_pread:n,fd_pwrite:n,fd_read:n,fd_readdir:n,fd_renumber:n,fd_seek:n,fd_sync:n,fd_tell:n,fd_write:(e,n,r,i)=>{if(1===e||2===e){const t=new DataView(this.memory.buffer);let e=0;for(let i=0,s=n;i<r;i++,s+=8){const n=t.getUint32(s,!0),r=t.getUint32(s+4,!0);if(r>0){const t=new DataView(this.memory.buffer,n,r);this.writeToConsole(t),e+=r}}return t.setUint32(i,e,!0),0}return t},fd_fdstat_get:n,fd_fdstat_set_flags:n,fd_fdstat_set_rights:n,fd_filestat_get:n,fd_filestat_set_size:n,fd_filestat_set_times:n,fd_prestat_get:()=>e,fd_prestat_dir_name:n,path_create_directory:n,path_filestat_get:n,path_filestat_set_times:n,path_link:n,path_open:n,path_readlink:n,path_remove_directory:n,path_rename:n,path_symlink:n,path_unlink_file:n,poll_oneoff:n,proc_exit:t=>{throw new B(t)},random_get:(t,e)=>{const n=new DataView(this.memory.buffer,t,e);for(let t=0;t<e;t++)n.setUint8(t,Math.floor(256*Math.random()));return 0},sched_yield:n,sock_accept:n,sock_recv:n,sock_send:n,sock_shutdown:n}}}}function gr(t){return new pr}}}]);