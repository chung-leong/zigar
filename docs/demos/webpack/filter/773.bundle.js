"use strict";(self.webpackChunkfilter=self.webpackChunkfilter||[]).push([[773],{773:(t,e,n)=>{n.d(e,{Dj:()=>Jn,Ig:()=>qn,MO:()=>ir,N7:()=>Zn,Nq:()=>Bn,Rc:()=>Hn,TJ:()=>Wn,aX:()=>ae,dj:()=>oe,h_:()=>Nn,pc:()=>Ht,s4:()=>se,wL:()=>ce,yI:()=>ie,yZ:()=>Xn,z3:()=>Gn,z7:()=>Rn});const r={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11},i={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enum:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17};function s(t){const{type:e,bitSize:n,byteSize:i}=t;return e===r.Int?`${n<=32?"":"Big"}Int${n}`:e===r.Uint?`${n<=32?"":"Big"}Uint${n}`:e===r.Float?`Float${n}`:e===r.Bool?"Bool"+(void 0!==i?8*i:1):e===r.Void?"Null":void 0}function o({type:t,bitSize:e}){return t===r.Int||t===r.Uint?e<=32?Number:BigInt:t===r.Float?Number:t===r.Bool?Boolean:void 0}function c(t){const e=o(t);if(e)return typeof e(0)}function a({bitOffset:t,bitSize:e,byteSize:n}){return!(void 0===n&&(7&t||7&e)&&0!==e)}function l(t){return"object"==typeof t&&"string"==typeof t.error&&1===Object.keys(t).length}class u extends TypeError{constructor(t){const{name:e}=t;super(`An initializer must be provided to the constructor of ${e}, even when the intended value is undefined`)}}class f extends TypeError{constructor(t,e,n=null){const{name:r,type:s,byteSize:o}=t,c=e.byteLength,a=1!==o?"s":"";let l;l=s!==i.Slice||n?`${r} has ${s===i.Slice?n.length*o:o} byte${a}, received ${c}`:`${r} has elements that are ${o} byte${a} in length, received ${c}`,super(l)}}class h extends TypeError{constructor(t){const{type:e,byteSize:n,typedArray:r}=t,s=1!==n?"s":"",o=["ArrayBuffer","DataView"].map(W);let c;r&&o.push(W(r.name)),c=e===i.Slice?`Expecting ${J(o)} that can accommodate items ${n} byte${s} in length`:`Expecting ${J(o)} that is ${n} byte${s} in length`,super(c)}}class y extends TypeError{constructor(t,e){const{name:n}=t;let r;r="number"==typeof e||"bigint"==typeof e?`Value given does not correspond to an item of enum ${n}: ${e}`:`Enum item of the type ${n} expected, received ${e}`,super(r)}}class d extends TypeError{constructor(t,e){const{name:n}=t,r=typeof e;let i;"string"===r||"number"===r||l(e)?(l(e)&&(e=`{ error: ${JSON.stringify(e.error)} }`),i=`Error ${r} does not corresponds to any error in error set ${n}: ${e}`):i=`Error of the type ${n} expected, received ${e}`,super(i)}}class b extends TypeError{constructor(t){const{name:e}=t;super(`Error given is not a part of error set ${e}`)}}TypeError,TypeError,TypeError;class g extends TypeError{constructor(t,e,n){const{name:r}=t,i=[];if(Array.isArray(e))for(const t of e)i.push(W(t));else i.push(W(e));const s=N(n);super(`${r} expects ${J(i)} as argument, received ${s}`)}}class p extends g{constructor(t,e,n=!1){const{instance:{members:[r]},type:s,typedArray:o}=t,a=[],l=c(r);if(l){let t;switch(r.structure?.type){case i.Enum:t="enum item";break;case i.ErrorSet:t="error";break;default:t=l}a.push(`array of ${t}s`)}else a.push("array of objects");o&&a.push(o.name),s===i.Slice&&n&&a.push("length"),super(t,a.join(" or "),e)}}class m extends TypeError{constructor(t,e,n){const{name:r,length:i,instance:{members:[s]}}=t,{structure:{constructor:o}}=s,{length:c,constructor:a}=n,l=e?.length??i,u=1!==l?"s":"";let f;f=a===o?"only a single one":a.child===o?`a slice/array that has ${c}`:`${c} initializer${c>1?"s":""}`,super(`${r} has ${l} element${u}, received ${f}`)}}class v extends TypeError{constructor(t,e){const{name:n}=t;super(`Missing initializers for ${n}: ${e.join(", ")}`)}}class w extends TypeError{constructor(t,e){const{name:n,instance:{members:r}}=t;let i;i=r.find((t=>t.name===e))?`Comptime value cannot be changed: ${e}`:`${n} does not have a property with that name: ${e}`,super(i)}}class S extends Error{constructor(t,e,n){super(`${t}() expects ${e} argument${1!==e?"s":""}, received ${n}`)}}class x extends TypeError{constructor(t){super("Non-slice pointers can only be created with the help of the new operator")}}class T extends TypeError{constructor(t,e){const{name:n}=t,{constructor:{name:r}}=e;super(`Conversion of ${r} to ${n} requires an explicit cast`)}}class A extends TypeError{constructor(t,e,n,r){const{name:i}=t;super(`${i} expects the sentinel value ${e} at ${r-1}, found at ${n}`)}}class O extends TypeError{constructor(t,e,n){const{name:r}=t;super(`${r} expects the sentinel value ${e} at ${n-1}`)}}class I extends TypeError{constructor(t,e){super(`Unable to simultaneously align memory to ${e}-byte and ${t}-byte boundary`)}}class $ extends TypeError{constructor(t,e){const n=N(e);super(`Expected ${W(t)}, received ${n}`)}}TypeError;class E extends TypeError{constructor(){super("Null pointer")}}class V extends TypeError{constructor(t,e){const{name:n}=t;let r;if(null!=e){const t=typeof e,n="object"===t&&e.constructor!==Object?`${e.constructor.name} object`:t;r=`${R(n)} ${n}`}else r=e+"";super(`${n} cannot point to ${r}`)}}class M extends TypeError{constructor(t,e){super("Pointers in fixed memory cannot point to garbage-collected object")}}class j extends TypeError{constructor(t,e){super(`${s(t)} cannot represent the value given: ${e}`)}}class P extends RangeError{constructor(t,e){const{name:n}=t;super(`Index exceeds the size of ${n??"array"}: ${e}`)}}TypeError;class _ extends TypeError{constructor(t){const{name:e,structure:{name:{struct:n}}}=t;super(`Unable to create ${n} as it is not situated on a byte boundary: ${e}`)}}class z extends TypeError{constructor(){super("Unable to modify read-only object")}}class F extends TypeError{constructor(t){const{name:e}=t;super(`${e} cannot point to a read-only object`)}}TypeError,TypeError;class k extends Error{constructor(t){super(B(t))}}class U extends k{constructor(t){super("Program exited"),this.code=t}}function C(t,e,n,r){const i=(0!==e?"..., ":"")+`args[${e}]`+(e!==n-1?", ...":""),s=Object.create(r.constructor.prototype);return s.message=`${t}(${i}): ${r.message}`,s.stack=r.stack,s}function L(t,e,n){return n instanceof RangeError&&!(n instanceof P)&&(n=new P(t,e)),n}function D(){throw new z}function B(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,((t,e,n)=>1===e.length?` ${e.toLocaleLowerCase()}${n}`:n?` ${e.substring(0,e.length-1)} ${e.charAt(e.length-1).toLocaleLowerCase()}${n}`:` ${e}`)).trimStart()}catch(t){}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function N(t){const e=typeof t;let n;return n="object"===e?t?Object.prototype.toString.call(t):"null":e,W(n)}function W(t){return`${R(t)} ${t}`}function R(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function J(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}const q=Symbol("memory"),G=Symbol("slots"),H=Symbol("parent"),X=Symbol("name"),Z=Symbol("type"),K=Symbol("tuple"),Y=Symbol("class"),Q=Symbol("tag"),tt=Symbol("props"),et=Symbol("getter"),nt=Symbol("setter"),rt=Symbol("elementGetter"),it=Symbol("elementSetter"),st=Symbol("addressGetter"),ot=Symbol("addressSetter"),ct=Symbol("targetGetter"),at=Symbol("targetSetter"),lt=Symbol("entriesGetter"),ut=Symbol("fixedLocation"),ft=(Symbol("propGetters"),Symbol("propSetters")),ht=Symbol("writeDisabler"),yt=Symbol("allKeys"),dt=Symbol("length"),bt=Symbol("proxy"),gt=Symbol("compat"),pt=Symbol("size"),mt=Symbol("align"),vt=Symbol("array"),wt=Symbol("pointer"),St=Symbol("constTarget"),xt=Symbol("constProxy"),Tt=Symbol("copier"),At=Symbol("resetter"),Ot=Symbol("vivificator"),It=Symbol("pointerVisitor"),$t=Symbol("environment"),Et=Symbol("attributes"),Vt=Symbol("more");function Mt(t){return function(){const e=this[q];this[q]=null,this[G]&&(this[G]={}),t.releaseFixedView(e)}}function jt(t,e,n){if(t+e<=8){const r=2**e-1;if(n)return function(e,n,i){const s=n.getUint8(i)>>t&r;e.setUint8(0,s)};{const e=255^r<<t;return function(n,i,s){const o=i.getUint8(0),c=n.getUint8(s)&e|(o&r)<<t;n.setUint8(s,c)}}}{const r=8-t,i=2**r-1;if(n){const n=2**(e%8)-1;return function(s,o,c){let a,l=c,u=0,f=o.getUint8(l++),h=f>>t&i,y=r,d=e;do{d>y&&(f=o.getUint8(l++),h|=f<<y),a=d>=8?255&h:h&n,s.setUint8(u++,a),h>>=8,d-=8}while(d>0)}}{const n=2**((e-r)%8)-1,s=255^i<<t,o=255^n;return function(r,i,c){let a,l,u=0,f=c,h=r.getUint8(f),y=h&s,d=t,b=e+d;do{b>d&&(a=i.getUint8(u++),y|=a<<d,d+=8),b>=8?l=255&y:(h=r.getUint8(f),l=h&o|y&n),r.setUint8(f++,l),y>>=8,d-=8,b-=8}while(b>0)}}}}function Pt(t,e=!1){const n=_t(t,e);return function(t){Jt.call(this),Jt.call(t);const e=t[q],r=this[q];n(r,e)}}function _t(t,e=!1){if(!e){const e=zt[t];if(e)return e}return 7&t?3&t?1&t?Ft:kt:Ut:Ct}const zt={1:function(t,e){t.setInt8(0,e.getInt8(0))},2:function(t,e){t.setInt16(0,e.getInt16(0,!0),!0)},4:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0)},8:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)},16:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)},32:function(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}};function Ft(t,e){for(let n=0,r=t.byteLength;n<r;n++)t.setInt8(n,e.getInt8(n))}function kt(t,e){for(let n=0,r=t.byteLength;n<r;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function Ut(t,e){for(let n=0,r=t.byteLength;n<r;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function Ct(t,e){for(let n=0,r=t.byteLength;n<r;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function Lt(t,e){const n=function(t){const e=Dt[t];return e||(7&t?3&t?1&t?Bt:Nt:Wt:Rt)}(e);return function(){Jt.call(this);const r=this[q];n(r,t,e)}}const Dt={1:function(t,e){t.setInt8(e,0)},2:function(t,e){t.setInt16(e,0,!0)},4:function(t,e){t.setInt32(e,0,!0)},8:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)},16:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)},32:function(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}};function Bt(t,e,n){for(let r=e,i=e+n;r<i;r++)t.setInt8(r,0)}function Nt(t,e,n){for(let r=e,i=e+n;r<i;r+=2)t.setInt16(r,0,!0)}function Wt(t,e,n){for(let r=e,i=e+n;r<i;r+=4)t.setInt32(r,0,!0)}function Rt(t,e,n){for(let r=e,i=e+n;r<i;r+=8)t.setInt32(r,0,!0),t.setInt32(r+4,0,!0)}function Jt(){const t=this[q],e=t[q];if(!e||0!==t.buffer.byteLength)return!1;const{memory:n,address:r,len:i}=e,s=new DataView(n.buffer,r,i);return s[q]=e,this[q]=s,!0}function qt(t,e){return function(t,e,n){const{type:i,bitOffset:c,bitSize:l,structure:u}=e,f=7&c,h=s(e),y=a(e)?"":`Bit${f}`,d=i===r.Int||i===r.Uint;let b=`${t}${h}${y}`,g=!1,p=b;if(d&&64===l){const t=u?.name;"usize"!==t&&"isize"!==t||(b+="Size",g=!0)}let m=ne[b];if(!m){if(d&&"set"===t){const t=o(e),r=n(p);m=function(e,n,i){r.call(this,e,t(n),i)}}else if(g&&"get"===t){const t=n(p),e=BigInt(Number.MIN_SAFE_INTEGER),r=BigInt(Number.MAX_SAFE_INTEGER);m=function(n,i){const s=t.call(this,n,i);return e<=s&&s<=r?Number(s):s}}else m=n(b);m&&m.name!==b&&Object.defineProperty(m,"name",{value:b,configurable:!0,writable:!1}),ne[b]=m}return m}(t,e,(n=>DataView.prototype[n]?DataView.prototype[n]:function(t,e){return(0,Gt[e.type])(t,e)}(t,e)))}const Gt={};function Ht(){Gt[r.Uint]=Xt}function Xt(t,e){return a(e)?function(t,e){const{bitSize:n,byteSize:r}=e;if(n<64){const i=s({...e,bitSize:8*r}),o=DataView.prototype[`get${i}`],c=DataView.prototype[`set${i}`],a=n<=32?2**n-1:2n**BigInt(n)-1n;return"get"===t?function(t,e){return o.call(this,t,e)&a}:function(t,e,n){const r=e&a;c.call(this,t,r,n)}}{const{get:e,set:r}=function(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,r=Math.ceil(t/64);return{get:function(t,n){let i=0n;if(n)for(let s=0,o=t+8*(r-1);s<r;s++,o-=8)i=i<<64n|e.call(this,o,n);else for(let s=0,o=t;s<r;s++,o+=8)i=i<<64n|e.call(this,o,n);return i},set:function(e,i,s){let o=i;const c=0xFFFFFFFFFFFFFFFFn;if(s)for(let t=0,i=e;t<r;t++,i+=8){const t=o&c;n.call(this,i,t,s),o>>=64n}else{o<<=BigInt(64*r-t);for(let t=0,i=e+8*(r-1);t<r;t++,i-=8){const t=o&c;n.call(this,i,t,s),o>>=64n}}return o}}}(n),i=2n**BigInt(n)-1n;return"get"===t?function(t,n){return e.call(this,t,n)&i}:function(t,e,n){const s=e&i;r.call(this,t,s,n)}}}(t,e):function(t,e){const{bitSize:n,bitOffset:r}=e,i=7&r;if(i+n<=8){const e=DataView.prototype.setUint8,r=DataView.prototype.getUint8,s=2**n-1;if("get"===t)return function(t){return r.call(this,t)>>>i&s};{const t=255^s<<i;return function(n,o){const c=r.call(this,n)&t|(o&s)<<i;e.call(this,n,c)}}}return function(t,e){const{bitSize:n,bitOffset:r}=e,i=7&r,s=[1,2,4,8].find((t=>8*t>=n))??64*Math.ceil(n/64),o=new DataView(new ArrayBuffer(s));if("get"===t){const t=qt("get",{...e,byteSize:s}),r=jt(i,n,!0);return function(e,n){return r(o,this,e),t.call(o,0,n)}}{const t=qt("set",{...e,byteSize:s}),r=jt(i,n,!1);return function(e,n,i){t.call(o,0,n,i),r(this,o,e)}}}(t,e)}(t,e)}function Zt(t,e,n){const{type:r,byteSize:s,typedArray:o}=t;let c;const a=e?.[Symbol.toStringTag];if("DataView"===a)c=e;else if("ArrayBuffer"===a||"SharedArrayBuffer"===a)c=n.obtainView(e,0,e.byteLength);else if(o&&a===o.name||"Uint8ClampedArray"===a&&o===Uint8Array)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if("Uint8Array"===a&&"function"==typeof Buffer&&e instanceof Buffer)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const n=e?.[q];if(n){const{constructor:o,instance:{members:[c]}}=t;if(e instanceof o)return n;if(r===i.Array||r===i.Slice||r===i.Vector){const{byteSize:o,structure:{constructor:a}}=c,l=Qt(e,a);if(void 0!==l){if(r===i.Slice||l*o===s)return n;throw new m(t,null,e)}}}}return c&&void 0!==s&&Kt(c,t),c}function Kt(t,e){const{byteSize:n,type:r}=e;if(r===i.Slice?t.byteLength%n!=0:t.byteLength!==n)throw new f(e,t)}function Yt(t,e,n,r,s){const{byteSize:o,type:c,sentinel:a}=e,l=c===i.Slice;if(this[q]){const n=l?o*this.length:o;if(t.byteLength!==n)throw new f(e,t,this);const r={[q]:t};a?.validateData(r,this.length),this[Tt](r)}else{const{shapeDefiner:i}=s;Kt(t,e);const c=t.byteLength/o,l={[q]:t};a?.validateData(l,c),r&&(n=!0),i.call(this,n?null:t,c,r),n&&this[Tt](l)}}function Qt(t,e){const{constructor:n}=t;return n===e?1:n.child===e?t.length:void 0}function te(t){const{type:e,byteSize:n}=t;if(e===r.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===r.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===r.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===r.Object)return t.structure.typedArray;return null}function ee(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),e!==Uint8Array&&e!==Int8Array||(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),e===Uint8Array&&n.push("Uint8ClampedArray"))),n}const ne={};const re={};function ie(){re[r.Uint]=fe}function se(){re[r.Float]=he}function oe(){re[r.Object]=we}function ce(){re[r.Type]=xe}function ae(){re[r.Comptime]=Te}const le={};function ue(t,e){return(0,re[t.type])(t,e)}function fe(t,e){return function(t,e){const{structure:n}=e,r=le[n?.type];return r?r(t,n):t}(Ae(t,e,function(t,e){return function(n,i){const{runtimeSafety:s=!0}=t,o=e(n,i);if(s&&"set"===n){const{min:t,max:e}=function(t){const{type:e,bitSize:n}=t,i=e===r.Int;let s=i?n-1:n;return n<=32?{min:i?-(2**s):0,max:2**s-1}:(s=BigInt(s),{min:i?-(2n**s):0n,max:2n**s-1n})}(i);return function(n,r,s){if(r<t||r>e)throw new j(i,r);o.call(this,n,r,s)}}return o}}(e,qt)),t)}function he(t,e){return Ae(t,e,qt)}function ye(t,e){const n=function(t){const{constructor:n}=e,r=n(t);if(!r)throw new y(e,t);return r};return{get:0===t.get.length?function(e){const r=t.get.call(this);return"number"===e?r:n(r)}:function(e){const r=t.get.call(this,e);return n(r)},set:1===t.set.length?function(e,r){"number"!==r&&(e=n(e)[Symbol.toPrimitive]()),t.set.call(this,e)}:function(e,r){const i=n(r);t.set.call(this,e,i[Symbol.toPrimitive]())}}}function de(t,e){const n=function(t){const{constructor:n}=e,r=n(t);if(!r)throw t instanceof Error?new b(e):new d(e,t);return r};return{get:0===t.get.length?function(e){const r=t.get.call(this);return"number"===e?r:n(r)}:function(e){const r=t.get.call(this,e);return n(r)},set:1===t.set.length?function(e,r){if("number"!==r){const t=n(e);e=Number(t)}t.set.call(this,e)}:function(e,r){const i=n(r);r=Number(i),t.set.call(this,e,r)}}}function be(t){switch(t.type){case i.Primitive:case i.ErrorUnion:case i.Optional:case i.Enum:case i.ErrorSet:return!0;default:return!1}}function ge(t){return(this[G][t]??this[Ot](t))[et]()}function pe(t){return this[G][t]??this[Ot](t)}function me(t,e){(this[G][t]??this[Ot](t))[nt](e)}function ve(t,{get:e,set:n}){return void 0!==t?{get:function(){return e.call(this,t)},set:n?function(e){return n.call(this,t,e)}:void 0}:{get:e,set:n}}function we(t,e){const{structure:n,slot:r}=t;return ve(r,{get:be(n)?ge:pe,set:me})}function Se(t){const e=this[G][t];return e?.constructor}function xe(t,e){const{slot:n}=t;return ve(n,{get:Se})}function Te(t,e){const{slot:n,structure:r}=t;return ve(n,{get:be(r)?ge:pe})}function Ae(t,e,n){const{littleEndian:r=!0}=e,{bitOffset:i,byteSize:s}=t,o=n("get",t),c=n("set",t);if(void 0!==i){const t=i>>3;return{get:function(){try{return o.call(this[q],t,r)}catch(e){if(e instanceof TypeError&&Jt.call(this))return o.call(this[q],t,r);throw e}},set:function(e){try{return c.call(this[q],t,e,r)}catch(n){if(n instanceof TypeError&&Jt.call(this))return c.call(this[q],t,e,r);throw n}}}}return{get:function(e){try{return o.call(this[q],e*s,r)}catch(n){if(n instanceof TypeError&&Jt.call(this))return o.call(this[q],e*s,r);throw L(t,e,n)}},set:function(e,n){try{return c.call(this[q],e*s,n,r)}catch(i){if(i instanceof TypeError&&Jt.call(this))return c.call(this[q],e*s,n,r);throw L(t,e,i)}}}}function Oe(t,e){for(const[n,r]of Object.entries(e))if(r){const{set:e,get:i,value:s,enumerable:o,configurable:c=!0,writable:a=!0}=r;Object.defineProperty(t,n,i?{get:i,set:e,configurable:c,enumerable:o}:{value:s,configurable:c,enumerable:o,writable:a})}for(const n of Object.getOwnPropertySymbols(e)){const r=e[n];r&&Object.defineProperty(t,n,r)}}function Ie(t,e,n){const r={};for(const[t,n]of Object.entries(e))n?.set&&"$"!==t&&(r[t]=n.set);const{get:i,set:s}=e.$;return Oe(t.prototype,{[yt]:{value:Object.keys(r)},[nt]:{value:s},[et]:{value:i},[ft]:{value:r},[St]:{value:null},...e}),Oe(t,n),t}function $e(){const t=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[e,n]of Object.entries(t))n.set&&(n.set=D,Object.defineProperty(this,e,n));Object.defineProperty(this,nt,{value:D}),Object.defineProperty(this,St,{value:this})}function Ee(t,e,n){const{byteSize:i,align:s,instance:{members:o,template:c},hasPointer:a}=t,{modifier:l,initializer:f,finalizer:y,alternateCaster:d,shapeDefiner:b}=e,g=function(t){for(const{type:e}of t)switch(e){case r.Object:case r.Comptime:case r.Type:case r.Literal:return!0}return!1}(o);let p;if(c?.[G]){const t=o.filter((t=>function({type:t}){switch(t){case r.Type:case r.Comptime:case r.Literal:return!0;default:return!1}}(t)));t.length>0&&(p=t.map((t=>t.slot)))}const m=new Pe,v=function(e,r={}){const{fixed:o=!1}=r,a=this instanceof v;let w,S;if(a){if(0===arguments.length)throw new u(t);w=this,g&&(w[G]={}),b?(f.call(w,e,o),S=w[q]):w[q]=S=n.allocateMemory(i,s,o)}else{if(d&&(w=d.call(this,e,r),!1!==w))return w;if(S=function(t,e,n){const r=Zt(t,e,n);if(!r)throw new h(t);return r}(t,e,n),w=m.find(S))return w;w=Object.create(v.prototype),b?Yt.call(w,S,t,!1,!1,{shapeDefiner:b}):w[q]=S,g&&(w[G]={})}if(p)for(const t of p)w[G][t]=c[G][t];return l&&l.call(w),a&&(b||f.call(w,e)),y&&(w=y.call(w)),m.save(S,w)};return v}function Ve({source:t}){const e=t[G][0];e&&this[at](e)}function Me(t){const{instance:{template:e}}=t;return function(n,r){const i=Object.keys(n),s=this[ft],o=this[yt];for(const e of i)if(!(e in s))throw new w(t,e);let c=0,a=0,l=0,u=0;for(const t of o){const e=s[t];e.special?t in n&&u++:(c++,t in n?a++:e.required&&l++)}if(0!==l&&0===u){const e=o.filter((t=>s[t].required&&!(t in n)));throw new v(t,e)}if(u+a>i.length)for(const t of o)t in n&&(i.includes(t)||i.push(t));a<c&&0===u&&e&&(e[q]&&this[Tt](e),this[It]?.(Ve,{vivificate:!0,source:e}));for(const t of i)s[t].call(this,n[t],r);return i.length}}function je(){return this}class Pe{map=new WeakMap;find(t){return this.map.get(t)}save(t,e){return this.map.set(t,e),e}}const _e={},ze={};function Fe(t,e="utf-8"){let n,r=_e[e];if(r||(r=_e[e]=new TextDecoder(e)),Array.isArray(t))if(1===t.length)n=t[0];else{let e=0;for(const n of t)e+=n.length;const{constructor:r}=t[0];n=new r(e);let i=0;for(const e of t)n.set(e,i),i+=e.length}else n=t;return r.decode(n)}function ke(){return De(this,!1)}function Ue(){return De(this,!0)}const Ce=BigInt(Number.MAX_SAFE_INTEGER),Le=BigInt(Number.MIN_SAFE_INTEGER);function De(t,e){const n=e?"return":"throw",r=new Map,s=function(t){const o="function"==typeof t?i.Struct:t?.constructor?.[Z];if(void 0===o){if(e){if("bigint"==typeof t&&Le<=t&&t<=Ce)return Number(t);if(t instanceof Error)return{error:t.message}}return t}let c=r.get(t);if(void 0===c){let e;switch(o){case i.Struct:case i.PackedStruct:case i.ExternStruct:case i.TaggedUnion:case i.BareUnion:case i.ExternUnion:e=t[lt]?.({error:n}),c=t.constructor[K]?[]:{};break;case i.Array:case i.Vector:case i.Slice:e=t[lt]?.({error:n}),c=[];break;case i.Pointer:try{c=t["*"]}catch(t){c=Symbol.for("inaccessible")}break;case i.Enum:c=Be((()=>String(t)),{error:n});break;case i.Opaque:c={};break;default:c=Be((()=>t.$),{error:n})}if(c=s(c),r.set(t,c),e)for(const[t,n]of e)c[t]=s(n)}return c};return s(t)}function Be(t,e={}){const{error:n="throw"}=e;try{return t()}catch(t){if("return"===n)return t;throw t}}function Ne(t,e={}){return qe({get(){return Jt.call(this),this[q]},set(n,r){!function(t){if("DataView"!==t?.[Symbol.toStringTag])throw new $("a DataView",t)}(n),Yt.call(this,n,t,!0,r,e)}})}function We(t,e={}){return qe({get(){return function(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}(this.dataView)},set(n,r){if("string"!=typeof n)throw new $("string",n);const i=function(t){const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<n.byteLength;t++)n[t]=e.charCodeAt(t);return new DataView(n.buffer)}(n);Yt.call(this,i,t,!1,r,e)}})}function Re(t,e={}){const{sentinel:n,instance:{members:r}}=t,{byteSize:i}=r[0];return qe({get(){const t=this.dataView,e=Fe(new(1===i?Int8Array:Int16Array)(t.buffer,t.byteOffset,this.length),"utf-"+8*i);return void 0===n?.value?e:e.slice(0,-1)},set(r,s){if("string"!=typeof r)throw new $("a string",r);void 0!==n?.value&&r.charCodeAt(r.length-1)!==n.value&&(r+=String.fromCharCode(n.value));const o=function(t,e="utf-8"){if("utf-16"===e){const{length:e}=t,n=new Uint16Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}{let n=ze[e];return n||(n=ze[e]=new TextEncoder),n.encode(t)}}(r,"utf-"+8*i),c=new DataView(o.buffer);Yt.call(this,c,t,!1,s,e)}})}function Je(t,e={}){const{typedArray:n}=t;return qe({get(){const t=this.dataView,e=t.byteLength/n.BYTES_PER_ELEMENT;return new n(t.buffer,t.byteOffset,e)},set(r,i){if(!function(t,e){const n=t?.[Symbol.toStringTag];return!!e&&n===e.name}(r,n))throw new $(n.name,r);const s=new DataView(r.buffer,r.byteOffset,r.byteLength);Yt.call(this,s,t,!0,i,e)}})}function qe({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}let Ge,He;function Xe(t,e){const{name:n,byteSize:r,align:i,instance:{members:[s]}}=t;if(He||(He=class extends Ke{},Ge=Xe({...t,name:"anyerror"},e)),Ge&&"anyerror"===n)return t.constructor=Ge,t.typedArray=te(s),Ge;const o=He,{get:c,set:a}=ue(s,e),u=["string","number"],f=Me(t),h=t.constructor=Ee(t,{initializer:function(e){if(e instanceof h[Y])a.call(this,e);else if(e&&"object"==typeof e&&!l(e)){if(0===f.call(this,e))throw new g(t,u,e)}else void 0!==e&&a.call(this,e)},alternateCaster:function(n){if("number"==typeof n||"string"==typeof n)return h[n];if(n instanceof h[Y])return h[Number(n)];if(l(n))return h[`Error: ${n.error}`];if(Zt(t,n,e))return!1;throw new g(t,u,n)}},e),y=t.typedArray=te(s),d={$:{get:c,set:a},dataView:Ne(t),base64:We(t),typedArray:y&&Je(t),valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Tt]:{value:Pt(r)},[ht]:{value:$e}},b={[mt]:{value:i},[pt]:{value:r},[Y]:{value:o},[tt]:"anyerror"===n?{value:[]}:void 0,[Z]:{value:t.type}};return Ie(h,d,b)}function Ze(t,e,n){const r=n[et]("number");let i=Ge[r];i||(i=new(0,t[Y])(e,r));const s=String(i),o={[r]:{value:i},[s]:{value:i},[e]:{value:i}};Oe(t,o),Oe(Ge,o),Ge[tt].push(e)}class Ke extends Error{constructor(t,e){super(B(t)),this.number=e,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}function Ye(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function Qe(t,e){const{byteSize:n,align:r,instance:{members:[i]}}=t,{get:s,set:o}=ue(i,e),c=["string","number","tagged union"],a=Me(t),l=t.constructor=Ee(t,{initializer:function(e){if(e&&"object"==typeof e){if(0===a.call(this,e))throw new g(t,c,e)}else void 0!==e&&o.call(this,e)},alternateCaster:function(n){if("string"==typeof n||"number"==typeof n||"bigint"==typeof n){let t=l[n];return t||l[Vt]&&"string"!=typeof n&&(t=new l(void 0),o.call(t,n,"number"),tn(l,`${n}`,t)),t}if(n instanceof l)return n;if(n?.[Q]instanceof l)return n[Q];if(Zt(t,n,e))return!1;throw new g(t,c,n)}},e),u=t.typedArray=te(i),f={$:{get:s,set:o},dataView:Ne(t),base64:We(t),typedArray:u&&Je(t),valueOf:{value:ke},toString:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Symbol.toPrimitive]:{value:function(t){switch(t){case"string":case"default":return this.$[X];default:return s.call(this,"number")}}},[Tt]:{value:Pt(n)},[ht]:{value:$e}},h={[mt]:{value:r},[pt]:{value:n},[Z]:{value:t.type}};return Ie(l,f,h)}function tn(t,e,n){if(void 0!==e){if(n instanceof t){Oe(n,{[X]:{value:e}});const r=n[Symbol.toPrimitive]();Oe(t,{[r]:{value:n},[e]:{value:n}})}}else Oe(t,{[Vt]:{value:!0}})}function en(t,e){const{byteSize:n,align:s,instance:{members:[o]},isConst:c}=t,{runtimeSafety:a=!0}=e,{structure:l}=o,{type:u,sentinel:f,length:h}=l,y=u===i.Slice&&void 0===l.length&&!f,d=y?n/2:n,{get:b,set:g}=ue({type:r.Uint,bitOffset:0,bitSize:8*d,byteSize:d,structure:{byteSize:d}},e),{get:p,set:m}=y?ue({type:r.Uint,bitOffset:8*d,bitSize:8*d,byteSize:d,structure:{name:"usize",byteSize:d}},e):{},v=function(){const t=this[ut];if(t){const n=this[st]();if(n.address!==t.address||n.length!==t.length){const{constructor:t}=l,r=e.findMemory(n.address,n.length,t[pt]),i=t.call($t,r);this[G][0]=i,this[ut]=n}}},w=function(){v.call(this);const t=this[G][0];if(!t)throw new E;return c?un(t):t},S=be(l)?function(){return w.call(this)[et]()}:w,A=c?D:function(t){v.call(this);const e=this[G][0];if(!e)throw new E;return e[nt](t)},O=function(n){const r=l.constructor;if(ln(n,r)){if(!c&&n.constructor.const)throw new T(t,n);n=n[G][0]}if(n instanceof r){Jt.call(n);const e=n[St];if(e){if(!c)throw new F(t);n=e}}else if(function(t,e){const n=e[gt];if(n){const e=t?.[Symbol.toStringTag];if(n.includes(e))return!0}return!(!e.child||void 0===Qt(t,e.child))}(n,r))n=r(Zt(l,n,e));else if(void 0===n||n[q]){if(void 0!==n)throw new V(t,n)}else{const t=new r(n,{fixed:e.inFixedMemory(this)});if(a&&l.typedArray){const t=n?.buffer?.[Symbol.toStringTag];"ArrayBuffer"!==t&&"SharedArrayBuffer"!==t||function(t,e){const n=W(t.typedArray.name),r=W(e.constructor.name);console.warn(`Implicitly creating ${n} from ${r}`)}(l,n)}n=t}this[at](n)},I=t.constructor=Ee(t,{initializer:O,alternateCaster:function(e,n){const r=l.constructor;if(this===$t||this===H||e instanceof I)return!1;if(ln(e,r))return new I(r(e["*"]),n);if(u===i.Slice)return new I(r(e),n);throw new x(t)},finalizer:function(){const t=u===i.Pointer?{}:fn,e=new Proxy(this,t);return Object.defineProperty(this,bt,{value:e}),e}},e),$=function({address:t,length:e}){g.call(this,t),m?.call(this,e)},j=u!=i.Slice?1:h,P={"*":{get:S,set:A},$:{get:on,set:O},valueOf:{value:ke},toJSON:{value:Ue},delete:{value:rn},[Symbol.toPrimitive]:u===i.Primitive&&{value:sn},[ct]:{value:w},[at]:{value:function(n){if(e.inFixedMemory(this)){if(!e.inFixedMemory(n))throw new M(t,n);{const t={address:e.getViewAddress(n[q]),length:y?n.length:j};$.call(this,t),this[ut]=t}}this[G][0]=n}},[st]:{value:function(){const t=b.call(this);return{address:t,length:p?p.call(this):f?t?e.findSentinel(t,f.bytes)+1:0:j}}},[ot]:{value:$},[It]:{value:an},[Tt]:{value:Pt(n)},[ut]:{value:void 0,writable:!0},[ht]:{value:nn}},_={child:{get:()=>l.constructor},const:{value:c},[mt]:{value:s},[pt]:{value:n},[Z]:{value:t.type}};return Ie(I,P,_)}function nn(){const t=this[wt],e=Object.getOwnPropertyDescriptor(t.constructor.prototype,"$");e.set=D,Object.defineProperty(t,"$",e),Object.defineProperty(t,St,{value:t})}function rn(){const t=this[G][0];t?.delete()}function sn(t){return this[G][0][Symbol.toPrimitive](t)}function on(){return this[bt]}function cn({isActive:t}){this[G][0]&&!t(this)&&(this[G][0]=void 0)}function an(t,e={}){const{source:n,isActive:r=yn,isMutable:i=yn}=e;t.call(this,{source:n,isActive:r,isMutable:i})}function ln(t,e){return t?.constructor?.child===e&&t["*"]}function un(t){let e=t[xt];return e||(Object.defineProperty(t,xt,{value:void 0,configurable:!0}),e=new Proxy(t,hn),Object.defineProperty(t,xt,{value:e})),e}const fn={get:(t,e)=>e===wt?t:e in t?t[e]:t[ct]()[e],set:(t,e,n)=>(e in t?t[e]=n:t[ct]()[e]=n,!0),deleteProperty:(t,e)=>(e in t?delete t[e]:delete t[ct]()[e],!0),has:(t,e)=>e in t||e in t[ct]()},hn={get(t,e){if(e===St)return t;{const n=t[e];return null===n?.[St]?un(n):n}},set(t,e,n){const r=t[wt];if(r&&!(e in r))return t[e]=n,!0;D()}};function yn(){return!0}function dn(t,e){const{length:n,byteSize:r,align:i,instance:{members:[s]}}=t,{bitSize:o,structure:c}=s,a={};for(let t=0,r=0;t<n;t++,r+=o){const{get:n,set:i}=ue({...s,bitOffset:r},e);a[t]={get:n,set:i,configurable:!0}}const l=Me(t),u=function(e){if(e instanceof f)this[Tt](e);else if(e?.[Symbol.iterator]){let r=e.length;if("number"!=typeof r&&(r=(e=[...e]).length),r!==n)throw new m(t,this,e);let i=0;for(const t of e)this[ft][i++].call(this,t)}else if(e&&"object"==typeof e){if(0===l.call(this,e))throw new p(t,e)}else if(void 0!==e)throw new p(t,e)},f=t.constructor=Ee(t,{initializer:u},e),h=t.typedArray=te(s),y={...a,$:{get:je,set:u},length:{value:n},dataView:Ne(t),base64:We(t),typedArray:h&&Je(t),valueOf:{value:ke},toJSON:{value:Ue},entries:{value:pn},delete:{value:Mt(t)},[Symbol.iterator]:{value:bn},[lt]:{value:pn},[Tt]:{value:Pt(r)},[ht]:{value:$e}},d={child:{get:()=>c.constructor},[gt]:{value:ee(t)},[mt]:{value:i},[pt]:{value:r},[Z]:{value:t.type}};return Ie(f,y,d)}function bn(){const t=this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=t[e],i=!1}else i=!0;return{value:r,done:i}}}}function gn(){const t=this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=[e,t[e]],i=!1}else i=!0;return{value:r,done:i}}}}function pn(){return{[Symbol.iterator]:gn.bind(this),length:this.length}}function mn(t,e){const{byteSize:n,align:i,instance:{members:s},isTuple:o,hasPointer:c}=t,a={},l=s.filter((t=>!!t.name)),u=s.find((t=>!t.name));for(const t of l){const{get:n,set:r}=ue(t,e);a[t.name]={get:n,set:r,configurable:!0,enumerable:!0},t.isRequired&&r&&(r.required=!0)}const f=u?ue(u,e):null,h=!!s.find((t=>t.type===r.Object)),y=Me(t),d=function(e){if(e instanceof b)this[Tt](e),c&&this[It](Ve,{vivificate:!0,source:e});else if(e&&"object"==typeof e)y.call(this,e);else if("number"!=typeof e&&"bigint"!=typeof e||!f){if(void 0!==e)throw new g(t,"object",e)}else f.set.call(this,e)},b=t.constructor=Ee(t,{initializer:d},e),p=f?function(t){return"string"===t?Object.prototype.toString.call(this):f.get.call(this)}:null,m=o&&s.length>0?parseInt(s[s.length-1].name)+1:0,v={$:{get:je,set:d},dataView:Ne(t),base64:We(t),length:o&&{value:m},valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},entries:o&&{value:pn},...a,[Symbol.iterator]:{value:o?bn:wn},[Symbol.toPrimitive]:f&&{value:p},[lt]:{value:o?pn:vn},[Tt]:{value:Pt(n)},[Ot]:h&&{value:xn(t)},[It]:c&&{value:Tn(t,yn)},[ht]:{value:$e},[tt]:{value:l.map((t=>t.name))}},w={[mt]:{value:i},[pt]:{value:n},[Z]:{value:t.type},[K]:{value:o}};return Ie(b,v,w)}function vn(t){return{[Symbol.iterator]:Sn.bind(this,t),length:this[tt].length}}function wn(t){return vn.call(this,t)[Symbol.iterator]()}function Sn(t){const e=this,n=this[tt];let r=0;return{next(){let i,s;if(r<n.length){const o=n[r++];i=[o,Be((()=>e[o]),t)],s=!1}else s=!0;return{value:i,done:s}}}}function xn(t){const{instance:{members:e}}=t,n={};for(const t of e.filter((t=>t.type===r.Object)))n[t.slot]=t;return function(t){const e=n[t],{bitOffset:r,byteSize:i,structure:{constructor:s}}=e,o=this[q],c=o.byteOffset+(r>>3);let a=i;if(void 0===a){if(7&r)throw new _(e);a=e.bitSize>>3}const l=new DataView(o.buffer,c,a);return this[G][t]=s.call(H,l)}}function Tn(t,e={}){const{isChildActive:n=yn,isChildMutable:r=yn}=e,{instance:{members:i}}=t,s=i.filter((t=>t.structure.hasPointer));return function(t,e={}){const{source:i,vivificate:o=!1,isActive:c=yn,isMutable:a=yn}=e,l={...e,isActive:t=>c(this)&&n.call(this,t),isMutable:t=>a(this)&&r.call(this,t)};for(const{slot:e}of s){if(i){const t=i[G]?.[e];if(!t)continue;l.source=t}const n=this[G][e]??(o?this[Ot](e):null);n&&n[It](t,l)}}}function An(t,e){const{byteSize:n,align:i,instance:{members:s},hasPointer:o,name:c}=t,a=!!s.find((t=>t.type===r.Object)),l=s.slice(0,-1).map((t=>t.name)),u=l.length,f=t.constructor=function(t,r,s){const o=e.allocateMemory(n,i);if(this[q]=o,a&&(this[G]={}),t.length!==u)throw new S(r,u-s,t.length-s);for(const[e,n]of l.entries())try{this[n]=t[e]}catch(t){throw C(r,e-s,u-s,t)}},h={};for(const t of s)h[t.name]=ue(t,e);return Oe(f.prototype,{...h,[Tt]:{value:Pt(n)},[Ot]:a&&{value:xn(t)},[It]:o&&{value:Tn(t,{isChildMutable:function(t){return t===this.retval}})}}),Oe(f,{[mt]:{value:i},[pt]:{value:n}}),f}function On(t,e){const{length:n,byteSize:i,align:s,instance:{members:[o]},hasPointer:c}=t,{get:a,set:l}=ue(o,e),u=En(o),f=Me(t),h=function(e){if(e instanceof d)this[Tt](e),c&&this[It](Ve,{vivificate:!0,source:e});else if("string"==typeof e&&u&&(e={string:e}),e?.[Symbol.iterator]){if((e=zn(e)).length!==n)throw new m(t,this,e);let r=0;for(const t of e)l.call(this,r++,t)}else if(e&&"object"==typeof e){if(0===f.call(this,e))throw new p(t,e)}else if(void 0!==e)throw new p(t,e)},y=In,d=t.constructor=Ee(t,{initializer:h,finalizer:y},e),b=t.typedArray=te(o),g=o.type===r.Object,v={$:{get:on,set:h},length:{value:n},dataView:Ne(t),base64:We(t),string:u&&Re(t),typedArray:b&&Je(t),get:{value:a},set:{value:l},entries:{value:jn},valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Symbol.iterator]:{value:Vn},[lt]:{value:jn},[Tt]:{value:Pt(i)},[Ot]:g&&{value:Pn(t)},[It]:c&&{value:_n()},[ht]:{value:$n}},w={child:{get:()=>o.structure.constructor},[gt]:{value:ee(t)},[mt]:{value:s},[pt]:{value:i},[Z]:{value:t.type}};return Ie(d,v,w)}function In(){const t=new Proxy(this,Fn);return Object.defineProperty(this,bt,{value:t}),t}function $n(){$e.call(this),Object.defineProperty(this,"set",{value:D});const t=this.get;Object.defineProperty(this,"get",{value:function(e){const n=t.call(this,e);return null===n?.[St]&&n[ht]?.(),n}})}function En(t){return t.type===r.Uint&&[8,16].includes(t.bitSize)}function Vn(){const t=this[vt]??this,e=this.length;let n=0;return{next(){let r,i;if(n<e){const e=n++;r=t.get(e),i=!1}else i=!0;return{value:r,done:i}}}}function Mn(t){const e=this[vt]??this,n=this.length;let r=0;return{next(){let i,s;if(r<n){const n=r++;i=[n,Be((()=>e.get(n)),t)],s=!1}else s=!0;return{value:i,done:s}}}}function jn(t){return{[Symbol.iterator]:Mn.bind(this,t),length:this.length}}function Pn(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:r}=e;return function(t){const{constructor:e}=r,i=this[q],s=i.byteOffset+n*t,o=new DataView(i.buffer,s,n);return this[G][t]=e.call(H,o)}}function _n(t){return function(t,e={}){const{source:n,vivificate:r=!1,isActive:i=yn,isMutable:s=yn}=e,o={...e,isActive:()=>i(this),isMutable:()=>s(this)};for(let e=0,i=this.length;e<i;e++){n&&(o.source=n?.[G][e]);const i=this[G][e]??(r?this[Ot](e):null);i&&i[It](t,o)}}}function zn(t){if("number"==typeof t.length)return t;const e=t[Symbol.iterator](),n=e.next(),r=n.value?.length;if("number"==typeof r&&"length"===Object.keys(n.value).join())return Object.assign(function*(){let t;for(;!(t=e.next()).done;)yield t.value}(),{length:r});{const t=[];let r=n;for(;!r.done;)t.push(r.value),r=e.next();return t}}const Fn={get(t,e){const n="symbol"==typeof e?0:0|e;if(0!==n||n==e)return t.get(n);switch(e){case"get":return t[rt]||(t[rt]=t.get.bind(t)),t[rt];case"set":return t[it]||(t[it]=t.set.bind(t)),t[it];case vt:return t;default:return t[e]}},set(t,e,n){const r="symbol"==typeof e?0:0|e;if(0!==r||r==e)t.set(r,n);else switch(e){case"get":t[rt]=n;break;case"set":t[it]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n="symbol"==typeof e?0:0|e;if(0!==n||n==e)return!1;switch(e){case"get":delete t[rt];break;case"set":delete t[it];break;default:delete t[e]}return!0},has(t,e){const n="symbol"==typeof e?0:0|e;return 0!==n||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(`${n}`);return e.push("length",bt),e},getOwnPropertyDescriptor(t,e){const n="symbol"==typeof e?0:0|e;return 0===n&&n!=e?Object.getOwnPropertyDescriptor(t,e):n>=0&&n<t.length?{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}:void 0}};function kn(t,e){const{byteSize:n,align:i,instance:{members:s},hasPointer:o}=t,{get:c,set:a}=ue(s[0],e),{get:u,set:f}=ue(s[1],e),h=s[0].type===r.Void,y=s[1].structure.constructor,d=function(){return!u.call(this,"number")},g=function(){this[At](),this[It]?.(cn)},p=!!s.find((t=>t.type===r.Object)),m=Me(t),v=function(e){if(e instanceof w)this[Tt](e),o&&d.call(this)&&this[It](Ve,{vivificate:!0,source:e});else if(e instanceof y[Y]&&y(e))f.call(this,e),g.call(this);else if(void 0!==e||h)try{a.call(this,e),f.call(this,0,"number")}catch(n){if(e instanceof Error)throw new b(t);if(l(e))f.call(this,e),g.call(this);else{if(!e||"object"!=typeof e)throw n;if(0===m.call(this,e))throw n}}},w=t.constructor=Ee(t,{initializer:v},e),{bitOffset:S,byteSize:x}=s[0],T={$:{get:function(){if(u.call(this,"number"))throw u.call(this);return c.call(this)},set:v},dataView:Ne(t),base64:We(t),valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Tt]:{value:Pt(n)},[At]:{value:Lt(S/8,x)},[Ot]:p&&{value:xn(t)},[It]:o&&{value:Tn(t,{isChildActive:d})},[ht]:{value:$e}},A={[mt]:{value:i},[pt]:{value:n},[Z]:{value:t.type}};return Ie(w,T,A)}function Un(t,e){const{byteSize:n,align:r,instance:{members:[i]}}=t,{get:s,set:o}=ue(i,e),a=Me(t),l=t.constructor=Ee(t,{initializer:function(e){if(e instanceof l)this[Tt](e);else if(e&&"object"==typeof e){if(0===a.call(this,e)){const n=c(i);throw new g(t,n,e)}}else void 0!==e&&o.call(this,e)}},e),u=t.typedArray=te(i),f={$:{get:s,set:o},dataView:Ne(t),base64:We(t),typedArray:u&&Je(t),valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Symbol.toPrimitive]:{value:s},[Tt]:{value:Pt(n)},[ht]:{value:$e}},h={[gt]:{value:ee(t)},[mt]:{value:r},[pt]:{value:n},[Z]:{value:t.type}};return Ie(l,f,h)}function Cn(t,e){const{align:n,instance:{members:[i]},hasPointer:s}=t,{get:o,set:c}=ue(i,e),{byteSize:a,structure:l}=i,u=function(t,e){const{runtimeSafety:n=!0}=e,{byteSize:r,instance:{members:[i,s],template:o}}=t;if(!s)return;const{get:c}=ue(s,e),a=c.call(o,0),{get:l}=ue(i,e),u=n?function(e,n,r){if(e===a&&n!==r-1)throw new A(t,e,n,r);if(e!==a&&n===r-1)throw new O(t,a,n,r)}:function(e,n,r){if(e!==a&&n===r-1)throw new O(t,a,r)},f=n?function(e,n){for(let r=0;r<n;r++){const i=l.call(e,r);if(i===a&&r!==n-1)throw new A(t,a,r,n);if(i!==a&&r===n-1)throw new O(t,a,n)}}:function(e,n){if(n*r===e[q].byteLength){const r=n-1;if(l.call(e,r)!==a)throw new O(t,a,n)}},h=o[q];return{value:a,bytes:h,validateValue:u,validateData:f}}(t,e);u&&(t.sentinel=u);const f=En(i),h=function(t,r,i=!1){t||(t=e.allocateMemory(r*a,n,i)),this[q]=t,this[dt]=r},y=function(e,n){if(n!==this[dt])throw new m(t,this,e)},d=Me(t),b=function(e,n=!1){if(e instanceof v)this[q]?y.call(this,e,e.length):h.call(this,null,e.length,n),this[Tt](e),s&&this[It](Ve,{vivificate:!0,source:e});else if("string"==typeof e&&f)b.call(this,{string:e},n);else if(e?.[Symbol.iterator]){e=zn(e),this[q]?y.call(this,e,e.length):h.call(this,null,e.length,n);let t=0;for(const n of e)u?.validateValue(n,t,e.length),c.call(this,t++,n)}else if("number"==typeof e){if(!(!this[q]&&e>=0&&isFinite(e)))throw new p(t,e,!this[q]);h.call(this,null,e)}else if(e&&"object"==typeof e){if(0===d.call(this,e,n))throw new p(t,e)}else if(void 0!==e)throw new p(t,e)},g=In,v=t.constructor=Ee(t,{initializer:b,shapeDefiner:h,finalizer:g},e),w=t.typedArray=te(i),S=i.type===r.Object,x={shapeDefiner:h},T={$:{get:on,set:b},length:{get:Ln},dataView:Ne(t,x),base64:We(t,x),string:f&&Re(t,x),typedArray:w&&Je(t,x),get:{value:o},set:{value:c},entries:{value:jn},valueOf:{value:ke},toJSON:{value:Ue},delete:{value:Mt(e)},[Symbol.iterator]:{value:Vn},[lt]:{value:jn},[Tt]:{value:Pt(a,!0)},[Ot]:S&&{value:Pn(t)},[It]:s&&{value:_n()},[ht]:{value:$n}},I={child:{get:()=>l.constructor},[gt]:{value:ee(t)},[mt]:{value:n},[pt]:{value:a},[Z]:{value:t.type}};return Ie(v,T,I)}function Ln(){return this[dt]}const Dn=Array(Object.values(i).length);function Bn(){Dn[i.Primitive]=Un}function Nn(){Dn[i.Array]=On}function Wn(){Dn[i.Struct]=mn}function Rn(){Dn[i.ArgStruct]=An}function Jn(){Dn[i.ErrorUnion]=kn}function qn(){Dn[i.ErrorSet]=Xe,le[i.ErrorSet]=de}function Gn(){Dn[i.Enum]=Qe,le[i.Enum]=ye}function Hn(){Dn[i.Pointer]=en,ie()}function Xn(){Dn[i.Slice]=Cn}function Zn(){Dn[i.Vector]=dn}class Kn{context;contextStack=[];consolePending=[];consoleTimeout=0;viewMap=new WeakMap;abandoned=!1;released=!1;littleEndian=!0;runtimeSafety=!0;comptime=!1;variables=[];imports;console=globalThis.console;startContext(){this.context&&this.contextStack.push(this.context),this.context=new Yn}endContext(){this.context=this.contextStack.pop()}allocateMemory(t,e=0,n=!1){return n?this.allocateFixedMemory(t,e):this.allocateRelocMemory(t,e)}allocateRelocMemory(t,e){return this.obtainView(new ArrayBuffer(t),0,t)}registerMemory(t,e=null,n=void 0){const{memoryList:r}=this.context,i=this.getViewAddress(t),s=tr(r,i);return r.splice(s,0,{address:i,dv:t,len:t.byteLength,targetDV:e,targetAlign:n}),i}unregisterMemory(t){const{memoryList:e}=this.context,n=tr(e,t),r=e[n-1];r?.address===t&&e.splice(n-1,1)}findMemory(t,e,n){if(function(t){return"bigint"==typeof t?0xaaaaaaaaaaaaaaaan===t:2863311530===t}(t)){if(e)return null;t=0}else if(!t&&e)return null;let r=e*(n??0);if(this.context){const{memoryList:e}=this.context,i=e[tr(e,t)-1];if(i?.address===t&&i.len===r)return i.targetDV??i.dv;if(i?.address<=t&&t<nr(i.address,i.len)){const e=Number(t-i.address),s=i.targetDV??i.dv,o=void 0===n;o&&(r=s.byteLength-e);const c=this.obtainView(s.buffer,s.byteOffset+e,r);return o&&(c[mt]=i.targetAlign),c}}return this.obtainFixedView(t,r)}getViewAddress(t){return nr(this.getBufferAddress(t.buffer),t.byteOffset)}obtainView(t,e,n){let r=this.viewMap.get(t);if(!r){const r=new DataView(t,e,n);return this.viewMap.set(t,r),r}if(r instanceof DataView){if(r.byteOffset===e&&r.byteLength===n)return r;{const e=r,n=`${e.byteOffset}:${e.byteLength}`;r={[n]:e},this.viewMap.set(t,r)}}const i=`${e}:${n}`;let s=r[i];return s||(s=r[i]=new DataView(t,e,n)),s}captureView(t,e,n){if(n){const n=this.allocateRelocMemory(e,0);return e>0&&this.copyBytes(n,t,e),n}return this.obtainFixedView(t,e)}castView(t,e,n,r){const{constructor:i,hasPointer:s}=r,o=this.captureView(t,e,n),c=i.call($t,o);return s&&this.acquirePointerTargets(c),n&&c[ht](),c}finalizeShape(t){var e;const n=(e=t.type,Dn[e])(t,this);"function"==typeof n&&(Oe(n,{name:{value:t.name,configurable:!0}}),n.prototype.hasOwnProperty(Symbol.toStringTag)||Oe(n.prototype,{[Symbol.toStringTag]:{value:t.name,configurable:!0}}))}finalizeStructure(t){!function(t,e){const{type:n,constructor:r,static:{members:s,template:o}}=t,c={};for(const t of s)c[t.name]=ue(t,e);if(Oe(r,{valueOf:{value:ke},toJSON:{value:Ue},...c,[Symbol.iterator]:{value:wn},[lt]:{value:vn},[G]:o&&{value:o[G]},[tt]:!r[tt]&&{value:s.map((t=>t.name))}}),n===i.Enum)for(const{name:t,slot:e}of s)tn(r,t,r[G][e]);else if(n===i.ErrorSet)for(const{name:t,slot:e}of s)Ze(r,t,r[G][e])}(t,this),function(t,e){const n=(t,{methods:n},r)=>{const i={},s=/^(get|set)\s+([\s\S]+)/;for(const t of n){const n=e.createCaller(t,r),o=s.exec(n.name);if(o){const e=o[1],s=o[2],c="get"===e?0:1;if(Ye(t,r)===c){let t=i[s];t||(t=i[s]={configurable:!0,enumerable:!0}),t[e]=n}}else i[n.name]={value:n,configurable:!0,writable:!0}}Oe(t,i)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}(t,this)}createCaller(t,e){const{name:n,argStruct:r,thunkId:i}=t,{constructor:s}=r,o=this;let c;return c=e?function(...t){return o.invokeThunk(i,new s([this,...t],n,1))}:function(...t){return o.invokeThunk(i,new s(t,n,0))},Object.defineProperty(c,"name",{value:n}),c}recreateStructures(t,e){Object.assign(this,e);const n=(t,e)=>{for(const[n,i]of Object.entries(e))t[n]=r(i);return t},r=t=>{const{memory:e,structure:r,actual:i}=t;if(e){if(i)return i;{const{array:i,offset:s,length:o}=e,c=this.obtainView(i.buffer,s,o),{constructor:a}=r,{reloc:l,const:u}=t,f=t.actual=a.call($t,c);return u&&f[ht]?.(),t.slots&&n(f[G],t.slots),void 0!==l&&this.variables.push({reloc:l,object:f}),f}}return r};He=Ge=void 0;const i=new Map;for(const e of t){for(const t of[e.instance,e.static])if(t.template){const e=t.template,n=t.template={};if(e.memory){const{array:t,offset:r,length:i}=e.memory;n[q]=this.obtainView(t.buffer,r,i)}if(e.slots){const t=n[G]={};i.set(t,e.slots)}}this.finalizeShape(e)}for(const[t,e]of i)n(t,e);for(const e of t)this.finalizeStructure(e)}linkVariables(t){const e=[];for(const{object:n,reloc:r}of this.variables)this.linkObject(n,r,t),n[ct]&&n[G][0]&&e.push(n);for(const t of e){const e=t[ct](),n=this.getViewAddress(e[q]),{length:r=1}=e;t[ut]={address:n,length:r}}}linkObject(t,e,n){if(this.inFixedMemory(t))return;const r=t[q],i=this.recreateAddress(e),s=this.obtainFixedView(i,r.byteLength);if(n){const e=Object.create(t.constructor.prototype);e[q]=s,e[Tt](t)}t[q]=s;const o=t=>{if(t[G])for(const e of Object.values(t[G]))if(e){const t=e[q];if(t.buffer===r.buffer){const n=t.byteOffset-r.byteOffset;e[q]=this.obtainView(s.buffer,n,t.byteLength),o(e)}}};o(t)}unlinkVariables(){for(const{object:t}of this.variables)this.unlinkObject(t)}unlinkObject(t){if(!this.inFixedMemory(t))return;const e=t[q],n=this.allocateMemory(e.byteLength),r=Object.create(t.constructor.prototype);r[q]=n,r[Tt](t),t[q]=n}releaseFunctions(){const t=()=>{throw new Error("Module was abandoned")};for(const e of Object.keys(this.imports))this[e]&&(this[e]=t)}getSpecialExports(){const t=t=>{if(void 0===t)throw new Error("Not a Zig type");return t};return{init:(...t)=>this.init(...t),abandon:()=>this.abandon(),released:()=>this.released,connect:t=>this.console=t,sizeOf:e=>t(e[pt]),alignOf:e=>t(e[mt]),typeOf:e=>function(t){for(const[e,n]of Object.entries(i))if(n===t)return e.replace(/\B[A-Z]/g,(t=>` ${t}`)).toLowerCase()}(t(e[Z]))}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(t){const{console:e}=this;try{const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength).slice(),r=n.lastIndexOf(10);if(-1===r)this.consolePending.push(n);else{const t=n.subarray(0,r),i=n.subarray(r+1),s=[...this.consolePending,t];e.log(Fe(s)),this.consolePending=i.length>0?[i]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout((()=>{e.log(Fe(this.consolePending)),this.consolePending=[]}),250))}catch(t){e.error(t)}}flushConsole(){this.consolePending.length>0&&(console.log(Fe(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(t){const e=new Map,n=new Map,r=[],i=this,s=function({isActive:t}){if(!t(this))return;const o=this[wt];if(e.get(o))return;const c=o[G][0];if(c&&(e.set(o,c),!i.inFixedMemory(c))){const t=c[q],e=n.get(t.buffer);if(e){const i=Array.isArray(e)?e:[e],s=Qn(i,t.byteOffset,(t=>t[q].byteOffset));i.splice(s,0,c),Array.isArray(e)||(n.set(t.buffer,i),r.push(i))}else n.set(t.buffer,c);c[It]?.(s)}};t[It](s);const o=this.findTargetClusters(r),c=new Map;for(const t of o)for(const e of t.targets)c.set(e,t);for(const[t,n]of e){const e=c.get(n),{length:r=1}=n;let i=this.getTargetAddress(n,e);!1===i&&(i=this.getShadowAddress(n,e)),t[ot]({address:i,length:r})}}findTargetClusters(t){const e=[];for(const n of t){let t=null,r=0,i=0,s=null;for(const o of n){const n=o[q],{byteOffset:c,byteLength:a}=n,l=c+a;let u=!0;t&&(i>c?(s||(s={targets:[t],start:r,end:i,address:void 0,misaligned:void 0},e.push(s)),s.targets.push(o),l>i?s.end=l:u=!1):s=null),u&&(t=o,r=c,i=l)}}return e}createClusterShadow(t){const{start:e,end:n,targets:r}=t;let i,s=0;for(const t of r){const e=t[q],n=e.byteOffset,r=t.constructor[mt]??e[mt];(void 0===s||r>s)&&(s=r,i=n)}const o=n-e,c=this.allocateShadowMemory(o+s,1),a=this.getViewAddress(c),l=function(t,e){let n;return n="bigint"==typeof t?~((e=BigInt(e))-1n):~(e-1),(t&n)+e}(nr(a,i-e),s),u=nr(l,e-i),f=c.byteOffset+Number(u-a),h=new DataView(c.buffer,f,o);for(const t of r){const n=t[q],r=n.byteOffset;if(r!==i){const i=t.constructor[mt]??n[mt];if(er(nr(u,r-e),i))throw new I(i,s)}}const y={[Tt]:Pt(o)},d=Object.create(y),b=Object.create(y);return d[q]=new DataView(r[0][q].buffer,Number(e),o),b[q]=h,b[Et]={address:a,len:c.byteLength,align:1},this.addShadow(b,d,1)}getShadowAddress(t,e){if(e){const n=t[q];if(void 0===e.address){const t=this.createClusterShadow(e);e.address=this.getViewAddress(t[q])}return nr(e.address,n.byteOffset-e.start)}{const e=this.createShadow(t);return this.getViewAddress(e[q])}}createShadow(t){const e=t[q],n=t.constructor[mt]??e[mt],r=Object.create(t.constructor.prototype),i=r[q]=this.allocateShadowMemory(e.byteLength,n);return r[Et]={address:this.getViewAddress(i),len:i.byteLength,align:n},this.addShadow(r,t,n)}addShadow(t,e,n){let{shadowMap:r}=this.context;return r||(r=this.context.shadowMap=new Map),r.set(t,e),this.registerMemory(t[q],e[q],n),t}removeShadow(t){const{shadowMap:e}=this.context;if(e)for(const[n]of e)if(n[q]===t){e.delete(n);break}}updateShadows(){const{shadowMap:t}=this.context;if(t)for(const[e,n]of t)e[Tt](n)}updateShadowTargets(){const{shadowMap:t}=this.context;if(t)for(const[e,n]of t)n[Tt](e)}releaseShadows(){const{shadowMap:t}=this.context;if(t)for(const[e]of t){const{address:t,len:n,align:r}=e[Et];this.freeShadowMemory(t,n,r)}}acquirePointerTargets(t){const e=this,n=new Map,r=function({isActive:t,isMutable:i}){const s=this[wt];if(n.get(s))return;n.set(s,!0);const o=!s.constructor.const,c=s[G][0];let a,l;if(t(this)){const t=s.constructor.child;if(!c||i(this)){l=s[st]();const n=e.findMemory(l.address,l.length,t[pt]);a=n?t.call($t,n):null}else a=c}c?.[It]?.(r,{vivificate:!0,isMutable:()=>o}),a!==c&&(a?.[It]?.(r,{vivificate:!0,isMutable:()=>o}),s[G][0]=a,e.inFixedMemory(s)&&(s[ut]=l))};t[It](r,{vivificate:!0})}}class Yn{pointerProcessed=new Map;memoryList=[];shadowMap=null;call=0}function Qn(t,e,n){let r=0,i=t.length;if(0===i)return 0;for(;r<i;){const s=Math.floor((r+i)/2);n(t[s])<=e?r=s+1:i=s}return i}function tr(t,e){return Qn(t,e,(t=>t.address))}function er(t,e){return void 0!==e&&("bigint"==typeof t&&(t=Number(0xFFFFFFFFn&t)),!!(t&e-1))}function nr(t,e){return t+("bigint"==typeof t?BigInt(e):e)}class rr extends Kn{imports={getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"},flushStdout:{argType:"",returnType:""}};exports={allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"iibv",returnType:"v"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}};nextValueIndex=1;valueTable={0:null};valueIndices=new Map;memory=null;initPromise=null;customWASI=null;hasCodeSource=!1;littleEndian=!0;async init(t){if(t&&this.hasCodeSource)throw new Error("Cannot set WASI interface after compilation has already begun (consider disabling topLevelAwait)");this.customWASI=t,await this.initPromise}allocateHostMemory(t,e){const n={[mt]:e},r=Pt(t),i=this.allocateRelocMemory(t,e),s=this.allocateShadowMemory(t,e),o={constructor:n,[q]:i,[Tt]:r},c={constructor:n,[q]:s,[Tt]:r};return c[Et]={address:this.getViewAddress(s),len:t,align:e},this.addShadow(c,o,e),s}freeHostMemory(t,e,n){const r=this.findMemory(t,e,1);this.removeShadow(r),this.unregisterMemory(t),this.freeShadowMemory(t,e,n)}getBufferAddress(t){return 0}allocateFixedMemory(t,e){const n=t?this.allocateExternMemory(t,e):0,r=this.obtainFixedView(n,t);return r[mt]=e,r}freeFixedMemory(t,e,n){e&&this.freeExternMemory(t,e,n)}obtainFixedView(t,e){t<0&&(t=0);const{memory:n}=this,r=this.obtainView(n.buffer,t,e);return r[q]={memory:n,address:t,len:e},r}releaseFixedView(t){t.buffer;const e=t.byteOffset,n=t.byteLength,r=t[mt];void 0!==r&&this.freeFixedMemory(e,n,r)}inFixedMemory(t){return!!this.memory&&(Jt.call(t),t[q].buffer===this.memory.buffer)}copyBytes(t,e,n){const{memory:r}=this,i=new DataView(r.buffer,e,n);_t(n)(t,i)}findSentinel(t,e){const{memory:n}=this,r=e.byteLength,i=n.buffer.byteLength-r+1;for(let s=t;s<i;s+=r){const i=new DataView(n.buffer,s,r);let o=!0;for(let t=0;t<r;t++)if(i.getUint8(t)!==e.getUint8(t)){o=!1;break}if(o)return(s-t)/r}}captureString(t,e){const{buffer:n}=this.memory;return Fe(new Uint8Array(n,t,e))}getTargetAddress(t,e){return this.inFixedMemory(t)?this.getViewAddress(t[q]):0===t[q].byteLength&&0}clearExchangeTable(){1!==this.nextValueIndex&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(t){if(t){let e=this.valueIndices.get(t);return void 0===e&&(e=this.nextValueIndex++,this.valueIndices.set(t,e),this.valueTable[e]=t),e}return 0}fromWebAssembly(t,e){switch(t){case"v":case"s":return this.valueTable[e];case"i":return e;case"b":return!!e}}toWebAssembly(t,e){switch(t){case"v":case"s":return this.getObjectIndex(e);case"i":return e;case"b":return e?1:0}}exportFunction(t,e="",n=""){return t?(...r)=>{r=r.map(((t,n)=>this.fromWebAssembly(e.charAt(n),t)));const i=t.apply(this,r);return this.toWebAssembly(n,i)}:()=>{}}importFunction(t,e="",n=""){let r=!1;return e.startsWith("c")&&(r=!0,e=e.slice(1)),(...i)=>{i=i.map(((t,n)=>this.toWebAssembly(e.charAt(n),t))),r&&(i=[this.context.call,...i]);const s=t.apply(this,i);return this.fromWebAssembly(n,s)}}exportFunctions(){const t={};for(const[e,{argType:n,returnType:r,alias:i}]of Object.entries(this.exports)){const s=this[i??e];t[`_${e}`]=this.exportFunction(s,n,r)}return t}importFunctions(t){for(const[e,n]of Object.entries(t)){const t=this.imports[e];if(t){const{argType:r,returnType:i}=t;this[e]=this.importFunction(n,r,i)}}}async instantiateWebAssembly(t){const e=await t;this.hasCodeSource=!0;const n={env:this.exportFunctions(),wasi_snapshot_preview1:this.getWASIImport()};return"Response"===e[Symbol.toStringTag]?WebAssembly.instantiateStreaming(e,n):WebAssembly.instantiate(e,n)}loadModule(t){return this.initPromise=(async()=>{const{instance:e}=await this.instantiateWebAssembly(t),{memory:n,_initialize:r}=e.exports;this.importFunctions(e.exports),this.trackInstance(e),this.customWASI?.initialize?.(e),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=n,r?.()})()}trackInstance(t){const e=new WeakRef(t);Object.defineProperty(this,"released",{get:()=>!e.deref(),enumerable:!0})}linkVariables(t){this.initPromise&&(this.initPromise=this.initPromise.then((()=>super.linkVariables(t))))}getMemoryOffset(t){return t}recreateAddress(t){return t}startCall(t,e){this.startContext(),this.context.call=t,e[It]&&this.updatePointerAddresses(e);const n=this.getShadowAddress(e);return this.updateShadows(),n}endCall(t,e){this.updateShadowTargets(),e[It]&&this.acquirePointerTargets(e),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&(this.flushStdout(),this.flushConsole())}async runThunk(t,e){return await this.initPromise,this.runThunk(t,e)}invokeThunk(t,e){try{const n=this.runThunk(t,e);if(n){if("Promise"===n[Symbol.toStringTag])return n.then((t=>(t&&this.handleError(t),e.retval)),(t=>{this.handleError(t)}));throw n}return e.retval}catch(t){this.handleError(t)}}handleError(t){if("string"==typeof t)throw new k(t);if(!(t instanceof U&&0===t.code))throw t}getWASIImport(){if(this.customWASI)return this.customWASI.wasiImport;{const t=38,e=8,n=()=>t;return{args_get:n,args_sizes_get:n,clock_res_get:n,clock_time_get:n,environ_get:n,environ_sizes_get:n,fd_advise:n,fd_allocate:n,fd_close:n,fd_datasync:n,fd_pread:n,fd_pwrite:n,fd_read:n,fd_readdir:n,fd_renumber:n,fd_seek:n,fd_sync:n,fd_tell:n,fd_write:(e,n,r,i)=>{if(1===e||2===e){const t=new DataView(this.memory.buffer);let e=0;for(let i=0,s=n;i<r;i++,s+=8){const n=t.getUint32(s,!0),r=t.getUint32(s+4,!0);if(r>0){const t=new DataView(this.memory.buffer,n,r);this.writeToConsole(t),e+=r}}return t.setUint32(i,e,!0),0}return t},fd_fdstat_get:n,fd_fdstat_set_flags:n,fd_fdstat_set_rights:n,fd_filestat_get:n,fd_filestat_set_size:n,fd_filestat_set_times:n,fd_prestat_get:()=>e,fd_prestat_dir_name:n,path_create_directory:n,path_filestat_get:n,path_filestat_set_times:n,path_link:n,path_open:n,path_readlink:n,path_remove_directory:n,path_rename:n,path_symlink:n,path_unlink_file:n,poll_oneoff:n,proc_exit:t=>{throw new U(t)},random_get:(t,e)=>{const n=new DataView(this.memory.buffer,t,e);for(let t=0;t<e;t++)n.setUint8(t,Math.floor(256*Math.random()));return 0},sched_yield:n,sock_accept:n,sock_recv:n,sock_send:n,sock_shutdown:n}}}}function ir(t){return new rr}}}]);